{"_id":{"$oid":"672ba2e7a71700006d2fc740"},"scope":"complete","country":"us","engine":"chrome_vim","product_page_requires_account":"no","shipping_options_div_type":"none","end_delay":4000,"status":"live","old_status":"pending","website_url":"ballarddesigns.com","website_name":"Ballard Designs","honey_id":"22","site_id":{"$oid":"5d65877278c6bd1142ca1c92"},"partial_urls":["ballarddesigns.com"],"login_recording":null,"signup_recording":null,"title_div":{"selector":".gwt-product-detail-product-name-label, div.product-name-label h1","has_custom_selector":true},"brand_div":{"selector":"site_name","has_custom_selector":true},"price_div":{"selector":".gwt-product-top-price-and-number .gwt-product-detail-top-price, body:not(:has(.gwt-product-top-price-and-number .gwt-product-detail-top-price)) .gwt-product-top-price-and-number div.gwt-now-price-holder, div.universal-product-price div.stacked-price-now-label:contains($), .universal-product-price .universal-price-panel:first()","has_custom_selector":true},"returns_div":null,"image_div":{"selector":".iwc-main-img","has_custom_selector":true},"alt_images_div":{"selector":".iwc-thumbs-panel img","has_custom_selector":true},"custom_id_div":null,"extra_info_div":null,"weight_div":null,"product_container_div":null,"add_to_cart_recording":[{"type":1010,"info":{"selector":"//div[contains(@class, 'gwt-product-option-panel')][@data-option-name][1]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [sergio.condecarrasco] 2021-03-17\r\nreturn _ttAttributeGet(1);","set":"return _ttAttributeSet(1, fillValue);","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"option 1","field_type":""},{"type":1010,"info":{"selector":"//div[contains(@class, 'gwt-product-option-panel')][@data-option-name][2]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [sergio.condecarrasco] 2021-03-17\r\nreturn _ttAttributeGet(2);","set":"return _ttAttributeSet(2, fillValue);","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"option 2","field_type":""},{"type":20,"info":{"type":"text","tagName":"BUTTON","value":"","options":null,"selector":"div.product-detail-cta-buttons-panel button.add-to-cart-button, div.product-add-to-cart-panel button.add-to-cart-button:not([disabled])","is_optional":"no","frame":"","timeout":"","only_on_checkout_type":"","comment":"","checked":null,"has_custom_selector":true}}],"add_to_cart_changes_div":null,"remove_from_cart_recording":null,"order_error_divs":[],"notes":"[Built By Sergio Conde 2/23/2021]\r\n\r\n***Special Notes:\r\n- Using generic attributes for this site, all attributes (except those under not supported section), can be integrated as they do not refresh the page or change the title\r\n- Images have highest possible resolution I was able to achieve\r\n- Most attributes chage price, so having always set = yes is necessary for all attributes\r\n- delay 2 is a bit high but it is to prevent grabbing wrong images or prices\r\n\r\n*** GID Notes:\r\n- Every title seems unique, seems like best way to group:\r\n\r\nProduct - https://www.ballarddesigns.com/silvia-sofa/611099?listIndex=0&uniqueId=611099\r\nGID - Silvia Sofa\r\n\r\nProduct - https://www.ballarddesigns.com/silvia-sofa--stocked/607657?listIndex=2&uniqueId=607657\r\nGID - Silvia Sofa -Stocked\r\n\r\nProduct - https://www.ballarddesigns.com/dehavilland-sideboard-glass-topper/427321?listIndex=0&uniqueId=427321\r\nGID - Dehavilland Sideboard Glass Topper\r\n\r\nProduct - https://www.ballarddesigns.com/dehavilland-sideboard-2-door---glass-topper/619173?listIndex=2&uniqueId=619173\r\nGID - Dehavilland Sideboard 2 Door - Glass Topper\r\n\r\n*** Attributes: Supporting all except those under not supported section.\r\n\r\n*** Product Types:\r\n\r\nNo attributes\r\nhttps://www.ballarddesigns.com/hartwell-upholstered-sofa-in-biff-indigo-insideout-26reg-3b-performance-with-fossil-finish---stocked/furniture/living-room/sofas/611614?listIndex=0&uniqueId=611614\r\n\r\nColor\r\nhttps://www.ballarddesigns.com/lexie-chair/custom/furniture/stocked-upholstery/546431?listIndex=20&uniqueId=546431\r\nhttps://www.ballarddesigns.com/harper-campaign-bar/furniture/living-room/bar/422814?listIndex=3&uniqueId=422814\r\n\r\nv1 Size (Img Swatch)\r\nhttps://www.ballarddesigns.com/adele-cabinet-hardware/sale/category/new-clearance/456938?listIndex=44&uniqueId=456938 \r\nhttps://www.ballarddesigns.com/essential-side-table/furniture/living-room/coffee-accent-tables/456909?listIndex=25&uniqueId=456909\r\nhttps://www.ballarddesigns.com/suzanne-kasler-metal-accent-tables/furniture/living-room/coffee-accent-tables/362700?listIndex=14&uniqueId=362700\r\n\r\nv2 Size (Select)\r\nhttps://www.ballarddesigns.com/dehavilland-sideboard-glass-topper/427321?listIndex=0&uniqueId=427321\r\nhttps://www.ballarddesigns.com/pink-peony-art/611041?categoryId=83479&fromCart=true&gtmPageName=Shopping%20Cart\r\n\r\nSize & Color\r\nhttps://www.ballarddesigns.com/tyler-tufted-headboard/custom/furniture/stocked-upholstery/444765?listIndex=49&uniqueId=444765\r\n\r\nv1 Color & Size (Text Swatch)\r\nhttps://www.ballarddesigns.com/chandler-headboard/custom/furniture/stocked-upholstery/439361?listIndex=50&uniqueId=439361\r\nhttps://www.ballarddesigns.com/linen-fringed-pillow-cover/sale/category/new-clearance/526923?listIndex=4&uniqueId=526923\r\nhttps://www.ballarddesigns.com/lilian-textured-drapery-panel/sale/category/new-clearance/536974?listIndex=34&uniqueId=536974 \r\n\r\nv2 Color & Size (Select)\r\nhttps://www.ballarddesigns.com/gabriola-rug/sale/category/new-clearance/470424?listIndex=0&uniqueId=470424\r\nhttps://www.ballarddesigns.com/turin-indoor-2foutdoor-rug/sale/category/new-clearance/13109?listIndex=22&uniqueId=13109\r\nhttps://www.ballarddesigns.com/laundry-comfort-mat/gifts/all/335762?listIndex=25&uniqueId=335762  --> has shipping info in attributes\r\n\r\nColor & Style (Swatches)\r\nhttps://www.ballarddesigns.com/amelie-bath-towel-collection/gifts/all/304721?listIndex=9&uniqueId=304721\r\n\r\nFinish\r\nhttps://www.ballarddesigns.com/tristen-ottoman-with-set-of-2-trays/custom/furniture/stocked-upholstery/484974?listIndex=34&uniqueId=484974\r\nhttps://www.ballarddesigns.com/classic-garden-stool/355391?listIndex=6&uniqueId=355391\r\nhttps://www.ballarddesigns.com/casa-florentina-josephina-3-piece-flush-wall-unit---custom/furniture/home-office/bookcases/538114?listIndex=20&uniqueId=538114   --> has see +more popup\r\n\r\nFinish & Size (Select)\r\nhttps://www.ballarddesigns.com/toulon-planter/gifts/all/265479?listIndex=26&uniqueId=265479\r\n\r\nv1 Style (Swatch Text)\r\nhttps://www.ballarddesigns.com/dayna-stools---red/589783?listIndex=56&uniqueId=589783  \r\n\r\nv2 Style (Swatch Img)\r\nhttps://www.ballarddesigns.com/blue-26-white-chinoiserie-collection/gifts/all/311238?listIndex=1&uniqueId=311238\r\nhttps://www.ballarddesigns.com/nadia-side-tables/furniture/living-room/coffee-accent-tables/433941?listIndex=16&uniqueId=433941\r\nhttps://www.ballarddesigns.com/vigneto-shelf/furniture/living-room/bar/341128?listIndex=9&uniqueId=341128\r\n\r\nFinish & Style \r\nhttps://www.ballarddesigns.com/dayna-stools/413093?listIndex=11&uniqueId=413093\r\n\r\nSyle & Finish\r\nhttps://www.ballarddesigns.com/lemans-stools/413095?listIndex=10&uniqueId=413095\r\n\r\nPersonalized \r\nhttps://www.ballarddesigns.com/wallace-custom-stamp-26-embosser/gifts/personal/389847?listIndex=2&uniqueId=389847\r\n\r\nOOS\r\nhttps://www.ballarddesigns.com/newport-demilune-table-with-doors/furniture/living-room/console-tables/204008?listIndex=13&uniqueId=204008\r\n\r\nRegular Price\r\nhttps://www.ballarddesigns.com/dayna-arm-chair/furniture/living-room/chairs/292537?listIndex=27&uniqueId=292537\r\nhttps://www.ballarddesigns.com/lexie-chair/furniture/living-room/chairs/546431?listIndex=36&uniqueId=546431\r\n\r\nPrice Range\r\nhttps://www.ballarddesigns.com/grayton-slubby-fringed-drapery-panel/sale/category/new-clearance/589566?listIndex=28&uniqueId=589566\r\nhttps://www.ballarddesigns.com/casa-florentina-piave-console---custom/furniture/living-room/console-tables/338092?listIndex=18&uniqueId=338092\r\n\r\nSale Price\r\nhttps://www.ballarddesigns.com/bamboo-rectangular-pendant/lighting/chandeliers399/460848?listIndex=1&uniqueId=460848\r\n\r\nClearance: they have different price selectors\r\nhttps://www.ballarddesigns.com/adele-cabinet-hardware/sale/category/new-clearance/456938?listIndex=44&uniqueId=456938\r\nhttps://www.ballarddesigns.com/louisa-bergere-chair/furniture/living-room/chairs/260858?listIndex=21&uniqueId=260858\r\nOG Price Selector: .gwt-product-top-price-and-number .gwt-was-price-holder\r\nDiscount Pirce Selector: .gwt-product-top-price-and-number .gwt-now-price-holder\r\n\r\n*** Not Supported:\r\n\r\nMultiproduct Pdp:\r\nhttps://www.ballarddesigns.com/thompson-1-drawer-stacking-cabinet/furniture/home-office/bookcases/607080?listIndex=67&uniqueId=607080\r\nhttps://www.ballarddesigns.com/harper-sideboard/furniture/living-room/console-tables/564315?listIndex=17&uniqueId=564315\r\n\r\nTimeout Issues: The products/attributes below are going to be blocked because they contain too many variants options (usually hundreds of fabric options)\r\n -Base Fabric\r\nhttps://www.ballarddesigns.com/silvia-sofa/furniture/living-room/sofas/611099?listIndex=1&uniqueId=611099 --> 1900+ options\r\nhttps://www.ballarddesigns.com/nala-stool/400806?listIndex=8&uniqueId=400806\r\n\r\n-Fabric\r\nhttps://www.ballarddesigns.com/allister-upholstered-counter-stool/589647?listIndex=57&uniqueId=589647\r\n\r\n-Fabric & Finish\r\nhttps://www.ballarddesigns.com/eton-upholstered-2-piece-sectional-with-left-arm-apartment-sofa-and-right-arm-chaise/furniture/living-room/sectionals/316797?listIndex=1&uniqueId=316797%20%20--%3E300%20plus%20fabric\r\n\r\n-Configuration & Fabric\r\nhttps://www.ballarddesigns.com/baldwin-slipcovered-right-arm-loveseat/furniture/living-room/sectionals/12483?listIndex=61&uniqueId=12483","sku_identifier":{"selector":"#ttSKU","has_custom_selector":true},"mpn_identifier":{"selector":".part-number-value","has_custom_selector":true},"gtin_identifier":null,"final_price_div_auth":null,"shipping_price_div_auth":null,"handling_price_div_auth":null,"checkout_recording_auth":null,"currency_format":"$AMOUNT","recording_start_urls":{"addToCart":"https://www.ballarddesigns.com/casa-florentina-josephina-bookcase-with-cabinet---custom/furniture/home-office/bookcases/538112?listIndex=10&uniqueId=538112"},"recording_end_urls":null,"category_wrapper_div":{"selector":".breadcrumbs a","has_custom_selector":true},"address_check_auth":null,"final_sale_div":null,"original_price_div":{"selector":".gwt-product-top-price-and-number .gwt-promo-discount-was-label, .gwt-product-top-price-and-number .gwt-was-price-holder, div.universal-product-price div.stacked-price-was-label","has_custom_selector":true},"discounted_price_div":{"selector":".gwt-product-top-price-and-number .gwt-promo-discount-now-label, .gwt-product-top-price-and-number .gwt-now-price-holder, div.universal-product-price div.stacked-price-now-label","has_custom_selector":true},"sales_tax_div_auth":null,"shipping_estimate_div_auth":null,"pickup_div":null,"non_purchasable_div":null,"p_free_shipping_div":null,"errors_meta":[],"data_converters":null,"logo":null,"delays":{"product_opts_field":2250,"product_opts":295000,"add_to_cart_field_press":4000,"add_to_cart":""},"user_agent":null,"user_agent_scope":null,"needed_banned_remote_urls":[],"contact":" 1-800-536-7551","ship_est_start_time":{"$date":"2021-03-15T06:21:03.840Z"},"est_stats_start_time":null,"checkout_information_auth":null,"regression_tests_status":{"daily_noauth_simple_test":{"at":{"$date":"2019-08-29T23:10:55.435Z"},"status":"failed","issues":["Cart failed."],"cart_failures":1},"feed_test":{"at":{"$date":"2021-03-17T23:19:09.657Z"},"status":"ok","issues":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0}},"checkout_dep_fields":null,"regression_products":[{"url":"https://www.ballarddesigns.com/lexie-chair/custom/furniture/stocked-upholstery/546431?listIndex=20&uniqueId=546431","source":"manual"},{"url":"https://www.ballarddesigns.com/dehavilland-sideboard-glass-topper/427321?listIndex=0&uniqueId=427321","source":"manual"},{"url":"https://www.ballarddesigns.com/chandler-headboard/custom/furniture/stocked-upholstery/439361?listIndex=50&uniqueId=439361","source":"manual"},{"url":"https://www.ballarddesigns.com/amelie-bath-towel-collection/gifts/all/304721?listIndex=9&uniqueId=304721","source":"manual"},{"url":"https://www.ballarddesigns.com/toulon-planter/gifts/all/265479?listIndex=26&uniqueId=265479","source":"manual"},{"url":"https://www.ballarddesigns.com/dayna-stools---red/589783?listIndex=56&uniqueId=589783","source":"manual"},{"url":"https://www.ballarddesigns.com/blue-26-white-chinoiserie-collection/gifts/all/311238?listIndex=1&uniqueId=311238","source":"manual"},{"url":"https://www.ballarddesigns.com/dayna-stools/413093?listIndex=11&uniqueId=413093","source":"manual"}],"store_options":{"images_on_add_to_cart":"yes","creates_store_account":null,"final_price_includes_gift_card":null,"overwrite_sales_tax":null,"sync_noauth_and_auth":null,"one_coupon_only":null,"honey_billing_address":null,"add_app_to_ua":null,"shoprunner_on_shipping_opts":null,"existing_account_emails_not_allowed":null,"retry_on_info_failures":null,"use_chrome":null,"disable_product_quantity":false,"disable_daily_regressions":null,"disable_image_proxy":"yes","continue_on_alerts":null,"noauth_ends_with_success":null,"auth_ends_with_success":null,"local_ends_with_success":null,"is_variantless":null},"product_opts_retrieval_js":"var pdpsToBlock = {\r\n    isBundle: { issueType: 'BUNDLE', selector: '#gwt_bundledetail_json'},\r\n    multiproduct: { issueType: 'MULTIPRODUCT', selector: \"//div[contains(@class,'gwt-product-detail-widget')][not(contains(@class,'free-swatch-widget'))]/div[contains(@class,'product-detail-widget-bottom-links-panel')]//button[@id='gwt-add-to-cart-btn']\" },\r\n    hasTooManyAttributes: { issueType: 'TOO MANY ATTRIBUTES', selector: \"#gwt-comshop-fabric-filter-panel, .gwt-pc-option-selected-fabric-panel\" },\r\n};\r\n\r\nfor (var pdpType in pdpsToBlock) {\r\n    isMultiproduct = pdpsToBlock[pdpType].issueType == \"MULTIPRODUCT\";\r\n    var needsToBeBlocked = isMultiproduct ? __utils__.findAll(pdpsToBlock[pdpType].selector).length : __utils__.findOne(pdpsToBlock[pdpType].selector);\r\n    if (isMultiproduct ? needsToBeBlocked > 1 : needsToBeBlocked) {\r\n        __utils__.echo('--- ERROR! - PRODUCT NOT SUPPORTED - ' + pdpsToBlock[pdpType].issueType);\r\n        console.log(\"blocked\");\r\n        __utils__.echo('escapeVim');\r\n    }\r\n}\r\n\r\nvar totalSetTime = 0;\r\n_ttTimeout = function() {\r\n  var blockProduct = false;\r\n  // input attribute info in the same order as attributes are located in Add/Remove from Cart section\r\n  // increase this delays if needing to block more products\r\n  var attrInfo = \r\n  { attribute1: {delay: 3500, selector: \"//div[@id='gwt-option-panel']/div[contains(@class, 'gwt-product-option-panel')][1]//img[contains(@class,'gwt-image-picker-option-image')],//div[contains(@class, 'gwt-product-option-panel')][@data-option-name][1]//*[@class='gwt-selection-chip-display'], //div[contains(@class, 'gwt-product-option-panel')][@data-option-name][1]//select/option[@name]\"},\r\n    attribute2: {delay: 3500, selector: \"//div[@id='gwt-option-panel']/div[contains(@class, 'gwt-product-option-panel')][2]//img[contains(@class,'gwt-image-picker-option-image')],//div[contains(@class, 'gwt-product-option-panel')][@data-option-name][2]//*[@class='gwt-selection-chip-display'], //div[contains(@class, 'gwt-product-option-panel')][@data-option-name][2]//select/option[@name]\"},\r\n  };\r\n  // estimating total time needed to run SET for all combos  \r\n  var optsCountByAttr = [];\r\n  for(var attr in attrInfo){\r\n    var attrOptsCount = __utils__.findAll(attrInfo[attr].selector).length;\r\n    var attrList =  __utils__.findAll(attrInfo[attr].selector);\r\n    if(attrOptsCount === 0){\r\n      continue;\r\n    }\r\n    optsCountByAttr.push(attrOptsCount);\r\n    var attrSetCount = 1;\r\n    for (var iPos = 0; iPos < optsCountByAttr.length; iPos++) {\r\n      attrSetCount *= optsCountByAttr[iPos];\r\n    }\r\n    __utils__.echo('SET count for '+attr+': '+attrSetCount);\r\n    totalSetTime += attrSetCount*attrInfo[attr].delay;\r\n  }\r\n  __utils__.echo('------ TOTAL SET TIME '+ totalSetTime);\r\n  if (totalSetTime > 295000) {\r\n    blockProduct = true;\r\n  }\r\n  return blockProduct;\r\n};\r\nif(_ttTimeout()){\r\n  var _ttBlockMsg = 'PRODUCT NOT SUPPORTED - ESTIMATED DELAY#3 TOO HIGH (' + totalSetTime + ')';\r\n  __utils__.echo('escapeVim');\r\n}\r\n\r\n$('#ttHidden').remove();\r\n$('body').append('<div id=\"ttHidden\" style=\"display:none;\"></div>');\r\n\r\nttGetProductData = function (){\r\n  var scriptEl = __utils__.findOne('#schema-product-data');  \r\n  var script = scriptEl && scriptEl.text();\r\n  var product; \r\n  try {\r\n      product = script && JSON.parse(script);\r\n  } catch (e) { /* do nothing */ }\r\n  return product;\r\n};\r\n\r\nvar product = ttGetProductData();\r\n\r\n// Function to get the base SKU by removing parts that match the attribute array\r\nttGetBaseSku = function(sku, attributes) {\r\n  var skuParts = sku.split(' ');\r\n  // Filter out any parts that match the attribute array\r\n  var filteredParts = skuParts.filter(function(part) {\r\n    return attributes.indexOf(part) === -1;\r\n  });\r\n  return filteredParts.join('');\r\n}; \r\n\r\nttConstructAttrArr = function(){\r\n    var attributes = [];\r\n    var opts = __utils__.findAll('.gwt-selection-chip-picker-option, select.gwt-ListBox option[color], .gwt-image-picker-option');\r\n    for (var iPos = 0; iPos < opts.length; iPos++) {\r\n        var el = opts[iPos];\r\n        var elValue = el.attr('color').trim();\r\n        attributes.push(elValue);\r\n    }\r\n    return attributes;\r\n};\r\n\r\nvar baseSKU;\r\nttSetInitialData = function (){\r\n    var rawSku = product && product.offers && product.offers.sku;\r\n    var sku = rawSku.replace(/ /g, '');\r\n    sku && $('#ttHidden').append('<div id=\"ttSKU\">' + sku + '</div>');\r\n    var attributes = ttConstructAttrArr();\r\n    baseSKU = ttGetBaseSku(rawSku, attributes);\r\n};\r\nttSetInitialData();\r\n\r\nvar attributeDivs = __utils__.findAll(\"//div[contains(@class, 'gwt-product-option-panel')][@data-option-name]\");\r\nvar attrCount = attributeDivs.length;\r\nvar tempSKU;\r\nttUpdateSKU = function (attrIdx, code){\r\n    var currentSKU;\r\n    if(attrCount == 1){\r\n        currentSKU = baseSKU + code;\r\n    } else {\r\n        if(attrIdx == 1) {\r\n            tempSKU = baseSKU + code;\r\n        } else {\r\n            currentSKU = tempSKU + code;\r\n        }\r\n    }\r\n    currentSKU && $('#ttSKU').text(currentSKU);\r\n};\r\n\r\n// GET function for generic attributes\r\n_ttAttributeGet = function(attrIdx) {\r\n  var result = [];\r\n  var hasImgSwatch = true;\r\n  // base selector for attribute\r\n  var baseSel = \"//div[contains(@class, 'gwt-product-option-panel')][@data-option-name][\" + attrIdx + \"]\";\r\n  \r\n  // grabbing attribute label\r\n  var attrLabelDiv = __utils__.findOne( baseSel);\r\n  var attrLabel = attrLabelDiv && attrLabelDiv.attr('data-option-name').replace('Select ', '').trim();\r\n\r\n  // grabbing IMAGE SWATCH attribute variants\r\n  var opts = __utils__.findAll(baseSel + \"//img[contains(@class,'gwt-image-picker-option-image')]\");\r\n  // grabbing TEXT ONLY SWATCH attribute variants\r\n  if(!opts.length){\r\n    hasImgSwatch = false;\r\n    opts = __utils__.findAll(baseSel + '//*[contains(@class, \"gwt-selection-chip-picker-option\")]');\r\n  }\r\n  // grabbing SELECT attribute variants\r\n  if(!opts.length){\r\n    opts = __utils__.findAll(baseSel + \"//select/option[@name]\");\r\n  }\r\n  \r\n  for (var iPos = 0; iPos < opts.length; iPos++) {\r\n    var el = opts[iPos];\r\n    var elText = '';\r\n    var variantText;\r\n    if(hasImgSwatch){\r\n      variantText = el.attr('alt') && el.attr('alt').trim();\r\n    }\r\n    else {\r\n      variantText = el.text().replace(/- Estimated.*/,'').replace(/\\$\\d+.\\d+/,'').trim();\r\n      if(variantText.match(/unavailable/)) continue; // filtering OOS options\r\n    }\r\n    if(attrLabel && variantText){\r\n        elText = attrLabel + \": \" + variantText;\r\n    }\r\n    var obj = { text: elText, value: variantText };\r\n    result.push(obj);\r\n  }\r\n  return result;\r\n};\r\n\r\n_ttAttributeSet = function(attrIdx, fillValue) {\r\n  __utils__.echo('--------> option ' + attrIdx + ' fillValue = ' + fillValue);\r\n  var changed = false;\r\n  var hasImgSwatch = true;\r\n  var hasSelect = false;\r\n  // base selector for attribute\r\n  var baseSel = \"//div[contains(@class, 'gwt-product-option-panel')][@data-option-name][\" + attrIdx + \"]\";\r\n  // grabbing IMAGE SWATCH attribute variants\r\n  var opts = __utils__.findAll(baseSel + \"//img[contains(@class,'gwt-image-picker-option-image')]\");\r\n  // grabbing TEXT ONLY SWATCH attribute variants\r\n  if(!opts.length){\r\n    hasImgSwatch = false;\r\n    opts = __utils__.findAll(baseSel + '//*[contains(@class, \"gwt-selection-chip-picker-option\")]');\r\n  }\r\n  // grabbing SELECT attribute variants\r\n  if(!opts.length){\r\n    opts = __utils__.findAll(baseSel + \"//select/option[@name]\");\r\n    hasSelect = true;\r\n  }\r\n  for (var iPos = 0; iPos < opts.length; iPos++) {\r\n    var el = opts[iPos];\r\n    var variantText;\r\n    if(hasImgSwatch){\r\n      variantText = el.attr('alt') && el.attr('alt').trim();\r\n    } else {\r\n      variantText = el.text().replace(/- Estimated.*/,'').replace(/\\$\\d+.\\d+/,'').trim();\r\n      if(variantText.match(/unavailable/)) continue; // filtering OOS options\r\n    }\r\n    if (variantText == fillValue) {\r\n      if(hasSelect){\r\n        el.parent().val(el.val());\r\n        __utils__.mouseEvent('change', el.parent());\r\n      } else {\r\n        __utils__.mouseEvent('click', el);\r\n      }\r\n      changed = true;\r\n      ttUpdateSKU(attrIdx, el.attr('color'));\r\n    }\r\n  }\r\n  return changed;\r\n};","coupon_recording":null,"coupon_recording_info":null,"coupon_recording_error_div":null,"order_id_div_auth":null,"description_div":{"selector":"table.product-additional-info-panel, #additional-info-tab-container","has_custom_selector":true},"returns":"<p>All international orders must receive a returns authorization number from our call center.</p>\r\n\r\n<p>Please contact us immediately at international@ballarddesigns.com or 1-855-868-8555 (customers from all other countries outside of the U.S.) if you would like to return an item.</p>\r\n\r\n<p>Please have your order number, email address and return request available. Returns will be credited by our partner, BorderFree, in the original currency used for purchase. (Please note that you will be responsible for shipping costs.)</p>\r\n\r\n<p>To exchange your item for the same item in a different size or color, first follow the return instructions above and then place your new order online. BorderFree will credit your account for the item(s) returned and Ballard Designs will waive your return shipping costs. (Please note that you will be responsible for shipping costs for the replacement item.)</p>\r\n","final_price_div_local":null,"sales_tax_div_local":null,"order_id_div_local":null,"checkout_recording_local":null,"identifier_div_local":null,"name_div_local":null,"distance_div_local":null,"address_div_local":null,"phone_div_local":null,"when_div_local":null,"change_store_div_local":null,"wrapper_div_local":null,"coupon_value_div_auth":null,"gift_card_value_div_auth":null,"remove_addresses_recording_auth":null,"remove_baddresses_recording_auth":null,"remove_payments_recording_auth":null,"mobile_url_conversion":null,"allowed_product_url_args":["none"],"gift_card_recording":null,"gift_card_recording_info":null,"gift_card_recording_error_div":null,"gift_card_recording_continue_div":null,"remote_status_recording":null,"remote_status_container_div":null,"remote_status_title_div":null,"remote_status_state_div":null,"remote_status_tracking_div":null,"shipping_options_div":null,"shipping_options":{"cheapest":{"text":"cheapest","min_days":"3","max_days":"7"}},"shipping_options_recording_info":null,"shipping_estimate_exceptions":{"cheapest":"","fastest":""},"sync_data":[],"sync_master_url":null,"shipping_address_div_auth":null,"proxy":{"cart":"","purchase":""},"estimator":"price","feed_type":"cj-google-shopping","feed_meta":{"origin":"Ballard_Designs_Inc_-Ballard_CJ_Feed-shopping.txt.zip","idx_source":"parsed_url","idx_transform":""},"grouping_identifiers":[{"field":"title","modifier":""}],"platform":null,"platform_meta":null,"resolution":null,"cookies":null,"headers":null,"product_fetch_timeout":null,"tags":[],"login_url_check":null,"title_regexp":null,"p_attr_regexp":null,"images_regexp":"(.*) --> $1&hei=1200&wid=1200&fit=fit,1&op_sharpen=1","sku_regexp":null,"mpn_regexp":".*#(.*) --> $1","gtin_regexp":null,"receipt_prices":"unknown","gifting_recording":null,"gifting_recording_info":null,"page_detector":[{"selector":["body:not(:has(.t-product-details__bundle)) div.t-product-details h1[class*=\"product-details-heading\"]","body:not(:has(.pw--selected c-product-option__item)) ","body:not(:has(.c-product-com-options))"],"type":"where_am_i","regex":".+ballarddesigns\\.com\\/.+\\/\\d+.*","label":"Mobile"},{"selector":["body:not(:has(.t-product-details__bundle)) div.t-product-details h1[class*=\"product-details-heading\"]","body:not(:has(.pw--selected c-product-option__item)) ","body:not(:has(.c-product-com-options))"],"type":"product","regex":".+ballarddesigns\\.com\\/.+\\/\\d+.*","label":"Mobile"},{"selector":["body:not(:has(#gwt_bundledetail_json)) #gwt_productdetail_json div.product-name-label","body:not(:has(.gwt-pc-option-selected-fabric-panel))","body:not(:has(#gwt-comshop-fabric-filter-panel))"],"type":"product","regex":".+ballarddesigns\\.com\\/.+\\/\\d+.*","label":"Desktop"},{"selector":["body:not(:has(#gwt_bundledetail_json)) #gwt_productdetail_json div.product-name-label","body:not(:has(.gwt-pc-option-selected-fabric-panel))","body:not(:has(#gwt-comshop-fabric-filter-panel))"],"type":"where_am_i","regex":".+ballarddesigns\\.com\\/.+\\/\\d+.*","label":"Desktop"},{"selector":[".order-number-value"],"type":"checkout_confirm","regex":".+ballarddesigns\\.com\\/.+CheckoutConfirmationView\\?orderId=\\d+.+","label":""},{"selector":["#source-code-input, .edit-source-code-link",".estimated-total-value.right"],"type":"find_savings","regex":"","label":"Cart/Checkout"},{"selector":[".order-item-display-widget-v2"],"type":"cart_product","regex":"","label":"Desktop"}],"page_detector_watch":true,"h_legacy_find_savings":{"h_fs_promo_box_selector":"#source-code-input, .edit-source-code-link","h_fs_final_price_selector":".estimated-total-value.right","h_fs_submit_button":"@click(\"selector\":<M>.button.primary.source-code-promo-button.left</M>)","h_fs_time_between_codes":"4000","h_fs_pre_apply_code_action":"","h_fs_time_between_pre_apply":"1000","h_fs_remove_code_action":"@click(\"selector\":<M>.edit-source-code-link</M>)","h_fs_time_between_remove":"3000","h_fs_hide_cart_errors_selector":"#not-valid-error-message","h_fs_hide_cart_errors_selector2":".error","h_fs_time_finish":"1000","h_fs_max_codes":"10","h_format_price_divisor":"","h_existing_code_selector":".source-code-text","h_existing_code_selector_regex":"","h_existing_code_selector_attribute":"","temp_disable_find_savings":false,"h_fs_submit_button_template":{"id":"SCLK1","version":1,"variables":{"selector":".button.primary.source-code-promo-button.left"},"template":"@click(\"selector\":<M>{{selector}}</M>)"},"h_fs_remove_code_action_template":{"id":"SCLK1","version":1,"variables":{"selector":".edit-source-code-link"},"template":"@click(\"selector\":<M>{{selector}}</M>)"}},"h_legacy_metadata":{"pns_siteBaseURL":"not used","pns_siteCartURL1":"not used","pns_siteCartURL2":"not used","pns_siteCartURL3":"not used","pns_siteSelCartCodeSubmitType":"click","pns_siteSelCartAddButton":".promoCode","pns_siteSelCartAddButtonType":"append","pns_checkoutSel":"0","pns_siteType":"refresh","pns_siteALink":"http://www.amazon.com/?_encoding=UTF8&camp=1789&creative=390957&linkCode=ur2&tag=40n3y-20 #content","pns_siteSelProdName":".gwt-product-detail-product-name-label h1","pns_siteSelProdPrice":".gwt-product-detail-top-price","pns_siteSelProdHoneyButtonType":"append","pns_siteSelProdAddToCartType":"click","pns_pushCodes":"1","pns_priority":"3","pns_observerTarget":"body","pns_siteSelShowHoneyGold":"","pns_siteAzId":"78618","pns_gDACjsonContentType":"","pns_gDAChtmlRes":"","launchpad_pathname":"/","honeyTipsAutopopOn":"true","pns_siteSelOrderId":".order-number-value","pns_confirmRegex":".+ballarddesigns\\.com\\/.+CheckoutConfirmationView\\?orderId=\\d+.+","droplist_universal_active":"true"},"mixins":null,"vim_overrides":null,"privacy_url":"https://www.ballarddesigns.com/privacy/content","tos_url":"https://www.ballarddesigns.com/conditions-of-use/content","where_am_i":{"title_selector":".gwt-product-detail-product-name-label, div.product-name-label h1","price_selector":".gwt-product-top-price-and-number .gwt-product-detail-top-price, body:not(:has(.gwt-product-top-price-and-number .gwt-product-detail-top-price)) .gwt-product-top-price-and-number div.gwt-now-price-holder, div.universal-product-price div.stacked-price-now-label:contains($), .universal-product-price .universal-price-panel:first()","image_selector":".iwc-main-img","category_selector":".breadcrumbs a","keyword_selector":null,"group_lookup_selector":null,"group_lookup_key":null,"item_lookup_selector":null,"item_lookup_key":null,"titleRegexp":null,"imagesRegexp":null,"itemLookupRegexp":null,"groupLookupRegexp":null,"gidMixin":null,"gidMixin_template":null,"title_selector_mobile":".t-product-details h1[class*=\"product-details-heading\"]","price_selector_mobile":".t-product-details-price span[class*=\"c-product-price\"]:contains($):last, div.c-universal-price div.price:first","image_selector_mobile":"div.c-carousel div.c-carousel__item.is--active img[src]:first","category_selector_mobile":null,"keyword_selector_mobile":null,"group_lookup_selector_mobile":null,"group_lookup_key_mobile":null,"item_lookup_selector_mobile":null,"item_lookup_key_mobile":null,"titleRegexp_mobile":null,"imagesRegexp_mobile":null,"itemLookupRegexp_mobile":null,"groupLookupRegexp_mobile":null,"gidMixin_mobile":null,"gidMixin_template_mobile":null},"cart_link_div":null,"cart_link_div_mobile":null,"cart_link_div_extension":null,"cart_link_div_six":null,"cart_link_div_server":null,"cart_qtys_div":{"selector":".order-item-quantity-panel input","noauth_start_idx":"","auth_start_idx":"","local_start_idx":""},"cart_qtys_div_mobile":null,"cart_qtys_div_extension":null,"cart_qtys_div_six":null,"cart_qtys_div_server":null,"cart_wrapper_div":{"selector":".order-item-display-widget-v2","noauth_start_idx":"","auth_start_idx":"","local_start_idx":""},"cart_wrapper_div_mobile":{"selector":".c-cart-product","noauth_start_idx":"","auth_start_idx":"","local_start_idx":""},"cart_wrapper_div_extension":null,"cart_wrapper_div_six":null,"cart_wrapper_div_server":null,"cart_p_name_div":{"selector":".order-item-name","has_custom_selector":true},"cart_p_name_div_mobile":{"selector":".c-cart-product-item__info h2","has_custom_selector":true},"cart_p_name_div_extension":null,"cart_p_name_div_six":null,"cart_p_name_div_server":null,"cart_p_sku_div":null,"cart_p_sku_div_mobile":null,"cart_p_sku_div_extension":null,"cart_p_sku_div_six":null,"cart_p_sku_div_server":null,"cart_title_regexp":null,"cart_title_regexp_mobile":null,"cart_title_regexp_extension":null,"cart_title_regexp_six":null,"cart_title_regexp_server":null,"cart_p_url_div":null,"cart_p_url_div_mobile":{"selector":".c-cart-product-item__info a","has_custom_selector":true},"cart_p_url_div_extension":null,"cart_p_url_div_six":null,"cart_p_url_div_server":null,"cart_p_image_div":{"selector":".order-item-image-holder img","has_custom_selector":true},"cart_p_image_div_mobile":{"selector":".c-cart-product-item__image-container img","has_custom_selector":true},"cart_p_image_div_extension":null,"cart_p_image_div_six":null,"cart_p_image_div_server":null,"cart_p_qty_div":{"selector":".order-item-quantity-panel input","has_custom_selector":true},"cart_p_qty_div_mobile":{"selector":".c-cart-product__quantity-value","has_custom_selector":true},"cart_p_qty_div_extension":null,"cart_p_qty_div_six":null,"cart_p_qty_div_server":null,"cart_p_attrs_div":null,"cart_p_attrs_div_mobile":null,"cart_p_attrs_div_extension":null,"cart_p_attrs_div_six":null,"cart_p_attrs_div_server":null,"cart_p_unit_price_div":null,"cart_p_unit_price_div_mobile":null,"cart_p_unit_price_div_extension":null,"cart_p_unit_price_div_six":null,"cart_p_unit_price_div_server":null,"cart_p_total_price_div":{"selector":".order-item-total-price-panel","has_custom_selector":true},"cart_p_total_price_div_mobile":{"selector":".t-product-details__price .final-price","has_custom_selector":true},"cart_p_total_price_div_extension":null,"cart_p_total_price_div_six":null,"cart_p_total_price_div_server":null,"cart_p_subtotal_div":{"selector":".subtotal-holder .subtotal-value","has_custom_selector":true},"cart_p_subtotal_div_mobile":{"selector":".t-cart__summary-subtotal .pw-ledger__value","has_custom_selector":true},"cart_p_subtotal_div_extension":null,"cart_p_subtotal_div_six":null,"cart_p_subtotal_div_server":null,"cart_p_tax_div":{"selector":".additional-charges-value.tax","has_custom_selector":true},"cart_p_tax_div_mobile":{"selector":".t-cart__summary-shipping-tax-charges .pw-ledger__value:last","has_custom_selector":true},"cart_p_tax_div_extension":null,"cart_p_tax_div_six":null,"cart_p_tax_div_server":null,"cart_p_shipping_div":{"selector":".additional-charges-value.shipping","has_custom_selector":true},"cart_p_shipping_div_mobile":{"selector":".t-cart__summary-shipping-charges .pw-ledger__value","has_custom_selector":true},"cart_p_shipping_div_extension":null,"cart_p_shipping_div_six":null,"cart_p_shipping_div_server":null,"cart_total_div":{"selector":".estimated-total-holder .estimated-total-value","has_custom_selector":true},"cart_total_div_mobile":{"selector":".estimated-total span:contains('$')","has_custom_selector":true},"cart_total_div_extension":null,"cart_total_div_six":null,"cart_total_div_server":null,"cart_custom_id":null,"cart_custom_id_mobile":null,"cart_custom_id_extension":null,"cart_custom_id_six":null,"cart_custom_id_server":null,"cart_opts_retrieval_js":null,"cart_opts_retrieval_js_mobile":null,"cart_opts_retrieval_js_extension":null,"cart_opts_retrieval_js_six":null,"cart_opts_retrieval_js_server":null,"address_check_noauth":null,"address_check_noauth_mobile":null,"address_check_noauth_extension":null,"address_check_noauth_six":null,"address_check_noauth_server":null,"final_price_div_noauth":null,"final_price_div_noauth_mobile":null,"final_price_div_noauth_extension":null,"final_price_div_noauth_six":null,"final_price_div_noauth_server":null,"shipping_price_div_noauth":null,"shipping_price_div_noauth_mobile":null,"shipping_price_div_noauth_extension":null,"shipping_price_div_noauth_six":null,"shipping_price_div_noauth_server":null,"handling_price_div_noauth":null,"handling_price_div_noauth_mobile":null,"handling_price_div_noauth_extension":null,"handling_price_div_noauth_six":null,"handling_price_div_noauth_server":null,"checkout_recording_noauth":null,"checkout_recording_noauth_mobile":null,"checkout_recording_noauth_extension":null,"checkout_recording_noauth_six":null,"checkout_recording_noauth_server":null,"sales_tax_div_noauth":null,"sales_tax_div_noauth_mobile":null,"sales_tax_div_noauth_extension":null,"sales_tax_div_noauth_six":null,"sales_tax_div_noauth_server":null,"shipping_estimate_div_noauth":null,"shipping_estimate_div_noauth_mobile":null,"shipping_estimate_div_noauth_extension":null,"shipping_estimate_div_noauth_six":null,"shipping_estimate_div_noauth_server":null,"checkout_information_noauth":null,"checkout_information_noauth_mobile":null,"checkout_information_noauth_extension":null,"checkout_information_noauth_six":null,"checkout_information_noauth_server":null,"order_id_div_noauth":null,"order_id_div_noauth_mobile":null,"order_id_div_noauth_extension":null,"order_id_div_noauth_six":null,"order_id_div_noauth_server":null,"coupon_value_div_noauth":null,"coupon_value_div_noauth_mobile":null,"coupon_value_div_noauth_extension":null,"coupon_value_div_noauth_six":null,"coupon_value_div_noauth_server":null,"gift_card_value_div_noauth":null,"gift_card_value_div_noauth_mobile":null,"gift_card_value_div_noauth_extension":null,"gift_card_value_div_noauth_six":null,"gift_card_value_div_noauth_server":null,"shipping_address_div_noauth":null,"shipping_address_div_noauth_mobile":null,"shipping_address_div_noauth_extension":null,"shipping_address_div_noauth_six":null,"shipping_address_div_noauth_server":null,"has_issues":false,"changelog":"RO-36575: Updated product fetcher to get MPN and SKU","parent_id":{"$oid":"67239703a71700006d2fc546"},"created_at":{"$date":"2024-11-06T17:09:59.229Z"},"updated_at":{"$date":"2024-11-25T17:18:12.217Z"},"worker_honey_user_id":"474033623442298900","activated_at":{"$date":"2024-11-25T17:18:17.401Z"},"activated_by_honey_user_id":"474033623442298900","assignee_id":null}