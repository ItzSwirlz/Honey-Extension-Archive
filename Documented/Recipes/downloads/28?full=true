{"_id":{"$oid":"670fe6a916331bddadadc650"},"scope":"complete","country":"us","engine":"chrome_vim","product_page_requires_account":"no","shipping_options_div_type":"none","end_delay":4000,"status":"live","old_status":"pending","website_url":"bestbuy.com","website_name":"BestBuy","honey_id":"28","site_id":{"$oid":"529327e055a0f957d5000002"},"partial_urls":["bestbuy.com"],"login_recording":null,"signup_recording":null,"title_div":{"selector":"div#postcard h1, h1.productName, div.shop-product-title h1","has_custom_selector":true},"brand_div":{"selector":"div#ttBrand","has_custom_selector":true},"price_div":{"selector":"//div[@id='ttPrice'] | //div[@id='postcard']//div[contains(@class,'pb-purchase-price')] | //div[@id='postcard']//div[contains(@class,'item-price') and not(span[contains(@class,'strikethrough')])] | //section[contains(@class,'pdpTop')]//div[contains(concat(' ',@class,' '),' price ')] | //div[@id='postcard']//div[contains(@class,'priceView-purchase-price')]/span | //div[@id='postcard']//div[contains(@class,'priceView-customer-price')]/span[@aria-hidden='true'] | //div[contains(@class,'priceView-layout-large')]//div[contains(@class,'priceView-customer-price')]","has_custom_selector":true},"returns_div":null,"image_div":{"selector":"img#ttImage, img.primary-image","has_custom_selector":true},"alt_images_div":{"selector":"img.ttAltImage, li.thumbnail-wrapper img","has_custom_selector":true},"custom_id_div":{"selector":"#ttProductCustomID","has_custom_selector":true},"extra_info_div":{"selector":"//div[@id='ttExtraInfoHack'] | //li[contains(@class,'release-date')] | //div[contains(@class,'contract-type')]//strong[contains(text(),'Unactivated device')] | //div[contains(@class,'refurbished-puck')]","has_custom_selector":true},"weight_div":{"selector":"div#ttWeightDiv","has_custom_selector":true,"weight_unit":"lbs"},"product_container_div":null,"add_to_cart_recording":[{"type":1010,"info":{"selector":"//div[contains(@class,'variation-wrapper')][1][.//ul//li//a[contains(@data-track,'olor')]]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","get":"return _ttAttributeGet(1);","set":"return _ttAttributeSet(1, fillValue);","set_during_retrieve_opts":"true","options":null,"has_custom_selector":true,"only_on_checkout_type":"","comment":"","checked":null,"reset_during_retrieve_opts":"no","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"color","field_type":""},{"type":1010,"info":{"selector":"//div[contains(@class,'variation-wrapper')][1][not(.//ul//li//a[contains(@data-track,'olor')])]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","get":"return _ttAttributeGet(1);","set":"return _ttAttributeSet(1, fillValue);","set_during_retrieve_opts":"no","options":null,"has_custom_selector":true,"only_on_checkout_type":"","comment":"","checked":null,"reset_during_retrieve_opts":"no","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 1","field_type":""},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// re-definig stuff, due to redirect from previous attribute [update Serban 2017-07-07]\r\n\r\n// function to generate the value of an option\r\n_ttGetOptValue = function(el) {\r\n  var elValue = el.textContent.trim();\r\n  // using \"title\" if \"textContent\" is empty - e.g. non-color attribute with swatches/logos [Serban 2017-07-07]\r\n  // -- http://www.bestbuy.com/site/samsung-galaxy-s8-64gb-midnight-black-sprint/5775000.p\r\n  if (!elValue.length) {\r\n    elValue = el.title.trim();\r\n  }\r\n  //var attrLabel = jQuery(el).closest(\"div[data-variation-type]\").attr('data-variation-type').trim();\r\n  var attrLabel = '';\r\n  if (el.hasAttribute('data-track')) {\r\n    // fixed extraction of attribute-label for both versions [Serban 2018-01-26]\r\n    var labelV1Matches = el.getAttribute('data-track').match(/\\[context:variationType=([^\\]]+)\\]/);\r\n    if (labelV1Matches && labelV1Matches[1]) {\r\n      // v1 = \".variation-wrapper\" => extracting e.g. \"Color\" from \"[context:variationType=Color]\"\r\n      attrLabel = labelV1Matches[1];\r\n    }\r\n    else {\r\n      // v2 = \".shop-variation-wrapper\" => extracting e.g. \"Color\" from \"Color:Space Gray\"\r\n      attrLabel = el.getAttribute('data-track').split(':')[0].trim();\r\n    }\r\n  }\r\n  else {\r\n    __utils__.echo('--- WARNING: attribute label not detected for elValue = ' + elValue);\r\n  }\r\n  if (attrLabel.indexOf('olor') < 0) {\r\n    // generic attribute => also adding attribute label\r\n    var elValue = attrLabel + ': ' + elValue;\r\n  }\r\n  return elValue;\r\n};\r\n\r\n// SET function for color / generic attributes\r\n// -- this version of the function is simplified for Purchase / Pickup\r\n_ttAttributeSet = function(idx, fillValue) {\r\n  __utils__.echo('--- option ' + idx + ' fillValue = ' + fillValue);\r\n  var changed = false;\r\n  var opts = jQuery(\"div[class*='variation-wrapper']:eq(\" + (idx-1) + \") ul li:not(.disabled) a[href]\");\r\n  for (var iPos=0; iPos<opts.length; iPos++) {\r\n    var el = opts[iPos];\r\n    var elValue = _ttGetOptValue(el);\r\n    __utils__.echo('---> el value = ' + elValue );\r\n    if (elValue == fillValue) {\r\n      // forcing redirect to href (non-\"#\") during Purchase / Pickup, to trigger the selection\r\n      if (el.href.length > 1) {\r\n        location.href = el.href;\r\n        changed = true;\r\n      }\r\n      else {\r\n        //__utils__.mouseEvent('click', el); // WARNING! this fallback method does NOT trigger the selection ok [2016-07-25]\r\n        __utils__.echo('--- ERROR! - could not force redirect to href, to trigger the selection');\r\n        // we return \"false\" in this case, because otherwise the product may be added to cart with the wrong options!\r\n      }\r\n    }\r\n  }\r\n  return changed;\r\n};","timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1010,"info":{"selector":"//div[contains(@class,'variation-wrapper')][2][.//ul//li//a[@data-track]]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","get":"return _ttAttributeGet(2);","set":"return _ttAttributeSet(2, fillValue);","set_during_retrieve_opts":"no","only_on_checkout_type":"","options":null,"comment":"","has_custom_selector":true,"checked":null,"reset_during_retrieve_opts":"no","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 2","field_type":""},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// re-definig stuff, due to redirect from previous attribute [update Serban 2017-07-07]\r\n\r\n// function to generate the value of an option\r\n_ttGetOptValue = function(el) {\r\n  var elValue = el.textContent.trim();\r\n  // using \"title\" if \"textContent\" is empty - e.g. non-color attribute with swatches/logos [Serban 2017-07-07]\r\n  // -- http://www.bestbuy.com/site/samsung-galaxy-s8-64gb-midnight-black-sprint/5775000.p\r\n  if (!elValue.length) {\r\n    elValue = el.title.trim();\r\n  }\r\n  //var attrLabel = jQuery(el).closest(\"div[data-variation-type]\").attr('data-variation-type').trim();\r\n  var attrLabel = '';\r\n  if (el.hasAttribute('data-track')) {\r\n    // fixed extraction of attribute-label for both versions [Serban 2018-01-26]\r\n    var labelV1Matches = el.getAttribute('data-track').match(/\\[context:variationType=([^\\]]+)\\]/);\r\n    if (labelV1Matches && labelV1Matches[1]) {\r\n      // v1 = \".variation-wrapper\" => extracting e.g. \"Color\" from \"[context:variationType=Color]\"\r\n      attrLabel = labelV1Matches[1];\r\n    }\r\n    else {\r\n      // v2 = \".shop-variation-wrapper\" => extracting e.g. \"Color\" from \"Color:Space Gray\"\r\n      attrLabel = el.getAttribute('data-track').split(':')[0].trim();\r\n    }\r\n  }\r\n  else {\r\n    __utils__.echo('--- WARNING: attribute label not detected for elValue = ' + elValue);\r\n  }\r\n  if (attrLabel.indexOf('olor') < 0) {\r\n    // generic attribute => also adding attribute label\r\n    var elValue = attrLabel + ': ' + elValue;\r\n  }\r\n  return elValue;\r\n};\r\n\r\n// SET function for color / generic attributes\r\n// -- this version of the function is simplified for Purchase / Pickup\r\n_ttAttributeSet = function(idx, fillValue) {\r\n  __utils__.echo('--- option ' + idx + ' fillValue = ' + fillValue);\r\n  var changed = false;\r\n  var opts = jQuery(\"div[class*='variation-wrapper']:eq(\" + (idx-1) + \") ul li:not(.disabled) a[href]\");\r\n  for (var iPos=0; iPos<opts.length; iPos++) {\r\n    var el = opts[iPos];\r\n    var elValue = _ttGetOptValue(el);\r\n    __utils__.echo('---> el value = ' + elValue );\r\n    if (elValue == fillValue) {\r\n      // forcing redirect to href (non-\"#\") during Purchase / Pickup, to trigger the selection\r\n      if (el.href.length > 1) {\r\n        location.href = el.href;\r\n        changed = true;\r\n      }\r\n      else {\r\n        //__utils__.mouseEvent('click', el); // WARNING! this fallback method does NOT trigger the selection ok [2016-07-25]\r\n        __utils__.echo('--- ERROR! - could not force redirect to href, to trigger the selection');\r\n        // we return \"false\" in this case, because otherwise the product may be added to cart with the wrong options!\r\n      }\r\n    }\r\n  }\r\n  return changed;\r\n};","timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1010,"info":{"selector":"//div[contains(@class,'variation-wrapper')][3][.//ul//li//a[@data-track]]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"return _ttAttributeGet(3);","set":"return _ttAttributeSet(3, fillValue);","set_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"reset_during_retrieve_opts":"no","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 3","field_type":""},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// re-definig stuff, due to redirect from previous attribute [update Serban 2017-07-07]\r\n\r\n// function to generate the value of an option\r\n_ttGetOptValue = function(el) {\r\n  var elValue = el.textContent.trim();\r\n  // using \"title\" if \"textContent\" is empty - e.g. non-color attribute with swatches/logos [Serban 2017-07-07]\r\n  // -- http://www.bestbuy.com/site/samsung-galaxy-s8-64gb-midnight-black-sprint/5775000.p\r\n  if (!elValue.length) {\r\n    elValue = el.title.trim();\r\n  }\r\n  //var attrLabel = jQuery(el).closest(\"div[data-variation-type]\").attr('data-variation-type').trim();\r\n  var attrLabel = '';\r\n  if (el.hasAttribute('data-track')) {\r\n    // fixed extraction of attribute-label for both versions [Serban 2018-01-26]\r\n    var labelV1Matches = el.getAttribute('data-track').match(/\\[context:variationType=([^\\]]+)\\]/);\r\n    if (labelV1Matches && labelV1Matches[1]) {\r\n      // v1 = \".variation-wrapper\" => extracting e.g. \"Color\" from \"[context:variationType=Color]\"\r\n      attrLabel = labelV1Matches[1];\r\n    }\r\n    else {\r\n      // v2 = \".shop-variation-wrapper\" => extracting e.g. \"Color\" from \"Color:Space Gray\"\r\n      attrLabel = el.getAttribute('data-track').split(':')[0].trim();\r\n    }\r\n  }\r\n  else {\r\n    __utils__.echo('--- WARNING: attribute label not detected for elValue = ' + elValue);\r\n  }\r\n  if (attrLabel.indexOf('olor') < 0) {\r\n    // generic attribute => also adding attribute label\r\n    var elValue = attrLabel + ': ' + elValue;\r\n  }\r\n  return elValue;\r\n};\r\n\r\n// SET function for color / generic attributes\r\n// -- this version of the function is simplified for Purchase / Pickup\r\n_ttAttributeSet = function(idx, fillValue) {\r\n  __utils__.echo('--- option ' + idx + ' fillValue = ' + fillValue);\r\n  var changed = false;\r\n  var opts = jQuery(\"div[class*='variation-wrapper']:eq(\" + (idx-1) + \") ul li:not(.disabled) a[href]\");\r\n  for (var iPos=0; iPos<opts.length; iPos++) {\r\n    var el = opts[iPos];\r\n    var elValue = _ttGetOptValue(el);\r\n    __utils__.echo('---> el value = ' + elValue );\r\n    if (elValue == fillValue) {\r\n      // forcing redirect to href (non-\"#\") during Purchase / Pickup, to trigger the selection\r\n      if (el.href.length > 1) {\r\n        location.href = el.href;\r\n        changed = true;\r\n      }\r\n      else {\r\n        //__utils__.mouseEvent('click', el); // WARNING! this fallback method does NOT trigger the selection ok [2016-07-25]\r\n        __utils__.echo('--- ERROR! - could not force redirect to href, to trigger the selection');\r\n        // we return \"false\" in this case, because otherwise the product may be added to cart with the wrong options!\r\n      }\r\n    }\r\n  }\r\n  return changed;\r\n};","timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1010,"info":{"selector":"//div[contains(@class,'variation-wrapper')][4][.//ul//li//a[@data-track]]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"return _ttAttributeGet(4);","set":"return _ttAttributeSet(4, fillValue);","set_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"reset_during_retrieve_opts":"no","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 4","field_type":""},{"type":20,"info":{"selector":"//button[@data-track='adprice-unactivated' or @data-plan-id='retail-price' or contains(@data-plan-id,'FULL_SRP')][not(contains(.,'Activate Today'))]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"Selecting \"unactivated\" / \"one-time payment\" pricing option (i.e. \"Retail price\", not monthly price / price with contract), AFTER setting all attributes. Do NOT match \"Activate Today\" (because that requires a carrier account), only e.g. \"Activate Later\" - e.g. https://www.bestbuy.com/site/apple-iphone-6s-32gb-space-gray-at-t/5580377.p","options":null,"checked":null,"has_custom_selector":true}},{"type":20,"info":{"selector":"a.ff-change-link","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"localCheckout","options":null,"comment":"Triggering stores list redirect [on OLD flow] / popup [on NEW flow]","has_custom_selector":true,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"1000","js_code":null,"timeout":"","only_on_checkout_type":"localCheckout","comment":"[new] Sleep needed in new flow","options":null,"checked":null}},{"type":20,"info":{"selector":"a.change-location","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"localCheckout","comment":"[new] Clicking on zip in the popup to change it - new flow only","options":null,"checked":null}},{"type":2,"info":{"selector":"input#searchZipTextBox, input#location","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","set_during_retrieve_opts":"no","only_on_checkout_type":"localCheckout","options":null,"comment":"[old+new]","has_custom_selector":true,"checked":null,"reset_during_retrieve_opts":"no"},"field_key":"shipping_zip","field_type":""},{"type":20,"info":{"selector":"div.location-search input[type='submit'], button.apply-location","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"localCheckout","options":null,"comment":"[old+new]","has_custom_selector":true,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"1000","js_code":null,"timeout":"","only_on_checkout_type":"localCheckout","options":null,"comment":"[old+new]","checked":null}},{"type":20,"info":{"selector":"//div[contains(@class,'store-detail')]//a[contains(text(),'Check other stores')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"localCheckout","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"ul.store-container li.sa-store-mini","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"localCheckout","options":null,"comment":"[new] Selecting store from list - new flow only","has_custom_selector":true,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// echoing warnings to test-log, if \"Close\" button found in the store-selection window (instead of \"Add to Cart\" button)\r\nif (jQuery(\"button.modal-select-store:contains('Close')\").length) {\r\n  __utils__.echo(\"--- [TWOTAP] WARNING! - Add-to-cart button not found in the store-selection window!\");\r\n  __utils__.echo(\"--- [TWOTAP] WARNING! - This product is not supported for local-pickup, because it may end up with the wrong pickup-store selected during Checkout!\");\r\n}","timeout":"","only_on_checkout_type":"localCheckout","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//div[contains(@class,'ca-locntable-btncol-description')]//img[contains(@class,'bdt-addToCart') and contains(@class,'buy')] | //button[contains(@class,'modal-select-store') and contains(text(),'Add to Cart')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","has_custom_selector":true,"only_on_checkout_type":"localCheckout","comment":"[old+new] Clicking \"Add to Cart\" in the stores list. WARNING! - this selector must NOT match the \"Close\" button, because those products may end up with the wrong pickup-store selected during Checkout!","options":null,"checked":null}},{"type":20,"info":{"href":"http://www.bestbuy.com/site/sony-alpha-a6000-mirrorless-camera-with-16-50mm-retractable-lens-black/4660008.p?id=1219100586250&skuId=4660008#","tagName":"A","name":"","type":"","id":"","title":"","options":null,"selector":"//div[@id='ttFakeAddButton'] | //div[@id='pdp-add-to-cart-button']//div[contains(concat(' ',@class,' '),' add-to-cart-button ')]//button[contains(concat(' ',@class,' '),' btn ') and not(@disabled) and not(contains(@class,'button-state-check-stores'))] | //*[contains(concat(' ',@class,' '),' pdpWrapper ')]//*[contains(concat(' ',@class,' '),' mini-cart-add-to-cart ')]//*[contains(concat(' ',@class,' '),' cart-button ')] | //div[contains(@class,'fulfillment-add-to-cart-button') and not(./ancestor::div[contains(@class,'shop-complete-your-purchase')])]//button[contains(@class,'add-to-cart-button')] | //div[contains(@class,'shop-add-to-cart-button')]//button[contains(@class,'add-to-cart-button')]","is_optional":"no","frame":"","timeout":"","has_custom_selector":true,"only_on_checkout_type":"authAndNoauthCheckout","comment":"This is the main \"Add to Cart\" button (clicked during Auth/Nonauth). The \"fake\" selector is only injected when reading the product.","checked":null},"x":1057,"y":231,"text":"Add to Cart"},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"3000","js_code":null,"timeout":"","only_on_checkout_type":"authAndNoauthCheckout","comment":"This is needed for buying an \"unactivated device\"!","options":null,"checked":null}},{"type":20,"info":{"selector":"//label[@for='replaceId' and contains(.,'unactivated device')]","frame":"dynamic","is_optional":"yes","interval":"","js_code":null,"timeout":"3000","only_on_checkout_type":"authAndNoauthCheckout","comment":"Hardcoding selection: \"Buy an unactivated device\"","options":null,"checked":null}},{"type":20,"info":{"selector":"input[value='Add To Cart']","frame":"dynamic","is_optional":"yes","interval":"","js_code":null,"timeout":"3000","only_on_checkout_type":"authAndNoauthCheckout","comment":"Adding to cart the \"unactivated device\"","options":null,"checked":null,"has_custom_selector":true}},{"type":20,"info":{"selector":"span.no-thanks-go-to-cart","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"3000","options":null,"only_on_checkout_type":"","comment":"","checked":null}},{"type":20,"info":{"selector":"a.buy-unactivated","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"3000","has_custom_selector":true,"only_on_checkout_type":"","comment":"Clicking on \"Buy this device without a plan\" on e.g. phones with contracts","options":null,"checked":null}},{"type":20,"info":{"selector":".go-to-cart","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// injecting cart-count from store-defined object [Serban 2017-04-18]\r\n// -- because the minicart-count automatically disappears in the Cart page (as of ~April 2017)\r\nvar cartLink = document.querySelector(\"a[title='Cart']\");\r\nif (cartLink) {\r\n  __utils__.echo('--- cart-link found');\r\n  if (cartLink.querySelector(\"span.count\")) {\r\n    __utils__.echo('--- cart-count found => NOT injecting');\r\n  }\r\n  else {\r\n    __utils__.echo('--- cart-count NOT found => injecting');\r\n    if (typeof cartOrderInit == 'object' && cartOrderInit['cartItemCount']) {\r\n      __utils__.echo('--- cart-count in store-defined object = ' + cartOrderInit['cartItemCount']);\r\n      cartLink.innerHTML += '<span class=\"count\">' + cartOrderInit['cartItemCount'] + '</span>';\r\n    }\r\n    else {\r\n      __utils__.echo('--- WARNING! - cart-count NOT found in store-defined object');\r\n    }\r\n  }\r\n}\r\nelse {\r\n  __utils__.echo('--- WARNING! - cart-link NOT found');\r\n}","timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}}],"add_to_cart_changes_div":{"selector":"a[title='Cart'] span.count, div.mini-cart-count","has_custom_selector":true},"remove_from_cart_recording":null,"order_error_divs":[{"selector":"div.client-error-msg","overwrite":"text"},{"selector":"span.error","overwrite":"text"},{"selector":"div.global-error-msg-text","overwrite":"text"},{"selector":".alert-warning .details","overwrite":"text"},{"selector":".order-errors","overwrite":"text"},{"selector":".fulfillment div.section-errors p","overwrite":"text"},{"selector":".has-error span.help-block","overwrite":"text"},{"selector":"div.has-error span#phone","overwrite":"text"}],"notes":"*** new attribute scenarios 2018-11-06\r\n* v1 = swatches\r\n- v1A = swatch images\r\n\thttps://www.bestbuy.com/site/apple-iphone-8-64gb-space-gray-verizon/6009931.p?skuId=6009931\r\n- v1B = swatch divs with background-color (no image)\r\n\thttps://www.bestbuy.com/site/skullcandy-inkd-2-wired-in-ear-headphones-gray-mint/5310100.p?skuId=5310100\r\n* v2 = dropdown (options appear in the HTML only after clicking on the attribute)\r\n- v2A = dropdown with texts\r\n\thttps://www.bestbuy.com/site/apple-macbook-pro-13-display-with-touch-bar-intel-core-i5-16gb-memory-512gb-ssd-latest-model-silver/6289619.p?skuId=6289619\r\n- v2B = dropdown with images\r\n\thttps://www.bestbuy.com/site/apple-iphone-8-64gb-space-gray-verizon/6009931.p?skuId=6009931\r\n=> COMPLETELY DISABLED ATTRIBUTES in prod-opts-JS (via \"_ttCompletelyDisabledAttributes\")\r\n- because dropdown-attributes can no longer be parsed in Ajax responses (options in dropdowns don't exist in the HTML until that attribute is clicked, but we can't \"click\" in an Ajax response)\r\n\r\n* price scenarios\r\n- normal price\r\n\thttp://www.bestbuy.com/site/apple-macbook-pro-13-display-intel-core-i5-8-gb-memory-128gb-flash-storage-latest-model-space-gray/5721723.p\r\n- sale price\r\n\thttp://www.bestbuy.com/site/samsung-22-5-cu-ft-4-door-flex-french-door-refrigerator-stainless-steel/2949034.p\r\n\thttp://www.bestbuy.com/site/apple-macbook-air-13-3-display-intel-core-i5-8gb-memory-128gb-flash-storage-silver/6443034.p\r\n- normal price + retail price (in pricing options)\r\n\thttp://www.bestbuy.com/site/apple-iphone-7-plus-32gb-gold-verizon/5581613.p\r\n- sale price + retail price (in pricing options)\r\n\thttp://www.bestbuy.com/site/samsung-galaxy-s8-64gb-midnight-black-sprint/5775000.p\r\n\thttp://www.bestbuy.com/site/motorola-moto-z-force-droid-4g-lte-with-32gb-memory-cell-phone-black-lunar-grey-verizon-wireless/5387104.p\r\n- see price in cart (whole product / some options)\r\n\t- whole product: http://www.bestbuy.com/site/kitchenaid-cloth-cover-for-kitchenaid-stand-mixers-khaki-bone-black/4737840.p\r\n\t- pre-selected color: http://www.bestbuy.com/site/kitchenaid-artisan-designer-series-tilt-head-stand-mixer-sea-glass/4737855.p\r\n\t- some colors: http://www.bestbuy.com/site/kitchenaid-artisan-series-tilt-head-stand-mixer-white/5224884.p\r\n\r\n* 4 attributes\r\nhttp://www.bestbuy.com/site/apple-macbook-pro-with-retina-display-latest-model-13-3-display-8gb-memory-512gb-flash-storage-silver/4707000.p\r\nhttp://www.bestbuy.com/site/apple-macbook-pro-15-4-display-intel-core-i7-16gb-memory-512gb-flash-storage-silver/4357800.p\r\nhttp://www.bestbuy.com/site/apple-macbook-pro-15-4-display-intel-core-i7-16gb-memory-1tb-flash-storage-silver/4357900.p\t\t\t\t\t- attr3 opts change w/ attr2 (ok)\r\n\thttp://www.bestbuy.com/site/apple-macbook-pro-15-4-display-intel-core-i7-16gb-memory-512gb-flash-storage-silver/8532548.p\t\t\t\t- attr2 opts change w/ attr3 (!!!)\r\nhttp://www.bestbuy.com/site/apple-macbook-latest-model-12-display-intel-core-m3-8gb-memory-256gb-flash-storage-silver/5229700.p\t\t\t\t- some attr1 opts disabled on load\r\nhttp://www.bestbuy.com/site/apple-macbook-12-display-intel-core-m-8gb-memory-512gb-flash-storage-gold/5238017.p\t\t\t\t\t\t- attr2 opts change w/ attr1 (ok)\r\n\thttp://www.bestbuy.com/site/apple-macbook-latest-model-12-display-intel-core-m3-8gb-memory-256gb-flash-storage-rose-gold/6446013.p\t\t- attr1 opts change w/ attr2 (!!!)\r\nhttp://www.bestbuy.com/site/apple-macbook-pro-with-retina-display-(latest-model)-13.3%22-display-16gb-memory-1tb-flash-storage-silver/4707100.p\t\t- 1 option each (others disabled)\r\nhttp://www.bestbuy.com/site/apple-macbook-pro-intel-core-i5-13-3-display-4gb-memory-500gb-hard-drive-silver/5430505.p\t\t\t\t\t- 1 attr with ALL opts disabled !!!\r\n\r\n* 3 attributes\r\nhttp://www.bestbuy.com/site/apple-macbook-air-latest-model-13-3-display-intel-core-i5-8gb-memory-256gb-flash-storage-silver/6444006.p\t- some \"higher\" opts enabled by \"lower\" opts\r\nhttp://www.bestbuy.com/site/apple-macbook-air-latest-model-11-6-display-intel-core-i5-4gb-memory-128gb-flash-storage-silver/3827189.p\t- 1 option each (others disabled)\r\n\r\n* color, option\r\nhttp://www.bestbuy.com/site/fitbit-charge-hr-activity-tracker-heart-rate-large-black/8681515.p\r\nhttp://www.bestbuy.com/site/samsung-galaxy-s6-with-32gb-memory-cell-phone-black-sprint/4372036.p\t\t\t- options change w/ color, extra-info v2 (unactivated device)\r\nhttp://www.bestbuy.com/site/apple-iphone-6s-64gb-space-gray-at-t/4442300.p\t\t\t\t\t\t- options change w/ color, extra-info v2 (unactivated device)\r\nhttp://www.bestbuy.com/site/apple-iphone-6s-16gb-gold-sprint/4447600.p\t\t\t\t\t\t\t- options change w/ color, extra-info v2 (unactivated device)\r\nhttp://www.bestbuy.com/site/sandisk-ultra-dual-64gb-micro-usb-usb-3-0-type-a-flash-drive-black/7016092.p\t\t- options change w/ color\r\nhttp://www.bestbuy.com/site/samsung-galaxy-note5-4g-lte-with-64gb-memory-cell-phone-black-sapphire-sprint/4311900.p\r\n\r\n* color\r\nhttp://www.bestbuy.com/site/kitchenaid-artisan-series-tilt-head-stand-mixer-white/5224884.p\t\t\t\t* colors++, some colors w/ \"see price in cart\" !!!\r\nhttp://www.bestbuy.com/site/parrot-bebop-drone-red/9882135.p\r\nhttp://www.bestbuy.com/site/insignia-3-3-5mm-audio-cable-purple/4289983.p\r\nhttp://www.bestbuy.com/site/beats-by-dr-dre-powerbeats2-wireless-earbud-headphones-white/5565039.p\r\nhttp://www.bestbuy.com/site/samsung-galaxy-s7-edge-32gb-black-onyx-verizon-wireless/4901024.p\t\t\t- some colors oos [was: no attr, pre-order, extra-info v1 (date) + v2 (unactivated device)]\r\nhttp://www.bestbuy.com/site/kitchenaid-artisan-series-tilt-head-stand-mixer-almond-cream/6120694.p\t\t\t- pre-selected color oos\r\nhttp://www.bestbuy.com/site/akg-on-ear-headphones-red/4919202.p\t\t\t\t\t\t\t- all colors oos\r\nhttp://www.bestbuy.com/site/klipsch-reference-on-ear-headphones-black/4431023.p\t\t\t\t\t- 1 color oos\r\n\r\n* option\r\nhttp://www.bestbuy.com/site/apple-21-5-imac-intel-core-i5-1-6ghz-8gb-memory-1tb-hard-drive-silver/3093014.p\r\nhttp://www.bestbuy.com/site/hp-envy-x360-2-in-1-15-6-touch-screen-laptop-intel-core-i5-8gb-memory-1tb-hard-drive-natural-silver/4334402.p\r\nhttp://www.bestbuy.com/site/fitbit-flex-activity-and-sleep-wristband-pack-large-blue-teal-tangerine/8291106.p\r\n\r\n* no attribute\r\nhttp://www.bestbuy.com/site/simpli-home-acadian-collection-coffee-table-brown/1860081.p\r\nhttp://www.bestbuy.com/site/bello-triple-play-tv-stand-for-most-flat-panel-tvs-up-to-55-espresso/5666704.p\r\nhttp://www.bestbuy.com/site/novatel-verizon-jetpack-mifi-5510l-4g-lte-mobile-hotspot-black-red-verizon-wireless/6963082.p\t- extra-info v2 (unactivated device)\r\nhttp://www.bestbuy.com/site/apple-refurbished-iphone-6s-plus-16gb-rose-gold-at-t/4446500.p\t\t\t\t- extra-info v3 (refurbished)\r\nhttp://www.bestbuy.com/site/-/3642002.p\t\t\t\t\t\t\t\t\t\t\t- product image v2 (div.gallery-item.image img)\r\nhttp://www.bestbuy.com/site/you-only-live-twice-blu-ray-digital-hd-copy-steelbook-only--best-buy/4255506.p\t\t- product image v2\r\nhttp://www.bestbuy.com/site/motorola-moto-z-force-droid-4g-lte-with-32gb-memory-cell-phone-lunar-gray-verizon-wireless/5387104.p\t\t- pre-order\r\n\r\n* products that redirect to pacificsales.com\r\nhttp://www.bestbuy.com/site/viking-professional-5-series-30-convertible-range-hood-graphite-gray/8940742.p?skuId=8940742\r\n\r\n* pacificsales.com products\r\nhttps://www.pacificsales.com/pdp/Whirlpool-4-8-Cu-Ft-Self-Cleaning-Freestanding-Electric-Range-Black/6898303\t\t- sale price\r\nhttps://www.pacificsales.com/pdp/Frigidaire-Gallery-7-2-Cu-Ft-Self-Cleaning-Freestanding-Double-Oven-Electric-Convection-Range-Stainless-Steel/4206005\t\t- normal price\r\nhttps://www.pacificsales.com/pdp/Viking-Professional-7-Series-6-3-Cu-Ft-Self-Cleaning-Freestanding-Double-Oven-Dual-Fuel-Convection-Range-White/8934651\t- normal price\r\nhttps://www.pacificsales.com/pdp/LG-24-1-Cu-Ft-French-Door-Refrigerator-Black-stainless-steel/5005527\t\t\t- sale price, videos in thumbs\r\n\r\n[NOT blocking anymore] * monthly payment / add to package => block\r\nhttp://www.bestbuy.com/site/apple-iphone-6-16gb-space-gray-verizon-wireless/7619002.p\r\n\r\n* oos\r\nhttp://www.bestbuy.com/site/4k-ultra-hd-ultraviolet-digital-copy/5122444.p\t\t\t\t\t\t\t- \"coming soon\"\r\nhttp://www.bestbuy.com/site/jbl-on-ear-bluetooth-headphones-black/9518137.p\t\t\t\t\t\t- \"check stores\"\r\nhttp://www.bestbuy.com/site/panasonic-1-2-cu-ft-mid-size-microwave-stainless-steel/3162054.p\r\n\r\n*digital\r\nhttp://www.bestbuy.com/site/pokemon-sun-digital-nintendo-3ds-digital-download/1000007391.p?id=1000007390&amp;skuId=1000007391","sku_identifier":null,"mpn_identifier":null,"gtin_identifier":null,"final_price_div_auth":null,"shipping_price_div_auth":null,"handling_price_div_auth":null,"checkout_recording_auth":null,"currency_format":"$AMOUNT","recording_start_urls":{"addToCart":"http://www.bestbuy.com/site/sony-alpha-a6000-mirrorless-camera-with-16-50mm-retractable-lens-black/4660008.p?id=1219100586250&skuId=4660008","noauthCheckout":"http://www.bestbuy.com/cart","localCheckout":"http://www.bestbuy.com/cart","coupon":"http://www.excesshype.com/the-brick-city-jacket-in-woodland-camo.html","giftCard":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17009&type=page&fastTrack=true#/payment?_k=eq9cbi"},"recording_end_urls":{"addToCart":"http://www.bestbuy.com/site/sony-alpha-a6000-mirrorless-camera-with-16-50mm-retractable-lens-black/4660008.p?id=1219100586250&skuId=4660008","noauthCheckout":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17014&type=page","localCheckout":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17013&type=page","coupon":"http://www.excesshype.com/the-brick-city-jacket-in-woodland-camo.html","giftCard":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17009&type=page&fastTrack=true#/payment?_k=eq9cbi"},"category_wrapper_div":{"selector":".c-breadcrumbs li:not(:first-child) a","has_custom_selector":true},"address_check_auth":null,"final_sale_div":null,"original_price_div":{"selector":"div#postcard div.pb-regular-price, div#postcard div.item-price span.strikethrough, section.pdpTop span.regular-price, div#postcard div.pricing-price__regular-price[aria-hidden='true'], div.priceView-layout-large div.pricing-price__regular-price[aria-hidden='true']","has_custom_selector":true},"discounted_price_div":{"selector":"//div[@id='ttPrice'] | //div[@id='postcard']//div[contains(@class,'pb-purchase-price')] | //div[@id='postcard']//div[contains(@class,'item-price') and not(span[contains(@class,'strikethrough')])] | //section[contains(@class,'pdpTop')]//div[contains(concat(' ',@class,' '),' price ')] | //div[@id='postcard']//div[contains(@class,'priceView-purchase-price')]/span | //div[@id='postcard']//div[contains(@class,'priceView-customer-price')]/span[@aria-hidden='true'] | //div[contains(@class,'priceView-layout-large')]//div[contains(@class,'priceView-customer-price')]","has_custom_selector":true},"sales_tax_div_auth":null,"shipping_estimate_div_auth":null,"pickup_div":{"selector":"a.ff-change-link","has_custom_selector":true},"non_purchasable_div":null,"p_free_shipping_div":{"selector":"div#phoenix-availability div.fv-header--free","has_custom_selector":true},"errors_meta":[{"error":"Unfortunately, we were unable to process your credit card. Please try again or use a different card to continue with your order. For questions regarding your credit card, please contact your bank","type":"bad_payment","action":"ignore"},{"error":"Oops, that's not a valid credit card number. Please double-check it and try again","type":"bad_payment","action":"ignore"}],"data_converters":{"shipping_address":[{"type":"simple","converter_id":"no_conversion"}],"shipping_address_2":[{"type":"simple","converter_id":"no_conversion"}],"shipping_state":[{"type":"simple","converter_id":"51ebf9e755a0f90acc00000c"}],"expiry_date_month":[{"type":"simple","converter_id":"55657fd469702d3872070000"}],"expiry_date_year":[{"type":"simple","converter_id":"51ebf8dc55a0f90acc00000a"}],"billing_address":[{"type":"simple","converter_id":"no_conversion"}],"billing_address_2":[{"type":"simple","converter_id":"no_conversion"}],"billing_state":[{"type":"simple","converter_id":"51ebf9e755a0f90acc00000c"}]},"logo":null,"delays":{"product_opts_field":0,"product_opts":195000,"add_to_cart_field_press":3000},"user_agent":null,"user_agent_scope":["cart","purchase"],"needed_banned_remote_urls":["BestBuy_US/js/tracking/brightTag-min","thebrighttag.com","monetate.net","btstatic.com","checkout.visa.com","analytics-dotcom/analyticsInit"],"contact":"https://www-ssl.bestbuy.com/profile/ss/contactus","ship_est_start_time":{"$date":"2017-02-24T06:27:36.472Z"},"est_stats_start_time":null,"checkout_information_auth":null,"regression_tests_status":{"local_success_test":{"at":{"$date":"2019-06-24T12:49:41.654Z"},"status":"failed","issues":["Something is preventing TT from calling the next method."],"consecutive_failures":65,"cart_failures":1},"daily_noauth_simple_test":{"at":{"$date":"2020-07-10T22:27:10.615Z"},"status":"failed","issues":["Purchase failed."],"consecutive_failures":7,"assigned_to_worker_id":null,"cart_failures":0,"purchase_failures":10,"estimation_failures":0},"feed_test":{"at":{"$date":"2019-09-18T23:38:23.922Z"},"status":"failed","issues":["/cart with random product on LIVE recipe failed."],"consecutive_failures":1,"cart_failures":0,"purchase_failures":0,"estimation_failures":0},"auth_success_test":{"at":{"$date":"2020-02-05T09:53:14.610Z"},"status":"ok","issues":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0},"noauth_success_test":{"at":{"$date":"2020-09-28T01:19:30.023Z"},"status":"failed","issues":["Purchase failed before confirm with an unknown error."],"cart_failures":30}},"checkout_dep_fields":null,"regression_products":[{"url":"http://www.bestbuy.com/site/up-blu-ray-disc/5622390.p","source":"manual"},{"url":"https://www.bestbuy.com/site/vornado-flippi-v6-personal-fan-midnight/3154383.p?skuId=3154383","source":"manual"},{"url":"https://www.bestbuy.com/site/wd-easystore-1tb-external-usb-3-0-portable-hard-drive-black/5792404.p?skuId=5792404","source":"manual"},{"url":"https://www.bestbuy.com/site/wd-easystore-8tb-external-usb-3-0-hard-drive-black/5792401.p?skuId=5792401","source":"manual"},{"url":"http://www.bestbuy.com/site/turtle-beach-ear-force-recon-50x-over-the-ear-gaming-headset-for-xbox-one-ps4-pc-and-mobile-black-green/9539004.p?skuId=9539004","source":"manual"},{"url":"https://www.bestbuy.com/site/beats-by-dr-dre-beats-ep-headphones-blue/5577810.p?skuId=5577810","source":"manual"}],"store_options":{"images_on_add_to_cart":null,"noauth_ends_with_success":null,"auth_ends_with_success":null,"disable_disk_cache":null,"creates_store_account":null,"existing_account_emails_not_allowed":null,"retry_on_info_failures":null,"final_price_before_coupon":null,"final_price_includes_gift_card":null,"use_us_proxy":null,"disable_product_quantity":null,"disable_daily_regressions":null,"local_ends_with_success":"yes","new_coupon":"yes","disable_image_proxy":"yes","overwrite_sales_tax":null,"sync_noauth_and_auth":null,"add_app_to_ua":null,"one_coupon_only":null,"continue_on_alerts":null,"shoprunner_on_shipping_opts":null,"honey_billing_address":null,"use_chrome":null,"is_variantless":null},"product_opts_retrieval_js":"// Best Buy is running a V4 product fetcher\r\n// Commenting out legacy code for absolute clarity on that [Rebecca 10-13-2020]\r\n\r\n\r\n\r\n// // WARNING: certain products redirect to pacificsales.com [Radu - 9.25.2017]\r\n\r\n// //// code for bestbuy.com (NOT for pacificsales.com) -- START\r\n// if (location.host.indexOf('bestbuy.com') >= 0) {\r\n\r\n//   // [Serban 2016-07-25]\r\n\r\n//   // IF TITLE / PRICE SELECTORS CHANGE, UPDATE THEM BELOW !!!\r\n//   _ttTitleSelector = _t_productPageSelectors['title']; // [update Serban 2017-07-07]\r\n//   // -- below selector matches both the normal and sale price (without \"div#ttPrice\"!) [update Serban 2017-07-07]\r\n//   _ttPriceSelector = \"//div[@id='postcard']//div[contains(@class,'pb-purchase-price')] | //div[@id='postcard']//div[contains(@class,'item-price') and not(span[contains(@class,'strikethrough')])] | //section[contains(@class,'pdpTop')]//div[contains(concat(' ',@class,' '),' price ')] | //div[@id='postcard']//div[contains(@class,'priceView-purchase-price')]/span | //div[@id='postcard']//div[contains(@class,'priceView-customer-price')]/span[@aria-hidden='true'] | //div[contains(@class,'priceView-layout-large')]//div[contains(@class,'priceView-customer-price')]\";\r\n//   // -- old selector for \"unactivated device\" => updated for new format with \"pricing options\" [Serban 2016-10-21]\r\n//   // -- updated selector to also match \"one-time payment\" [Serban 2018-11-06]\r\n//   // ---- https://www.bestbuy.com/site/apple-iphone-8-64gb-space-gray-verizon/6009931.p?skuId=6009931\r\n//   // -- fixed to NOT match \"Activate Today\" (because that requires a carrier account), only e.g. \"Activate Later\" [Serban 2019-03-06]\r\n//   // ---- https://www.bestbuy.com/site/apple-iphone-6s-32gb-space-gray-at-t/5580377.p\r\n//   // -- IF THIS SELECTOR CHANGES, UPDATE ADD-TO-CART RECORDING STEP #8 !!!\r\n//   //_ttUnactivatedXpath = \"//div[contains(@class,'contract-type') and strong[contains(text(),'Unactivated device')]]/following-sibling::div[contains(@class,'contract-price')]\";\r\n//   _ttUnactivatedXpath = \"//button[@data-track='adprice-unactivated' or @data-plan-id='retail-price' or contains(@data-plan-id,'FULL_SRP')][not(contains(.,'Activate Today'))]//node()[contains(text(),'$')]\";\r\n\r\n//   // toggle extra-debugging on/off - TURN IT OFF before activating! [Serban 2017-08-04]\r\n//   _ttDebug = false;\r\n\r\n//   // DEBUGGING COOKIES\r\n//   //__utils__.echo('--- cookies:\\n' + document.cookie.split('; ').join('\\n') );\r\n\r\n//   // preventing timeout if jQuery undefined (forcing reload from core) [Serban 2016-09-16]\r\n//   if (typeof jQuery==\"undefined\" || !jQuery) {\r\n//     __utils__.echo('--- WARNING! - jQuery not defined');\r\n//     __utils__.echo('--- forcing reload from core');\r\n//     __utils__.echo('FAILED_LOAD_CART_PROD_URL'); // this echo tells TT to retry loading the product\r\n//     return; // making sure that the rest of the code in prod-opts-JS is not executed\r\n//   }\r\n\r\n//   // hiding pop-up\r\n//   jQuery(\"div#cboxOverlay, div#colorbox\").hide();\r\n\r\n//   // deleting \"shopping assistant\" products, to avoid multiple matches for e.g. prices [Serban 2018-10-15]\r\n//   // -- https://www.bestbuy.com/site/apple-apple-watch-series-3-gps-cellular-42mm-space-gray-aluminum-case-with-black-sport-band-space-gray-aluminum-at-t/5979453.p?skuId=5979453\r\n//   jQuery(\"div#shopping-assistant-app\").remove();\r\n\r\n//   // debugging a/b testing\r\n//   if (__utils__.findOne(\"img[itemprop='image']\")) {\r\n//     abTesting = 'v1';\r\n//   }\r\n//   else {\r\n//     abTesting = 'v2';\r\n//   }\r\n//   __utils__.echo('--- a/b testing ' + abTesting);\r\n//   //jQuery(_ttTitleSelector).text( jQuery(_ttTitleSelector).text() + ' [' + abTesting + ']'); // DISABLE THIS ON LIVE !!!\r\n  \r\n//   var prodTitle = __utils__.findOne(_ttTitleSelector);\r\n  \r\n//   // fixing title => injecting \"h1\" if missing from \"div#postcard\" (temporary store-bug?) [Serban 2018-03-29]\r\n//   if (!prodTitle) {\r\n//     __utils__.echo('--- WARNING: product title not found');\r\n//     var titlePostcard = __utils__.findOne(\"div#postcard\");\r\n//     if (titlePostcard && !__utils__.findOne(\"h1\", titlePostcard)) {\r\n//       var titleText = document.title.split('- Best Buy')[0].trim();\r\n//       __utils__.echo('--- found \"div#postcard\" but missing \"h1\" => injecting it with title = ' + titleText);\r\n//       jQuery(titlePostcard).prepend('<h1>' + titleText + '</h1>');\r\n//       // re-selecting \"prodTitle\" because we also use it elsewhere in prod-opts-JS\r\n//       prodTitle = __utils__.findOne(\"h1\", titlePostcard);\r\n//     }\r\n//   }\r\n  \r\n//   // blocking downloadable products - e.g. \"Digital Download\", \"Digital CD\", \"Digital Copy\" etc. [Serban 2016-03-01]\r\n//   // -- do NOT block valid digital items - e.g. \"Digital Camera\", \"Digital Voice Recorder\" etc.\r\n//   // -- [update 2016-03-30] - removed some strings from badDigitals, because they are [mostly] NOT digital downloads!\r\n//   // ---- i.e. un-blocked ALL EXCEPT 'digitaldownload', 'immediatedelivery' [update 2016-06-15]\r\n//   //var badDigitals = ['digitaldownload', 'digitalcd', 'digitaldvd', 'digitalcopy', 'digitalhdcopy', 'digitalmovie'];\r\n//   // -- [update 2016-10-18] - added 'giftcard' to badDigitals [KZ 10.18.16]\r\n//   var badDigitals = ['digitaldownload', 'immediatedelivery', 'giftcard'];\r\n//   if (prodTitle) {\r\n//     var prodTitleSanitized = prodTitle.textContent.replace(/\\W/g, '').toLowerCase().trim();\r\n//     // blocking product if title contains any of the bad strings defined in \"badDigitals\"\r\n//     for (var iPos=0; iPos<badDigitals.length; iPos++) {\r\n//       var badDigital = badDigitals[iPos];\r\n//       if (prodTitleSanitized.indexOf(badDigital) >= 0) {\r\n//         var _ttBlockMsg = 'PRODUCT NOT SUPPORTED - DOWNLOADABLE PRODUCT OR GIFT CARD - matched badDigital = ' + badDigital;\r\n//         document.body.innerHTML = '<h1>[TWOTAP] ' + _ttBlockMsg + '<h1>';\r\n//         __utils__.echo('--- ' + _ttBlockMsg);\r\n//         break;\r\n//       }\r\n//     }\r\n//   }\r\n  \r\n//   // blocking category pages or search page [brollyka 2018-11-26]\r\n//   // -- https://www.bestbuy.com/site/xbox-one/xbox-live-gold-memberships/pcmcat208000050002.c?id=pcmcat208000050002&intl=nosplash\r\n//   if (!__utils__.findOne(_t_productPageSelectors['title']) && __utils__.findOne(\"div[aria-labelledby='page-results-heading']\")) {\r\n//     var _ttBlockMsg = 'PRODUCT NOT SUPPORTED - CATEGORY PAGE / SEARCH PAGE';\r\n//     document.body.innerHTML = '<h1>[TWOTAP] ' + _ttBlockMsg + '<h1>';\r\n//     __utils__.echo('--- ' + _ttBlockMsg);\r\n//   }\r\n  \r\n//   // saving initial \"max price\", which we will display for options with \"see price in cart\" [Serban 2016-07-29]\r\n//   // -- e.g. http://www.bestbuy.com/site/kitchenaid-artisan-series-tilt-head-stand-mixer-white/5224884.p\r\n//   // -- we will update this \"max price\" during Ajax calls, if a higher one is found\r\n//   // -- after all Ajax calls are completed, we will inject it into all combos with empty / invalid price (\"see price in cart\")\r\n//   _ttMaxPrice = 0;\r\n//   // -- parsing all prices (normal / sale / original) and extracting the \"max price\" found\r\n//   // ---- using \"_t_productPageSelectors\" and assuming that normal-price selector also matches sale-price [Serban 2017-07-07]\r\n//   var ttPricesNormalSale = __utils__.findAll(_t_productPageSelectors['price']);\r\n//   var ttPricesOriginal = __utils__.findAll(_t_productPageSelectors['original_price']);\r\n//   var ttPricesAll = jQuery(ttPricesNormalSale).add(jQuery(ttPricesOriginal));\r\n//   jQuery(ttPricesAll).each(function() {\r\n//     if (this.textContent.indexOf('$') >= 0) {\r\n//       var priceValue = parseFloat(this.textContent.replace(',','').split('$')[1]).toFixed(2);\r\n//       _ttMaxPrice = Math.max(parseFloat(priceValue), parseFloat(_ttMaxPrice)).toFixed(2);\r\n//     }\r\n//   });\r\n//   // -- also checking \"unactivated device\" price\r\n//   var priceUnactivated = __utils__.findOne(_ttUnactivatedXpath);\r\n//   if (priceUnactivated && priceUnactivated.textContent.indexOf('$')>=0) {\r\n//     var priceValue = parseFloat(priceUnactivated.textContent.replace(',','').split('$')[1]).toFixed(2);\r\n//     _ttMaxPrice = Math.max(parseFloat(priceValue), parseFloat(_ttMaxPrice)).toFixed(2);\r\n//   }\r\n//   __utils__.echo('--- _ttMaxPrice on page-load = ' + _ttMaxPrice);\r\n  \r\n//   // function to extract price from \"div[data-pricing-data]\" [Serban 2017-07-07]\r\n//   // -- UPDATE: extracting price from \"data-pricing\" => new JSON structure (\"data-pricing-data\" no longer exists) [Serban 2017-10-02]\r\n//   _ttGetDataPricingDivPrice = function(dataPricingDiv) {\r\n//     var price = '';\r\n//     var dataPricingObj = JSON.parse(decodeURIComponent(dataPricingDiv.getAttribute('data-pricing')));\r\n//     // fixed for new store-defined object structure [Serban 2019-03-06]\r\n//     // -- https://www.bestbuy.com/site/whirlpool-3-9-cu-ft-12-cycle-top-loading-washer-white/6203948.p\r\n//     //if (typeof dataPricingObj == 'object' && dataPricingObj['pricing'] && dataPricingObj['pricing']['purchasePrice']) {\r\n//     if (typeof dataPricingObj == 'object' && dataPricingObj['priceDomain'] && dataPricingObj['priceDomain']['customerPrice']) {\r\n//       price = '$' + dataPricingObj['priceDomain']['customerPrice'];\r\n//       if (_ttDebug) {\r\n//         __utils__.echo('---> extracted price from \"div[data-pricing]\" = ' + price);\r\n//       }\r\n//     }\r\n//     return price;\r\n//   };\r\n  \r\n//   // injecting \"div#ttPrice\" if no price found on page-load (normal/sale/unactivated) [Serban 2017-07-07]\r\n//   // -- otherwise the product does not open in TT, if the page loads with \"see price in cart\"\r\n//   // ---- https://www.bestbuy.com/site/epson-t3249-standard-capacity-ink-cartridge-orange/4619606.p\r\n//   if (!__utils__.findOne(_ttPriceSelector) && !priceUnactivated) {\r\n//     var ttPrice = '';\r\n//     // trying to extract final-price from \"div[data-pricing]\"\r\n//     var dataPricingDiv = __utils__.findOne(\"div#postcard div[data-pricing]\");\r\n//     if (dataPricingDiv) {\r\n//       ttPrice = _ttGetDataPricingDivPrice(dataPricingDiv);\r\n//       // this might be the \"max price\" at this point\r\n//       if (ttPrice.indexOf('$')>=0) {\r\n//         var priceValue = parseFloat(ttPrice.replace(',','').split('$')[1]).toFixed(2);\r\n//         __utils__.echo('--- extracted price from \"div[data-pricing]\" = ' + priceValue);\r\n//         _ttMaxPrice = Math.max(parseFloat(priceValue), parseFloat(_ttMaxPrice)).toFixed(2);\r\n//       }\r\n//     }\r\n//     else {\r\n//       // new price extraction method from store-defined data, for products with \"See price in cart\" [Serban 2019-05-14]\r\n//       // -- using \"regularPrice\" instead of e.g. \"currentPrice\", to make sure we extract the highest price\r\n//       // ---- https://www.bestbuy.com/site/epson-t3249-standard-capacity-ink-cartridge-orange/4619606.p\r\n//       var scriptText = jQuery(\"div[id*='pricing-price'] script:contains('regularPrice'):first\").text().trim();\r\n//       if (scriptText.length) {\r\n//         var scriptMatches = scriptText.match(/regularPrice[^\\d]*([\\d\\.]+)/);\r\n//         if (scriptMatches) {\r\n//           var scriptPrice = scriptMatches[1];\r\n//           __utils__.echo('--- extracted price from store-defined data = ' + scriptPrice);\r\n//           _ttMaxPrice = Math.max(parseFloat(scriptPrice), parseFloat(_ttMaxPrice)).toFixed(2);\r\n//         }\r\n//       }\r\n//     }\r\n//     // fallback price = \"max price\"\r\n//     if (!ttPrice.length && _ttMaxPrice) {\r\n//       ttPrice = _ttMaxPrice;\r\n//     }\r\n//     if (ttPrice.length) {\r\n//       __utils__.echo('--- injecting ttPrice = ' + ttPrice);\r\n//       jQuery(\"body\").append('<div id=\"ttPrice\">' + ttPrice + '</div>');\r\n//     }\r\n//   }\r\n  \r\n//   // function to generate the value of an option\r\n//   // -- IF THIS FUNCTION CHANGES, UPDATE IT IN ADD-TO-CART > JS steps where we re-define stuff after redirect !!!\r\n//   // ---- ALSO UPDATE THE CODE FOR GENERATING \"_ttExtraInfoHack\"\r\n//   _ttGetOptValue = function(el) {\r\n//     var elValue = el.textContent.trim();\r\n//     // using \"title\" if \"textContent\" is empty - e.g. non-color attribute with swatches/logos [Serban 2017-07-07]\r\n//     // -- http://www.bestbuy.com/site/samsung-galaxy-s8-64gb-midnight-black-sprint/5775000.p\r\n//     if (!elValue.length) {\r\n//       elValue = el.title.trim();\r\n//     }\r\n//     //var attrLabel = jQuery(el).closest(\"div[data-variation-type]\").attr('data-variation-type').trim();\r\n//     var attrLabel = '';\r\n//     if (el.hasAttribute('data-track')) {\r\n//       // fixed extraction of attribute-label for both versions [Serban 2018-01-26]\r\n//       var labelV1Matches = el.getAttribute('data-track').match(/\\[context:variationType=([^\\]]+)\\]/);\r\n//       if (labelV1Matches && labelV1Matches[1]) {\r\n//         // v1 = \".variation-wrapper\" => extracting e.g. \"Color\" from \"[context:variationType=Color]\"\r\n//         attrLabel = labelV1Matches[1];\r\n//       }\r\n//       else {\r\n//         // v2 = \".shop-variation-wrapper\" => extracting e.g. \"Color\" from \"Color:Space Gray\"\r\n//         attrLabel = el.getAttribute('data-track').split(':')[0].trim();\r\n//       }\r\n//     }\r\n//     else {\r\n//       __utils__.echo('--- WARNING: attribute label not detected for elValue = ' + elValue);\r\n//     }\r\n//     if (attrLabel.indexOf('olor') < 0) {\r\n//       // generic attribute => also adding attribute label\r\n//       var elValue = attrLabel + ': ' + elValue;\r\n//     }\r\n//     return elValue;\r\n//   };\r\n  \r\n//   // detecting attributes and pre-selected options\r\n//   // -- new selector due to changed HTML [Serban 2017-11-01]\r\n//   // -- must match both \"variation-wrapper\" and \"shop-variation-wrapper\" [Serban 2018-01-26]\r\n//   //_ttAttributes = __utils__.findAll(\"div[data-variation-type]\");\r\n//   _ttAttributes = __utils__.findAll(\"div[class*='variation-wrapper']\");\r\n//   _ttAttributesOriginal = _ttAttributes; // saving original attributes for oos-check after Ajax calls [Serban 2018-06-11]\r\n  \r\n//   // checking if all opts disabled for any of the attributes\r\n//   // -- e.g. http://www.bestbuy.com/site/apple-macbook-pro-intel-core-i5-13-3-display-4gb-memory-500gb-hard-drive-silver/5430505.p\r\n//   _ttAttrWithAllOptsDisabled = false;\r\n//   jQuery(_ttAttributes).each(function() {\r\n//     var opts = __utils__.findAll(\"ul li a\", this);\r\n//     var optsDisabled = __utils__.findAll(\"ul li.disabled a\", this);\r\n//     if (opts.length && optsDisabled.length == opts.length) {\r\n//       _ttAttrWithAllOptsDisabled = true;\r\n//       return false; // stop parsing attributes (found attribute with all opts disabled)\r\n//     }\r\n//   });\r\n  \r\n//   // hack for products with 5+ attributes, or with all opts disabled for any of the attributes\r\n//   // -- disabling attributes, and displaying the pre-selected options as extra-info\r\n//   // -- the product will be added to Cart with the pre-selected options\r\n//   // -- UPDATE: COMPLETELY DISABLED ATTRIBUTES [Serban 2017-07-21]\r\n//   // ---- agreed with Radu, so that we display the correct price for options with \"see price in cart\"\r\n//   // ---- this means we only show the pre-selected options as extra-info\r\n//   // -- UPDATE: RE-ENABLED ATTRIBUTES, as requested [Serban 2017-07-26]\r\n//   // -- UPDATE: COMPLETELY DISABLED ATTRIBUTES [Serban 2018-11-06]\r\n//   // ---- because dropdown-attributes can no longer be parsed in Ajax responses (changed functionality in the store)\r\n//   _ttCompletelyDisabledAttributes = true;\r\n//   if (_ttAttributes.length>=5 || _ttAttrWithAllOptsDisabled || _ttCompletelyDisabledAttributes) {\r\n//     if (_ttAttributes.length>=5) {\r\n//       __utils__.echo('--- 5+ attributes detected => disabling attributes (pre-selected options = extra-info)');\r\n//     }\r\n//     if (_ttAttrWithAllOptsDisabled) {\r\n//       __utils__.echo('--- found attribute with all opts disabled => disabling attributes (pre-selected options = extra-info)');\r\n//     }\r\n//     if (_ttCompletelyDisabledAttributes) {\r\n//       __utils__.echo('--- completely disabling attributes (pre-selected options = extra-info)');\r\n//     }\r\n//     _ttExtraInfoHack = '';\r\n//     jQuery(_ttAttributes).each(function() {\r\n//       if (_ttExtraInfoHack.length) {\r\n//         _ttExtraInfoHack += ', ';\r\n//       }\r\n//       var optSelected = __utils__.findOne(\"ul li.selected a\", this);\r\n//       if (optSelected) {\r\n//         // old attribute scenarios, this code should be obsolete [comment by Serban 2018-11-06]\r\n//         // manually adding \"Color: \" label, because that one is not returned by \"_ttGetOptValue\" [Serban 2017-07-21]\r\n//         var attrLabel = '';\r\n//         if (this.hasAttribute('data-track')) {\r\n//           // fixed extraction of attribute-label [Serban 2018-01-24]\r\n//           //attrLabel = this.getAttribute('data-track').replace('[context:variationType=', '').replace(']', '').trim();\r\n//           attrLabel = this.getAttribute('data-track').split(':')[0].trim();\r\n//         }\r\n//         if (attrLabel.indexOf('olor') >= 0) {\r\n//           _ttExtraInfoHack += attrLabel + ': ';\r\n//         }\r\n//         _ttExtraInfoHack += _ttGetOptValue(optSelected);\r\n//       }\r\n//       else {\r\n//         // new attribute scenarios (changed HTML + functionality) [Serban 2018-11-06]\r\n//         var attrLabelText = '';\r\n//         var optSelectedText = '';\r\n//         var attrLabel = __utils__.findOne(\"div.variation-header label\", this);\r\n//         if (attrLabel) {\r\n//           attrLabelText = attrLabel.textContent.trim() + ' ';\r\n//         }\r\n//         // v1 = swatches\r\n//         // -- v1A = swatch images\r\n//         // ----\thttps://www.bestbuy.com/site/apple-iphone-8-64gb-space-gray-verizon/6009931.p?skuId=6009931\r\n//         // -- v1B = swatch divs with background-color (no image)\r\n//         // ----\thttps://www.bestbuy.com/site/skullcandy-inkd-2-wired-earbud-headphones-blue-black/6498577.p?skuId=6498577\r\n//         // -- using the option-text next to the attribute-label, to simplify the code for both v1A + v1B\r\n//         var optSelectedV1 = __utils__.findOne(\"div.variation-header div.hover-name\", this);\r\n//         if (optSelectedV1) {\r\n//           optSelectedText = optSelectedV1.textContent.trim();\r\n//         }\r\n//         // v2 = dropdown (options appear in the HTML only after clicking on the attribute)\r\n//         // -- v2A = dropdown with texts\r\n//         // ---- https://www.bestbuy.com/site/apple-macbook-pro-13-display-with-touch-bar-intel-core-i5-16gb-memory-512gb-ssd-latest-model-silver/6289619.p?skuId=6289619\r\n//         var optSelectedV2A = __utils__.findOne(\"div.variation-dropdown div.tile-label\", this);\r\n//         if (optSelectedV2A) {\r\n//           optSelectedText = optSelectedV2A.textContent.trim();\r\n//         }\r\n//         // -- v2B = dropdown with images\r\n//         // ---- https://www.bestbuy.com/site/apple-iphone-8-64gb-space-gray-verizon/6009931.p?skuId=6009931\r\n//         var optSelectedV2B = __utils__.findOne(\"div.variation-dropdown img.tile-image\", this);\r\n//         if (optSelectedV2B) {\r\n//           optSelectedText = optSelectedV2B.alt.trim();\r\n//         }\r\n//         _ttExtraInfoHack += attrLabelText + optSelectedText;\r\n//         __utils__.echo('--- extra-info hack - attr label = \"' + attrLabelText + '\", text = \"' + optSelectedText + '\"');\r\n//       }\r\n//       // we must NOT detect this attribute when re-selecting \"_ttAttributes\" and via attributes existence selector\r\n//       // -- new selector due to changed HTML [Serban 2017-11-01]\r\n//       // -- must match both \"variation-wrapper\" and \"shop-variation-wrapper\" [Serban 2018-01-26]\r\n//       //this.removeAttribute('data-variation-type');\r\n//       this.classList.remove('variation-wrapper', 'shop-variation-wrapper');\r\n//     });\r\n//     jQuery(\"body\").append('<div id=\"ttExtraInfoHack\">' + _ttExtraInfoHack + '</div>');\r\n//   }\r\n  \r\n//   // function to reload from core\r\n//   _ttForceReload = function() {\r\n//     __utils__.echo('--- forcing reload from core');\r\n//     __utils__.echo('FAILED_LOAD_CART_PROD_URL'); // this echo tells TT to retry loading the product\r\n//   };\r\n  \r\n//   // function to extract the product image and alt-images from a given \"div\"\r\n//   _ttGetImages = function(div) {\r\n//     var image = '';\r\n//     var altImages = [];\r\n//     // image\r\n//     var imageDiv = __utils__.findOne(\"div.carousel-inner div.item.active img\", div);\r\n//     if (imageDiv) {\r\n//       // using \"data-img-path\" for images from Ajax response (they do not have \"src\") [Serban 2017-11-17]\r\n//       image = imageDiv.getAttribute(\"data-img-path\") || imageDiv.src;\r\n//       image = image.split(';')[0];\r\n//       // DISABLED CODE due to changed HTML [Serban 2017-11-01]\r\n//       /*\r\n//       if (image.indexOf('data:image')>=0 && imageDiv.hasAttribute('data-img-path')) {\r\n//         image = imageDiv.getAttribute('data-img-path');\r\n//       }\r\n//       */\r\n//     }\r\n//     // alt-images\r\n//     // DISABLED CODE due to changed HTML [Serban 2017-11-01]\r\n//     /*\r\n//     var path = \"//div[contains(@class,'carousel-inner')]//div[contains(@class,'item')]//img[contains(@class,'b-loaded')] | //div[contains(@class,'carousel-inner')]//div[contains(@class,'item')]//img/@data-img-path\";\r\n//     var images = document.evaluate(path, div, null, XPathResult.ORDERED_NODE_SNAPSHOT_TYPE, null);\r\n//     for (var iPos=0; iPos<images.snapshotLength; iPos++) {\r\n//       var el = images.snapshotItem(iPos);\r\n//       if (el.src) {\r\n//         altImages.push(el.src); // matched element is img\r\n//       }\r\n//       else {\r\n//         altImages.push(el.textContent); // matched element is \"data-img-path\" attribute of img\r\n//       }\r\n//     }\r\n//     */\r\n//     // NEW CODE due to changed HTML [Serban 2017-11-01]\r\n//     var thumbs = __utils__.findAll(\"li.thumbnail-image-wrapper img\", div);\r\n//     for (var iPos=0; iPos<thumbs.length; iPos++) {\r\n//       // retrieving url from \"data-src\" or \"src\" attribute [chis.george.cristian] 2017-11-17\r\n//       // -- because on page load \"src\" contains an invalid url and it is updated later, after scrolling the page, with the value from \"data-src\"\r\n//       // -- we use \"data-src\" in order to avoid triggering all kind of events that would properly update the src\r\n//       var url = thumbs[iPos].getAttribute(\"data-src\") || thumbs[iPos].src;\r\n//       url = url.split(';')[0];\r\n//       altImages.push(url);\r\n//     }\r\n//     return { image: image, alt_images: altImages };\r\n//   };\r\n  \r\n//   // function to extract hash data from Ajax response HTML (price, image, alt-images, extra-info)\r\n//   _ttExtractHashData = function(ajaxDiv) {\r\n//     // price\r\n//     var price = '';\r\n//     var priceDiv = __utils__.findOne(_ttPriceSelector, ajaxDiv);\r\n//     if (priceDiv) {\r\n//       price = priceDiv.textContent.trim();\r\n//       if (_ttDebug) {\r\n//         __utils__.echo('---> extracted price from \"_ttPriceSelector\" = ' + price);\r\n//       }\r\n//     }\r\n//     // -- updating price from \"Unactivated device\" - for products with \"add to package\" (price per contract / per month)\r\n//     // ---- e.g. http://www.bestbuy.com/site/apple-iphone-6s-16gb-gold-sprint/4447600.p\r\n//     var priceUnactivated = __utils__.findOne(_ttUnactivatedXpath);\r\n//     if (priceUnactivated) {\r\n//       price = priceUnactivated.textContent.trim();\r\n//       if (_ttDebug) {\r\n//         __utils__.echo('---> extracted price from \"priceUnactivated\" = ' + price);\r\n//       }\r\n//     }\r\n//     // -- trying to extract final-price from \"div[data-pricing]\" - for products with \"see price in cart\" [Serban 2017-07-07]\r\n//     // ---- NOT working at this time, because the Ajax response is NOT generated with \"div[data-pricing]\"\r\n//     // ---- instead, the Ajax response is generated with an old price box (\".price-column .pb-legacy\") if sku has \"see price in cart\"\r\n//     // ---- this is an issue with API calls, but it would not be an issue with full-page calls (3-4x slower!)\r\n//     if (!price.length) {\r\n//       var dataPricingDiv = __utils__.findOne(\"div#postcard div[data-pricing]\", ajaxDiv);\r\n//       if (dataPricingDiv) {\r\n//         price = _ttGetDataPricingDivPrice(dataPricingDiv);\r\n//         if (_ttDebug) {\r\n//           __utils__.echo('---> extracted price from \"div[data-pricing]\" = ' + price);\r\n//         }\r\n//       }\r\n//     }\r\n//     // -- trying to extract final-price from <script> with \"currentPrice\" - if no price in \"div[data-pricing]\" [Serban 2017-10-31]\r\n//     // ---- https://www.bestbuy.com/site/vizio-48-class-47-6-diag--led-1080p-hdtv/5386701.p\r\n//     if (!price.length) {\r\n//       var priceScript = __utils__.findOne(\"//script[contains(text(),'currentPrice')]\", ajaxDiv);\r\n//       if (priceScript) {\r\n//         // extracting price starting with first digit, followed by digit or \",\" or \".\"\r\n//         var priceMatch = priceScript.textContent.split('currentPrice')[1].match(/\\d[\\d,.]+/);\r\n//         if (priceMatch) {\r\n//           price = '$' + parseFloat(priceMatch[0]).toFixed(2); // removing \",\" from the end of e.g. \"299.99,\"\r\n//           if (_ttDebug) {\r\n//             __utils__.echo('---> extracted price from <script> with \"currentPrice\" = ' + price);\r\n//           }\r\n//         }\r\n//       }\r\n//     }\r\n//     // DISABLED fallbacks to original-price for skus with \"see price in cart\" [Serban 2017-07-26]\r\n//     // -- instead, we will make Ajax calls to full-page for these sku, to extract the correct price from \"div[data-pricing]\"\r\n//     // -- DISABED -- START\r\n//     /*\r\n//     // -- using fallback price from NEW \"original price\" - for products with \"see price in cart\"\r\n//     if (!price.length) {\r\n//       var priceOriginal = __utils__.findOne(_t_productPageSelectors['original_price'], ajaxDiv);\r\n//       if (priceOriginal) {\r\n//         price = priceOriginal.textContent.trim();\r\n//         if (_ttDebug) {\r\n//           __utils__.echo('---> extracted price from NEW \"priceOriginal\" = ' + price);\r\n//         }\r\n//       }\r\n//     }\r\n//     // -- using fallback #2 price from LEGACY \"original price\" - for products with \"see price in cart\" [Serban 2017-07-07]\r\n//     // ---- because the Ajax response is generated with an old price box (\".price-column .pb-legacy\") if sku has \"see price in cart\"\r\n//     if (!price.length) {\r\n//       var priceOriginal = __utils__.findOne(\"div#postcard .price-column .pb-legacy .regular-price\", ajaxDiv);\r\n//       if (priceOriginal) {\r\n//         price = priceOriginal.textContent.trim();\r\n//         if (_ttDebug) {\r\n//           __utils__.echo('---> extracted price from LEGACY \"original price\" = ' + price);\r\n//         }\r\n//       }\r\n//     }\r\n//     */\r\n//     // -- DISABED -- END\r\n//     price = price.replace(/,/g, ''); // removing \",\" from price\r\n//     // -- updating \"_ttMaxPrice\", if this price is higher\r\n//     if (price.indexOf('$') >= 0) {\r\n//       var priceValue = parseFloat(price.replace(',','').split('$')[1]).toFixed(2);\r\n//       if (parseFloat(priceValue) > parseFloat(_ttMaxPrice)) {\r\n//         _ttMaxPrice = priceValue;\r\n//         __utils__.echo('---> _ttMaxPrice updated = ' + _ttMaxPrice);\r\n//       }\r\n//     }\r\n//     // image and alt-images\r\n//     var imagesData = _ttGetImages(ajaxDiv);\r\n//     var image = imagesData['image'];\r\n//     var altImages = imagesData['alt_images'];\r\n//     // extra-info\r\n//     var extraInfo = '';\r\n//     // ... TO BE IMPLEMENTED (iff any products found where extra-info changes with opts)\r\n//     return { price: price, image: image, alt_images: altImages, extra_info: extraInfo };\r\n//   };\r\n  \r\n//   //\r\n//   // AJAX HACK -- START [Serban 2016-07-22]\r\n//   //\r\n\r\n//   // BestBuy API key used in Ajax calls for argument \"apiKey\" [Serban 2018-06-21]\r\n//   _ttApiKeyBB = 'hPUIOO7Z1suZGqX2XnsAOQwb';\r\n\r\n//   // initializing array of all skus (for all full-combos) [Serban 2018-06-21]\r\n//   // -- after parsing sub-combos, we will make combined Ajax call(s) to the BestBuy API with all these skus\r\n//   _ttSkusAll = [];\r\n\r\n//   // initializing object which will hold the \"hashKey\" for each \"sku\" [Serban 2018-06-21]\r\n//   // -- the hash-keys will be generated when parsing sub-combos (from Ajax calls to full-page)\r\n//   // -- the hash-keys will be used when parsing full-combos (from Ajax calls to API), to generate the hash-data for each sku\r\n//   _ttSkuHashKeys = {};\r\n  \r\n//   _ttAjaxSlots = 3; // the number of Ajax calls to be executed in parallel\r\n//   _ttAjaxStop = false; // if this is marked \"true\", no more Ajax calls will be made after that point (e.g. error in one of the Ajax calls)\r\n//   _ttAjaxStopped = false; // if this is marked \"true\", we don't execute the \"stopping\" procedure again (i.e. already stopped)\r\n//   _ttAjaxCalls = []; // array of objects with request-data for each Ajax call (to API, or to full-page in case of \"extra calls\")\r\n  \r\n//   // initializing array of skus for which we have already made \"extra calls\" [Serban 2017-10-31]\r\n//   // -- we will NOT make additional \"extra calls\" for the same sku, to avoid infinite loop (timeout)\r\n//   // -- an infinite loop would happen if the price extraction fails even from the \"full page\" of an \"extra call\"\r\n//   _ttExtraCallSkus = [];\r\n  \r\n//   // initializing timer\r\n//   timeStart = new Date().getTime();\r\n//   timePassed = function() { return (new Date().getTime() - timeStart); };\r\n  \r\n//   // initializing hash \"preparedProductData\"\r\n//   preparedProductData = {};\r\n  \r\n//   // re-detecting attributes, in case we disabled them via hack for 5+ attributes\r\n//   // -- new selector due to changed HTML [Serban 2017-11-01]\r\n//   // -- must match both \"variation-wrapper\" and \"shop-variation-wrapper\" [Serban 2018-01-26]\r\n//   //_ttAttributes = __utils__.findAll(\"div[data-variation-type]\");\r\n//   _ttAttributes = __utils__.findAll(\"div[class*='variation-wrapper']\");\r\n  \r\n//   // reading all options (including disabled!), sorted as they appear on page-load\r\n//   // -- we will use this order when generating results in GET\r\n//   _ttOptsSorted = []; // e.g. [ [\"Black\", \"Red\", \"White\" ], [\"32GB\", \"64GB\", \"128GB\"] ]\r\n//   jQuery(_ttAttributes).each(function(idx) {\r\n//     _ttOptsSorted[idx] = [];\r\n//     var opts = __utils__.findAll(\"ul li a\", this);\r\n//     for (var iPos=0; iPos<opts.length; iPos++) {\r\n//       var el = opts[iPos];\r\n//       var elValue = _ttGetOptValue(el);\r\n//       _ttOptsSorted[idx].push(elValue);\r\n//     }\r\n//   });\r\n  \r\n//   // populating \"_ttAjaxCalls\" with the immediately-available options of attr1\r\n//   // -- only adding options which can be selected on page-load, because otherwise they will not be selectable during Purchase\r\n//   if (_ttAttributes.length) {\r\n//     var attrLevel = 1;\r\n//     // new selector due to changed HTML [Serban 2017-11-01]\r\n//     //var opts = __utils__.findAll(\"ul li:not(.disabled) a[data-refresh-url]\", _ttAttributes[attrLevel-1]);\r\n//     var opts = __utils__.findAll(\"ul li:not(.disabled) a[href]\", _ttAttributes[attrLevel-1]);\r\n//     for (var iPos=0; iPos<opts.length; iPos++) {\r\n//       var el = opts[iPos];\r\n//       // DISABLED CODE due to changed HTML [Serban 2017-11-01]\r\n//       /*\r\n//       var ajaxUrl = el.getAttribute('data-refresh-url'); // e.g. \"/browse-api/2.0/pdp/content?skuId=5229700\"\r\n//       var skuMatch = ajaxUrl.match(/skuId=(\\d+)/);\r\n//       if (skuMatch && skuMatch[1]) {\r\n//         var sku = skuMatch[1]; // e.g. \"5229700\"\r\n//         // DISABLED, because this would make Ajax calls 3-4 times slower !!!\r\n//         // making Ajax call to full product page (not to API) [Serban 2017-07-07]\r\n//         // -- we do this in order to extract final-price for skus with \"see price in cart\", from \"div[data-pricing]\"\r\n//         // -- because \"div[data-pricing]\" is NOT generated in the Ajax call to API\r\n//         //ajaxUrl = '/site/product/' + sku + '.p';\r\n//         var ajaxCall = { ajaxUrl: ajaxUrl, sku: sku, attrLevel: attrLevel };\r\n//         _ttAjaxCalls.push(ajaxCall);\r\n//       }\r\n//       */\r\n//       // NEW CODE due to changed HTML [Serban 2017-11-01]\r\n//       var skuMatch = el.href.match(/\\/site\\/products\\/(\\d+)\\.p/) || el.href.split('?')[0].split('/').pop().match(/(\\d+)/) || el.href.match(/\\?.*skuId=(\\d+)/);\r\n//       if (skuMatch && skuMatch[1]) {\r\n//         var sku = skuMatch[1]; // e.g. \"5229700\"\r\n//         // BestBuy API no longer working => changed \"ajaxUrl\" to request the actual pp for that sku [Serban 2018-03-28]\r\n//         //var ajaxUrl = '/browse-api/2.0/pdp/content?skuId=' + sku; // e.g. \"/browse-api/2.0/pdp/content?skuId=5229700\"\r\n//         var ajaxUrl = '/site/products/' + sku + '.p'; // e.g. \"/site/products/5229700.p\"\r\n//         var ajaxCall = { ajaxUrl: ajaxUrl, sku: sku, attrLevel: attrLevel };\r\n//         _ttAjaxCalls.push(ajaxCall);\r\n//       }\r\n//     }\r\n//   }\r\n  \r\n//   _ttAjaxCallsCompleted = 0; // the number of Ajax calls completed (with either \"success\" or \"fail\")\r\n//   _ttAjaxCallsTotal = _ttAjaxCalls.length; // saving the number of Ajax calls to be made, because \"_ttAjaxCalls\" will change dynamically\r\n//   __utils__.echo('--- initial number of Ajax calls to be made (for attr1) = ' + _ttAjaxCallsTotal);\r\n\r\n//   var _ttCheckObj = {\r\n//     attrAjaxCall: false,\r\n//     weightAjaxCall: false,  \r\n//   };\r\n\r\n//   _ttCheckAjaxCalls = function() {\r\n//     __utils__.echo('--- _ttCheckAjaxCalls status:');\r\n//     __utils__.echo('---> attribute ajax call completed: ' + _ttCheckObj.attrAjaxCall);\r\n//     __utils__.echo('---> weight ajax call completed: ' + _ttCheckObj.weightAjaxCall);\r\n//     // forcing oos if \"preparedProductData\" is empty after Ajax calls during /cart [Serban 2018-06-11]\r\n//     // -- https://www.bestbuy.com/site/jbl-clip-2-portable-bluetooth-speaker-squad/5792002.p\r\n//     // -- UPDATE: do NOT force oos if we completely disabled attributes [Serban 2018-11-06]\r\n//     if (_t_productPageStatus == 'product_info' && _ttCheckObj.attrAjaxCall === true &&\r\n//         _ttAttributesOriginal.length && !Object.keys(preparedProductData).length &&\r\n//         !_ttCompletelyDisabledAttributes) {\r\n//       __utils__.echo('--- WARNING: \"preparedProductData\" empty after Ajax calls during /cart => forcing oos');\r\n//       var _ttBlockMsg = 'PRODUCT NOT SUPPORTED - OOS';\r\n//       document.body.innerHTML = '<h1>[TWOTAP] ' + _ttBlockMsg + '<h1>';\r\n//       __utils__.echo('--- ' + _ttBlockMsg);\r\n//     }\r\n//     if (_ttCheckObj.attrAjaxCall === true && _ttCheckObj.weightAjaxCall === true) {\r\n//       __utils__.echo('--- ready to exit from prod-opts-JS after ALL Ajax calls @ ms ' + timePassed() );\r\n//       productOptsBlock = false;\r\n//     }\r\n//   };\r\n\r\n//   // function to execute the next Ajax call from \"_ttAjaxCalls\"\r\n//   _ttAjaxCallNext = function() {\r\n//     if (_ttAjaxStop) {\r\n//       if (!_ttAjaxStopped) {\r\n//         _ttAjaxStopped = true;\r\n//         __utils__.echo('--- STOP! - forcing exit from prod-opts-JS, because _ttAjaxStop = true @ ms ' + timePassed() );\r\n//         // blocking product and forcing reload from core, due to error in Ajax calls\r\n//         var _ttBlockMsg = 'PRODUCT BLOCKED - ERROR IN AJAX CALLS';\r\n//         document.body.innerHTML = '<h1>[TWOTAP] ' + _ttBlockMsg + '<h1>';\r\n//         __utils__.echo('--- ' + _ttBlockMsg);\r\n//         // DISABLED reload from core [Serban 2018-06-21]\r\n//         // -- because it would only make things worse, if Ajax failed due to BestBuy API error 403 (Over Quota)\r\n//         //_ttForceReload(); // forcing reload from core\r\n//         //productOptsBlock = false; // ready to exit from prod-opts-JS\r\n//         _ttCheckObj.attrAjaxCall = true;\r\n//         _ttCheckAjaxCalls();\r\n//       }\r\n//       return;\r\n//     }\r\n//     if (!_ttAjaxCalls.length) {\r\n//       __utils__.echo('--- all Ajax calls started (pending) or completed');\r\n//       return;\r\n//     }\r\n//     var ajaxCall = _ttAjaxCalls.shift(); // extracting data for the next Ajax call, from the start of \"_ttAjaxCalls\"\r\n//     var ajaxUrl = ajaxCall['ajaxUrl'];\r\n//     if (_ttDebug) {\r\n//       __utils__.echo('--- starting Ajax call: ' + ajaxUrl);\r\n//     }\r\n  \r\n//     // ... TO BE IMPROVED? - save ajaxResponse for each sku, to avoid making another Ajax call for the same sku (with \"attrLevelNext\")\r\n//     // ... -- this might not be needed, because Ajax responses appear to be cached, anyway [in browser] => really fast\r\n  \r\n//     // Ajax call -- START\r\n//     jQuery.ajax({\r\n//       method: \"GET\",\r\n//       url: ajaxUrl,\r\n//       ajaxCall: ajaxCall\r\n//     }).done(function(ajaxResponse) {\r\n//       __utils__.echo('--- Ajax response (type ' + typeof ajaxResponse + ') for ajaxCall = ' + JSON.stringify(this.ajaxCall) + ' @ ms ' + timePassed() );\r\n//       var ajaxError = false;\r\n//       // processing Ajax response\r\n//       if (typeof ajaxResponse == 'string') {\r\n//         // Ajax response = HTML for non-final attribute, from Ajax call to full-page\r\n//         var ajaxDiv = document.createElement('div');\r\n//         ajaxDiv.innerHTML = ajaxResponse;\r\n//         // new selector due to changed HTML [Serban 2017-11-01]\r\n//         // -- must match both \"variation-wrapper\" and \"shop-variation-wrapper\" [Serban 2018-01-26]\r\n//         //var ajaxAttributes = __utils__.findAll(\"div[data-variation-type]\", ajaxDiv);\r\n//         var ajaxAttributes = __utils__.findAll(\"div[class*='variation-wrapper']\", ajaxDiv);\r\n//         // skipping this combo if NO attributes in Ajax response [Serban 2017-01-28]\r\n//         // -- this happens on products where the attributes disappear from the page, after changing an option\r\n//         // -- e.g. http://www.bestbuy.com/site/amazon-fire-hd8-8-tablet-32gb-wi-fi-black/5578952.p\r\n//         if (!ajaxAttributes.length) {\r\n//           // do NOT set \"ajaxError\" to \"true\", because we do NOT want to block the product - we only skip this combo!\r\n//           __utils__.echo('--- WARNING! - no attributes in Ajax response => skipping this combo');\r\n//         }\r\n//         else {\r\n//           // checking if this Ajax call was made for a final attribute\r\n//           if (this.ajaxCall['attrLevel'] == _ttAttributes.length) {\r\n//             // final attribute => generate hash data (iff combo available!)\r\n//             // -- this code should now be executed only for products with 1 attribute [Serban 2018-06-21]\r\n//             // ---- since we now make Ajax calls to BestBuy API for full-combos of 2+ attributes\r\n//             var comboAvailable = true; // assuming combo available by default\r\n//             // -- WARNING! - not 100% sure this filters ok in all scenarios!\r\n//             // -- UPDATED with new filter: checking if \"Notify Me\" button exists [Serban 2017-10-01]\r\n//             // ---- because the old filter no longer works - no \"div\" with \"data-purchasable\"\r\n//             // ---- and we can't check the disabled add-button, because it is not loaded in the Ajax response\r\n//             // ---- https://www.bestbuy.com/site/apple-iphone-7-128gb-productred-verizon/5581592.p\r\n//             //if (!__utils__.findOne(\"div#priceblock-wrapper-wrapper div[data-purchasable='true']\", ajaxDiv)) {\r\n//             if (__utils__.findOne(\"div#priceblock-wrapper-wrapper button#notify-in-stock-btn\", ajaxDiv)) {\r\n//               __utils__.echo('--- WARNING! - combo not available');\r\n//               comboAvailable = false;\r\n//             }\r\n//             if (comboAvailable) {\r\n//               var hashKey = '';\r\n//               for (var iPos=0; iPos<ajaxAttributes.length; iPos++) {\r\n//                 // new selector due to changed HTML [Serban 2017-11-01]\r\n//                 //var elSelected = __utils__.findOne(\"ul li.selected:not(.disabled) a[data-refresh-url]\", ajaxAttributes[iPos]);\r\n//                 var elSelected = __utils__.findOne(\"ul li.selected:not(.disabled) a[href]\", ajaxAttributes[iPos]);\r\n//                 if (elSelected) {\r\n//                   var elValue = _ttGetOptValue(elSelected);\r\n//                   if (hashKey.length) {\r\n//                     hashKey += '--XX--';\r\n//                   }\r\n//                   hashKey += elValue;\r\n//                 }\r\n//                 else {\r\n//                   __utils__.echo('--- ERROR! - no selected option found for attribute level ' + (iPos+1) );\r\n//                   ajaxError = true;\r\n//                 }\r\n//               }\r\n//               if (!ajaxError) {\r\n//                 preparedProductData[hashKey] = _ttExtractHashData(ajaxDiv);\r\n//                 // saving sku, in case it will need an \"extra call\" to full-page (sku with \"see price in cart\") [Serban 2017-07-26]\r\n//                 preparedProductData[hashKey]['sku'] = this.ajaxCall['sku'];\r\n//                 if (_ttDebug) {\r\n//                   preparedProductData[hashKey]['ajaxDiv'] = ajaxDiv;\r\n//                 }\r\n//               }\r\n//               // combo available => injecting fake add-to-cart button, to ensure that TT finds an add-to-cart button on page-load\r\n//               // -- we do this because we do not click on opts when reading the product, and the pre-selected combo may be oos\r\n//               // -- e.g. http://www.bestbuy.com/site/beats-by-dr-dre-solo-2-on-ear-headphones-blue/5565057.p\r\n//               if (!__utils__.findOne(\"div#ttFakeAddButton\")) {\r\n//                 jQuery(\"body\").append('<div id=\"ttFakeAddButton\">[TWOTAP] Fake add-to-cart button</div>');\r\n//               }\r\n//             }\r\n//           }\r\n//           else {\r\n//             // non-final attribute => expand \"_ttAjaxCalls\" with available options of next attribute\r\n//             var attrLevelNext = this.ajaxCall['attrLevel'] + 1;\r\n//             if (ajaxAttributes[attrLevelNext-1]) {\r\n//               // generating partial hash-key for this sub-combo [Serban 2018-06-21]\r\n//               var hashKeyPartial = '';\r\n//               for (var iPos=0; iPos<ajaxAttributes.length - 1; iPos++) {\r\n//                 // new selector due to changed HTML [Serban 2017-11-01]\r\n//                 //var elSelected = __utils__.findOne(\"ul li.selected:not(.disabled) a[data-refresh-url]\", ajaxAttributes[iPos]);\r\n//                 var elSelected = __utils__.findOne(\"ul li.selected:not(.disabled) a[href]\", ajaxAttributes[iPos]);\r\n//                 if (elSelected) {\r\n//                   var elValue = _ttGetOptValue(elSelected);\r\n//                   if (hashKeyPartial.length) {\r\n//                     hashKeyPartial += '--XX--';\r\n//                   }\r\n//                   hashKeyPartial += elValue;\r\n//                 }\r\n//                 else {\r\n//                   __utils__.echo('--- ERROR! - no selected option found for attribute level ' + (iPos+1) );\r\n//                   ajaxError = true;\r\n//                 }\r\n//               }\r\n//               // parsing full-combos for this sub-combo\r\n//               // new selector due to changed HTML [Serban 2017-11-01]\r\n//               //var opts = __utils__.findAll(\"ul li:not(.disabled) a[data-refresh-url]\", ajaxAttributes[attrLevelNext-1]);\r\n//               var opts = __utils__.findAll(\"ul li:not(.disabled) a[href]\", ajaxAttributes[attrLevelNext-1]);\r\n//               for (var iPos=0; iPos<opts.length; iPos++) {\r\n//                 var el = opts[iPos];\r\n//                 var elValue = _ttGetOptValue(el);\r\n//                 // generating \"hashKey\" for this full-combo [Serban 2018-06-21]\r\n//                 var hashKey = hashKeyPartial + '--XX--' + elValue;\r\n//                 // DISABLED CODE due to changed HTML [Serban 2017-11-01]\r\n//                 /*\r\n//                 var ajaxUrl = el.getAttribute('data-refresh-url');\r\n//                 var skuMatch = ajaxUrl.match(/skuId=(\\d+)/);\r\n//                 if (skuMatch && skuMatch[1]) {\r\n//                   var sku = skuMatch[1];\r\n//                   var ajaxCall = { ajaxUrl: ajaxUrl, sku: sku, attrLevel: attrLevelNext };\r\n//                   _ttAjaxCalls.push(ajaxCall);\r\n//                   _ttAjaxCallsTotal++;\r\n//                 }\r\n//                 */\r\n//                 // NEW CODE due to changed HTML [Serban 2017-11-01]\r\n//                 var skuMatch = el.href.match(/\\/site\\/products\\/(\\d+)\\.p/) || el.href.split('?')[0].split('/').pop().match(/(\\d+)/) || el.href.match(/\\?.*skuId=(\\d+)/);\r\n//                 if (skuMatch && skuMatch[1]) {\r\n//                   var sku = skuMatch[1]; // e.g. \"5229700\"\r\n//                   // processing sku depending on whether the next attr is a final attr or not [Serban 2018-06-21]\r\n//                   if (attrLevelNext == _ttAttributes.length) {\r\n//                     // next attr is a final attr => saving sku for combined Ajax call to BestBuy API for full-combos\r\n//                     _ttSkusAll.push(sku);\r\n//                     // saving \"hashKey\" for this \"sku\"\r\n//                     _ttSkuHashKeys[sku] = hashKey;\r\n//                   }\r\n//                   else {\r\n//                     // next attr is NOT a final attr => generating Ajax call for each next-level sku\r\n\r\n//                     // BestBuy API 2.0 no longer working => changed \"ajaxUrl\" to request the actual pp for that sku [Serban 2018-03-28]\r\n//                     //var ajaxUrl = '/browse-api/2.0/pdp/content?skuId=' + sku; // e.g. \"/browse-api/2.0/pdp/content?skuId=5229700\"\r\n//                     var ajaxUrl = '/site/products/' + sku + '.p'; // e.g. \"/site/products/5229700.p\"\r\n//                     var ajaxCall = { ajaxUrl: ajaxUrl, sku: sku, attrLevel: attrLevelNext };\r\n//                     _ttAjaxCalls.push(ajaxCall);\r\n//                     _ttAjaxCallsTotal++;\r\n//                   }\r\n//                 }\r\n//               }\r\n//               if (_ttDebug) {\r\n//                 __utils__.echo('--- updated number of Ajax calls to be made = ' + _ttAjaxCallsTotal);\r\n//               }\r\n//             }\r\n//             else {\r\n//               // skipping this sub-combo if the next attribute does not exist [Serban 2017-07-14]\r\n//               // -- e.g. product with 3 attrs: http://www.bestbuy.com/site/apple-iphone-6s-plus-32gb-space-gray-at-t/5580359.p\r\n//               // ---- but sku with 2 attrs: http://www.bestbuy.com/site/apple-iphone-6s-plus-16gb-space-gray-at-t/4443207.p\r\n//               __utils__.echo('--- WARNING! - no attribute found for level ' + attrLevelNext + ' => skipping this sub-combo');\r\n//             }\r\n//           }\r\n//         }\r\n//       }\r\n//       if (typeof ajaxResponse == 'object' && ajaxResponse.products) {\r\n//         // Ajax response = JSON for full-combos, from Ajax call to BestBuy API [Serban 2018-06-21]\r\n//         // -- the full-combos correspond to the list of skus for which this API call was made\r\n//         for (var iPos=0; iPos<ajaxResponse.products.length; iPos++) {\r\n//           var skuData = ajaxResponse.products[iPos];\r\n//           var sku = skuData.sku;\r\n//           var hashKey = _ttSkuHashKeys[sku];\r\n//           if (_ttDebug) {\r\n//             __utils__.echo('---> parsing sku = ' + sku + ', hashKey = ' + hashKey );\r\n//           }\r\n//           // generating hash data for this full-combo\r\n//           var price = '$' + skuData.salePrice;\r\n//           var image = skuData.largeFrontImage;\r\n//           var altImages = [];\r\n//           for (var jPos=0; jPos<skuData.images; jPos++) {\r\n//             var imageData = skuData.images[jPos];\r\n//             // using only \"..._Zoom\" images from API response\r\n//             if (imageData.rel.match(/_Zoom/i)) {\r\n//               altImages.push(imageData.href);\r\n//             }\r\n//           }\r\n//           preparedProductData[hashKey] = { price: price, image: image, alt_images: altImages, extra_info: '' };\r\n//           // generating hash data for sub-combos, in order to have e.g. image changing in TT with partial-selections\r\n//           var hashKeyPieces = hashKey.split('--XX--');\r\n//           for (var jPos=1; jPos<hashKeyPieces.length; jPos++) {\r\n//             var hashKeyPartial = hashKeyPieces.slice(0, -jPos).join('--XX--');\r\n//             preparedProductData[hashKeyPartial] = preparedProductData[hashKey];\r\n//           }\r\n//           preparedProductData[hashKey].sku = sku;\r\n//           if (_ttDebug) {\r\n//             preparedProductData[hashKey].skuData = skuData;\r\n//           }\r\n//         }\r\n//       }\r\n//       if (ajaxError) {\r\n//         _ttAjaxStop = true;\r\n//       }\r\n//     }).fail(function(jqXHR, textStatus, errorThrown) {\r\n//       __utils__.echo('--- Ajax FAIL for ajaxCall = ' + JSON.stringify(this.ajaxCall) + ' @ ms ' + timePassed() );\r\n//       __utils__.echo('---> textStatus = ' + textStatus + ', errorThrown = ' + errorThrown );\r\n//       _ttAjaxStop = true;\r\n//     }).always(function(data_or_jqXHR, textStatus, jqXHR_or_errorThrown) {\r\n//       // this is run always, after \"done\" / \"fail\" (in either case!)\r\n//       _ttAjaxCallsCompleted++;\r\n//       // making combined Ajax call(s) to BestBuy API with all skus, for full-combos [Serban 2018-06-21]\r\n//       // -- we do this after all other Ajax calls (to full-page, for sub-combos) have completed\r\n//       // -- we do this only if \"_ttSkusAll\" is not empty\r\n//       // ---- i.e. only if the product has multiple attributes, or if we already made these API calls\r\n//       if (_ttAjaxCallsCompleted == _ttAjaxCallsTotal && _ttSkusAll.length) {\r\n//         // splitting all skus into chunks of length = the maximum \"pageSize\" allowed by BestBuy API\r\n//         var pageSize = 100;\r\n//         var skusChunks = [];\r\n//         while (_ttSkusAll.length) {\r\n//           skusChunks.push(_ttSkusAll.splice(0, pageSize));\r\n//         }\r\n//         // now \"_ttSkusAll\" is empty (due to splicing) => this \"if\" will not be executed again after API calls are completed\r\n//         for (var iPos=0; iPos<skusChunks.length; iPos++) {\r\n//           // generating an API call for each chunk of skus\r\n//           // -- requesting only the data we need for hash (faster than default data returned by API)\r\n//           var skusList = skusChunks[iPos].join(',');\r\n//           var ajaxUrl = 'https://api.bestbuy.com/v1/products(sku%20in(' + skusList + '))?apiKey=' + _ttApiKeyBB + '&format=json&pageSize=' + pageSize + '&show=sku,salePrice,largeFrontImage,images';\r\n//           var ajaxCall = { ajaxUrl: ajaxUrl };\r\n//           _ttAjaxCalls.push(ajaxCall);\r\n//           _ttAjaxCallsTotal++;\r\n//           if (_ttDebug) {\r\n//             __utils__.echo('--- generated API call URL = ' + ajaxUrl );\r\n//           }\r\n//         }\r\n//       }\r\n//       if (_ttAjaxCallsCompleted == _ttAjaxCallsTotal) {\r\n//         __utils__.echo('--- final Ajax call completed with status = ' + textStatus);\r\n//         // DISABLED injection of \"_ttMaxPrice\" for skus with \"see price in cart\" [Serban 2017-07-26]\r\n//         // -- instead, we make Ajax calls to full-page for these sku, to extract the correct price\r\n//         // -- DISABED -- START\r\n//         /*\r\n//         // injecting \"_ttMaxPrice\" into all combos with empty / invalid price (\"see price in cart\")\r\n//         __utils__.echo('--- _ttMaxPrice after Ajax calls = ' + _ttMaxPrice);\r\n//         for (var hashKey in preparedProductData) {\r\n//           if (!preparedProductData[hashKey]['price'].length && _ttMaxPrice) {\r\n//             preparedProductData[hashKey]['price'] = '$' + _ttMaxPrice;\r\n//             __utils__.echo('--- injecting \"_ttMaxPrice\" into combo with empty price = ' + hashKey);\r\n//           }\r\n//         }\r\n//         */\r\n//         // -- DISABED -- END\r\n//         // checking if any skus with \"see price in cart\" (or otherwise without price in hash) [Serban 2017-07-26]\r\n//         for (var hashKey in preparedProductData) {\r\n//           if (!preparedProductData[hashKey]['price'].length) {\r\n//             var sku = preparedProductData[hashKey]['sku'];\r\n//             __utils__.echo('--- found combo (sku ' + sku + ') with empty price => ' + hashKey);\r\n//             // checking if we already made an \"extra call\" for this sku [Serban 2017-10-31]\r\n//             if (_ttExtraCallSkus.indexOf(sku) < 0) {\r\n//               // generating full-page URL for \"extra calls\" to extract the correct price\r\n//               var ajaxUrlExtra = '/site/product/' + sku + '.p';\r\n//               var ajaxCallExtra = { ajaxUrl: ajaxUrlExtra, sku: sku, attrLevel: _ttAttributes.length };\r\n//               _ttAjaxCalls.push(ajaxCallExtra);\r\n//               _ttExtraCallSkus.push(sku);\r\n//             }\r\n//             else {\r\n//               // we have already made an \"extra call\" for this sku\r\n//               // -- this means that the price extraction failed even from the \"full page\"\r\n//               __utils__.echo('--- NOT making additional \"extra call\" for this sku, to avoid infinite loop');\r\n//             }\r\n//           }\r\n//         }\r\n//         // checking if any more calls added to \"_ttAjaxCalls\" (i.e. \"extra calls\" for skus with \"see price in cart\")\r\n//         if (_ttAjaxCalls.length) {\r\n//           __utils__.echo('--- starting \"extra calls\" to extract price for skus with \"see price in cart\" @ ms ' + timePassed() );\r\n//           _ttAjaxCallsTotal += _ttAjaxCalls.length;\r\n//           __utils__.echo('--- number of \"extra calls\" to be made = ' + _ttAjaxCalls.length);\r\n//           _ttAjaxCallNext(); // added \"extra calls\" to \"_ttAjaxCalls\" => starting the next Ajax call\r\n//         }\r\n//         else {\r\n//           __utils__.echo('--- completed Ajax calls for attributes @ ms ' + timePassed() );\r\n//           //productOptsBlock = false; // ready to exit from prod-opts-JS\r\n//           _ttCheckObj.attrAjaxCall = true;\r\n//           _ttCheckAjaxCalls();\r\n//         }\r\n//       }\r\n//       else {\r\n//         _ttAjaxCallNext(); // completed non-final Ajax call => starting the next Ajax call\r\n//       }\r\n//     });\r\n//     // Ajax call -- END\r\n//   };\r\n\r\n  \r\n//   // starting Ajax calls only when reading the product\r\n//   // -- the calls are executed in parallel (e.g. 3 calls at a time, if _ttAjaxSlots = 3)\r\n//   if (_ttAjaxCallsTotal && _t_productPageStatus=='product_info') {\r\n//     productOptsBlock = true; // preventing an early exit from prod-opts-JS (at least one Ajax call to be made)\r\n//     for (var ajaxSlot=1; ajaxSlot<=_ttAjaxSlots; ajaxSlot++) {\r\n//       _ttAjaxCallNext();\r\n//     }\r\n//   }else{\r\n//     _ttCheckObj.attrAjaxCall = true;\r\n//   }\r\n  \r\n//   //\r\n//   // AJAX HACK -- END\r\n//   //\r\n  \r\n//   // GET function for color / generic attributes\r\n//   _ttAttributeGet = function(idx) {\r\n//     var result = [];\r\n//     // generating partial hashKey, for the current selection (sub-combo)\r\n//     var hashKeyPartial = '';\r\n//     for (var iPos=0; iPos<idx-1; iPos++) {\r\n//       hashKeyPartial += _ttFillValues[iPos] + '--XX--';\r\n//     }\r\n//     // parsing combos in preparedProductData\r\n//     var hashKeys = Object.keys(preparedProductData);\r\n//     for (var iPos=0; iPos<hashKeys.length; iPos++) {\r\n//       var hashKey = hashKeys[iPos];\r\n//       // checking if hashKey starts with hashKeyPartial, for non-first attributes\r\n//       if (idx >= 2 && hashKey.indexOf(hashKeyPartial) !== 0) {\r\n//         continue; // this combo does not match the current selection (sub-combo)\r\n//       }\r\n//       var elValue = hashKey.split('--XX--')[idx-1];\r\n//       if (result.indexOf(elValue) >= 0) {\r\n//         continue; // skipping this value (already added to result)\r\n//       }\r\n//       result.push(elValue);\r\n//     }\r\n//     // sorting values in \"result\" (because we parsed them as they appear in the hash, not in the page)\r\n//     var resultSorted = [];\r\n//     // fix for random timeout due to property \"length\" of undefined - i.e. \"_ttOptsSorted[idx-1]\" undefined [Serban 2018-10-15]\r\n//     if (_ttOptsSorted[idx-1]) {\r\n//       var optsSorted = _ttOptsSorted[idx-1];\r\n//       for (var iPos=0; iPos<optsSorted.length; iPos++) {\r\n//         var elValue = optsSorted[iPos];\r\n//         if (result.indexOf(elValue) >= 0) {\r\n//           resultSorted.push(elValue);\r\n//         }\r\n//       }\r\n//     }\r\n//     return resultSorted;\r\n//   };\r\n  \r\n//   // SET function for color / generic attributes\r\n//   _ttAttributeSet = function(idx, fillValue) {\r\n//     __utils__.echo('--- option ' + idx + ' fillValue = ' + fillValue);\r\n//     var changed = false;\r\n//     // relying on data generated via Ajax calls when reading the product\r\n//     if (_t_productPageStatus == 'product_info') {\r\n//       // updating images with the first match from preparedProductData, if this is the first attribute (i.e. color / option [1])\r\n//       if (idx == 1) {\r\n//         jQuery(\"img.ttAltImage\").remove();\r\n//         // parsing combos in preparedProductData\r\n//         var hashKeyPartial = fillValue + '--XX--';\r\n//         var hashKeys = Object.keys(preparedProductData);\r\n//         for (var iPos=0; iPos<hashKeys.length; iPos++) {\r\n//           var hashKey = hashKeys[iPos];\r\n//           // adding \"--XX--\" in case the product only has 1 attribute (color), because \"hashKeyPartial\" also includes \"--XX--\"\r\n//           // -- we do this in order to avoid incorrect partial matches - e.g. \"Black\" at the start of \"Black/White\"\r\n//           var hashKeySafe = hashKey + '--XX--';\r\n//           if (hashKeySafe.indexOf(hashKeyPartial) === 0) {\r\n//             // this combo matches the current color / option [1]\r\n//             var hashData = preparedProductData[hashKey];\r\n//             jQuery(\"img#ttImage\").attr('src', hashData['image']);\r\n//             jQuery(hashData['alt_images']).each(function() {\r\n//               jQuery(\"body\").append('<img class=\"ttAltImage\" src=\"' + this + '\">');\r\n//             });\r\n//             break; // stop parsing combos (match found)\r\n//           }\r\n//         }\r\n//       }\r\n//       _ttFillValues[idx-1] = fillValue;\r\n//       changed = true;\r\n//     }\r\n//     // selecting the option only during Purchase / Pickup\r\n//     if (_t_productPageStatus != 'product_info') {\r\n//       // IF THIS CODE CHANGES, UPDATE IT IN ADD-TO-CART > JS steps where we re-define stuff after redirect !!!\r\n//       // -- new selector due to changed HTML [Serban 2017-11-01]\r\n//       // -- must match both \"variation-wrapper\" and \"shop-variation-wrapper\" [Serban 2018-01-26]\r\n//       //var opts = jQuery(\"div[data-variation-type]:eq(\" + (idx-1) + \") ul li:not(.disabled) a[data-refresh-url]\");\r\n//       var opts = jQuery(\"div[class*='variation-wrapper']:eq(\" + (idx-1) + \") ul li:not(.disabled) a[href]\");\r\n//       for (var iPos=0; iPos<opts.length; iPos++) {\r\n//         var el = opts[iPos];\r\n//         var elValue = _ttGetOptValue(el);\r\n//         __utils__.echo('---> el value = ' + elValue );\r\n//         if (elValue == fillValue) {\r\n//           // forcing redirect to href (non-\"#\") during Purchase / Pickup, to trigger the selection\r\n//           if (el.href.length > 1) {\r\n//             location.href = el.href;\r\n//             changed = true;\r\n//           }\r\n//           else {\r\n//             //__utils__.mouseEvent('click', el); // WARNING! this fallback method does NOT trigger the selection ok [2016-07-25]\r\n//             __utils__.echo('--- ERROR! - could not force redirect to href, to trigger the selection');\r\n//             // we return \"false\" in this case, because otherwise the product may be added to cart with the wrong options!\r\n//           }\r\n//         }\r\n//       }\r\n//     }\r\n//     return changed;\r\n//   };\r\n  \r\n//   // updating price from \"Unactivated device\" - for products with \"add to package\" (price per contract / per month)\r\n//   // -- updated for new format with \"pricing options\" [Serban 2016-10-21]\r\n//   // -- e.g. http://www.bestbuy.com/site/apple-iphone-7-plus-32gb-gold-verizon/5581613.p\r\n//   // -- we also use this method during Ajax calls\r\n//   var priceDiv = __utils__.findOne(_ttPriceSelector);\r\n//   var priceUnactivated = __utils__.findOne(_ttUnactivatedXpath);\r\n//   if (priceDiv && priceUnactivated) {\r\n//     priceDiv.textContent = priceUnactivated.textContent.trim();\r\n//     __utils__.echo('--- updated price from \"Unactivated device\" = ' + priceDiv.textContent);\r\n//   }\r\n  \r\n//   // injecting custom image and alt-images\r\n//   var imagesData = _ttGetImages(document.body);\r\n//   jQuery(\"body\").append('<img id=\"ttImage\" src=\"' + imagesData['image'] + '\">');\r\n//   jQuery(imagesData['alt_images']).each(function() {\r\n//     jQuery(\"body\").append('<img class=\"ttAltImage\" src=\"' + this + '\">');\r\n//   });\r\n  \r\n//   // tracking fillValues for currently-selected options\r\n//   _ttFillValues = []; // e.g. ['Black', '128GB', '2.5GHz']\r\n  \r\n//   // requesting weight data from bestbuy API - [JG] 2017-02-24\r\n//   _ttGetProductSku = function() {\r\n//     if (typeof window.pdp !== 'undefined' && window.pdp.storeFinder && window.pdp.storeFinder.skuId) {\r\n//       __utils__.echo('--- SUCCESS: got productSku from window.pdp.storeFinder.skuId: ' + window.pdp.storeFinder.skuId);\r\n//       return window.pdp.storeFinder.skuId;\r\n//     }\r\n  \r\n//     var productSkuFromDiv = jQuery(\"[itemprop='productSku']\").text().replace(/item|\\s+|#/gi, '').trim();\r\n//     if (productSkuFromDiv) {\r\n//       __utils__.echo('--- SUCCESS: got productSku from DIV: ' + productSkuFromDiv);\r\n//       return productSkuFromDiv;\r\n//     }\r\n  \r\n//     var productSkuFromURLPath = location.pathname.split('/').pop().replace(/\\.p$/gi, '').trim();\r\n//     if (productSkuFromURLPath) {\r\n//       __utils__.echo('--- SUCCESS: got productSku from productSkuFromURLPath: ' + productSkuFromURLPath);\r\n//       return productSkuFromURLPath;\r\n//     }\r\n  \r\n//     var locationUrl = location.search.replace('?', '').split(\"&\");\r\n//     var locationUrlArgs = {};\r\n//     jQuery(f).each(function(x) {\r\n//       var _this = f[x];\r\n//       var prop = _this.split('=')[0];\r\n//       var val = _this.split('=')[1];\r\n//       locationUrlArgs[prop] = val;\r\n//     });\r\n//     if (locationUrlArgs.skuId) {\r\n//       __utils__.echo('--- SUCCESS: got productSku from locationUrlArgs: ' + locationUrlArgs.skuId);\r\n//       return locationUrlArgs.skuId;\r\n//     }\r\n//   };\r\n  \r\n//   _ttGetProductWeight = function(productSku) {\r\n//     var requestURL = \"https://api.bestbuy.com/v1/products/\"  + productSku + \".json?apiKey=\" + _ttApiKeyBB;\r\n//     __utils__.echo(\"--- Requesting weight for productSku: \" + productSku);\r\n//     __utils__.echo(\"--- Request url: \" + requestURL);\r\n  \r\n//     jQuery.getJSON(requestURL, function(result) {\r\n//       if (result && (result.shippingWeight || result.weight)) {\r\n//         // in some cases the weight might be null\r\n//         var weight = result.weight || 0;\r\n//         var parsedWeight = parseFloat(weight.toString().replace(/[^0-9.]+/g,''));\r\n  \r\n//         if(weight && weight.toString().match(/ounce/gi)){\r\n//           weight = parsedWeight*0.0625;\r\n//         }else{\r\n//           weight = parsedWeight;\r\n//         }\r\n  \r\n//         var shippingWeight = result.shippingWeight || 0;\r\n  \r\n//         var ttWeight = 2.20; // lbs - default weight\r\n  \r\n//         ttWeight = shippingWeight || ttWeight;\r\n  \r\n//         // sometimes shipping weight might be smaller than shippingWeight, in that case we will use the normal weight of the product\r\n//         if(weight && weight > shippingWeight){\r\n//           ttWeight = weight;\r\n//         }\r\n  \r\n//         jQuery('<div>', {\r\n//           id: 'ttWeightDiv',\r\n//           text: ttWeight + ' lbs'\r\n//         }).appendTo(document.body);\r\n//         __utils__.echo('--- INFO: Injecting weight: ' + ttWeight);\r\n//         __utils__.echo('--- DONE: weight Ajax calls completed @ ms ' + timePassed() );\r\n//         //productOptsBlock = false;\r\n//         _ttCheckObj.weightAjaxCall = true;\r\n//         _ttCheckAjaxCalls();\r\n//       }else{\r\n//         //productOptsBlock = false;\r\n//         _ttCheckObj.weightAjaxCall = true;\r\n//         _ttCheckAjaxCalls();\r\n//         __utils__.echo('--- FAIL: Request did not return product data');\r\n//         __utils__.echo('--- INFO: Injecting default weight');\r\n//         jQuery('<div>', {\r\n//           id: 'ttWeightDiv',\r\n//           text: '2.20 lbs'\r\n//         }).appendTo(document.body);\r\n//       }\r\n//     }).fail(function(jqXHR, textStatus, errorThrown) {\r\n//       // hack for Ajax-call failing for Weight as of 2017-04-13 [Serban 2017-04-13]\r\n//       // -- we inject a hardcoded Weight value (~1000g), otherwise TT fails to open the product\r\n//       jQuery('<div>', {\r\n//         id: 'ttWeightDiv',\r\n//         text: '2.20 lbs'\r\n//       }).appendTo(document.body);\r\n//       //productOptsBlock = false;\r\n//       _ttCheckObj.weightAjaxCall = true;\r\n//       _ttCheckAjaxCalls();\r\n//       __utils__.echo('--- FAIL: Request failed with status: ' + textStatus + ', ' + errorThrown);\r\n//     });\r\n//   };\r\n  \r\n//   var _ttProductSku = _ttGetProductSku();\r\n//   if (_ttProductSku) {\r\n//     productOptsBlock = true;\r\n//     _ttGetProductWeight(_ttProductSku);\r\n//   } else {\r\n//     __utils__.echo('--- FAIL: Could not get productSku!');\r\n//   }\r\n\r\n//   // injecting brand from store-defined data [Serban 2017-11-01]\r\n//   if (typeof track == 'object' && track['gptDataObject'] && track['gptDataObject']['targetBrand']) {\r\n//     jQuery(\"body\").append('<div id=\"ttBrand\">' + track['gptDataObject']['targetBrand'] + '</div>');\r\n//   }\r\n\r\n// }\r\n// //// code for bestbuy.com (NOT for pacificsales.com) -- END\r\n\r\n// ////\r\n\r\n// //// code for pacificsales.com (NOT for bestbuy.com) -- START\r\n// if (location.host.indexOf('pacificsales.com') >= 0) {\r\n\r\n//   // injecting stuff from store-defined data [Serban 2018-04-04]\r\n//   if (typeof PS == 'object' && PS.pdp && PS.pdp.sku) {\r\n//     // injecting weight\r\n//     if (PS.pdp.sku.weight) {\r\n//       jQuery(\"body\").append('<div id=\"ttWeightDiv\">' + PS.pdp.sku.weight + '</div>');\r\n//     }\r\n//     else {\r\n//       // injecting hardcoded Weight value (~1000g), otherwise TT fails to open the product [Serban 2018-05-07]\r\n//       // -- if no weight in store-defined data\r\n//       // -- https://www.pacificsales.com/pdp/Viking-Freestanding-Double-Oven-Gas-Convection-Range-Burgundy/4364628\r\n//       jQuery(\"body\").append('<div id=\"ttWeightDiv\">2.20 lbs</div>');\r\n//     }\r\n//     // injecting brand\r\n//     if (PS.pdp.sku.brand) {\r\n//       jQuery(\"body\").append('<div id=\"ttBrand\">' + PS.pdp.sku.brand + '</div>');\r\n//     }\r\n//   }\r\n\r\n//   // fixing description [Serban 2018-04-04]\r\n//   var descDivs = __utils__.findAll(_t_productPageSelectors.description);\r\n//   // -- injecting newline before Specifications headers\r\n//   jQuery(descDivs).find(\"table thead\").prepend('<br>');\r\n//   // -- removing feature with link \"Need more information?\"\r\n//   // ---- https://www.pacificsales.com/pdp/Viking-Professional-7-Series-6-3-Cu-Ft-Self-Cleaning-Freestanding-Double-Oven-Dual-Fuel-Convection-Range-White/8934651\r\n//   jQuery(descDivs).find(\"div.features:contains('Need more information')\").remove();\r\n// }\r\n// //// code for pacificsales.com (NOT for bestbuy.com) -- END\r\n","coupon_recording":[{"type":20,"info":{"selector":"#crash","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null,"has_custom_selector":true}},{"type":2,"info":{"tagName":"INPUT","value":"14","name":"super_attribute[219]","type":"text","id":"attribute219","title":"","options":null,"selector":"input#promotionCode","has_custom_selector":true,"frame":"","timeout":"","comment":"","is_optional":"no","checked":null},"text":"Choose an Option...SMXL3XL","field_key":"","field_type":""},{"type":20,"info":{"selector":"button.promotions__apply-btn","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","options":null,"comment":"","has_custom_selector":true,"checked":null}}],"coupon_recording_info":{"noauth_start_idx":"85"},"coupon_recording_error_div":{"selector":"//span[contains(text(), 'Sorry, we didn’t recognize your promo code')] | //span[contains(text(), 'Sorry, but the promo code')]","has_custom_selector":true},"order_id_div_auth":null,"description_div":{"selector":"//div[contains(@id,'long-description')]/node()[not(self::a)] | //div[@id='features']/div[contains(@class,'feature')] | //div[@id='movie-details-content'] | //div[contains(@class,'shop-whats-included')] | //div[contains(@class, 'overview-features')] | //section[contains(@class,'pdpMiddle')]//div[contains(@class,'productDesc') or contains(@class,'productFeatures') or contains(@class,'compare-specifications')] | //div[contains(@class,'shop-product-description')]//div[contains(@class,'long-description-containe')]","has_custom_selector":true},"returns":"<p><strong>Returns &amp; Exchanges</strong></p>\r\n\r\n<p><strong>Our Promise</strong><br />\r\nWe promise to be your trusted partner for technology by delivering the advice, service and convenience you deserve &mdash; all at competitive prices. If you are not fully satisfied with your purchase, let us help you with a replacement, return or repair.</p>\r\n\r\n<p><strong>Return &amp; Exchange Periods</strong><br />\r\nTime period begins the day you receive your product and applies to new, clearance, open-box, refurbished and pre-owned products.<br />\r\n- Most Products: 15 days<br />\r\n- Cell Phones, and Devices that Can Be Activated: 14 days</p>\r\n\r\n<p><strong>Restocking Fees</strong><br />\r\nThe following items have a restocking fee if returned by any customer, including My Best Buy&reg; Elite and My Best Buy&reg; Elite Plus customers.<br />\r\n- Cell Phones and Devices that Can Be Activated, and Unlocked Phones: $35<br />\r\n- Built-In Cooktops, Built-In Refrigerators, Built-In Wall Ovens, Drones, DSLR Cameras and Lenses, Mirrorless Cameras and Lenses, Projectors, Rideables and Special Order Products: 15% of item purchase price</p>\r\n\r\n<p>There is no restocking fee if the product is unopened or if the purchase and the return both occur within: AL, CO, HI, IA, MS, OH, OK, SC and where prohibited by law. The restocking fee will be taxed in select states.</p>\r\n\r\n<p><strong>How to Return an Item</strong></p>\r\n\r\n<p>Gather the purchases you want to return, along with the original contents and packaging.</p>\r\n\r\n<p><strong>Return in Store</strong><br />\r\nYou may return any item purchased on BestBuy.com at any Best Buy store. For faster return processing, please bring your receipt or packing slip, the credit card used to make your purchase, and a valid photo ID.</p>\r\n\r\n<p><strong>Return by Mail via the Carrier of Your Choice</strong><br />\r\nPlace the Return Form portion of your packing slip in the box with your return. If you do not have your packing slip, you may get a pre-populated Return Form by looking up your order at [https://www-ssl.bestbuy.com/profile/ss/orderlookup]. If you can&#39;t locate your order, print a blank Return Form at [https://img.bbystatic.com/BestBuy_US/en_US/images/abn/helptopics/images/returnsandexchange/ecc-shipping-form.pdf] and fill it out. Then, place the completed form in the box with your return. Put the return label on the package, add postage and mail it via the carrier of your choice.</p>\r\n\r\n<p><strong>Use Our Prepaid Return Label</strong><br />\r\nPay nothing up front. Follow the instructions for printing a Prepaid Return Label at [https://www.bestbuy.com/prepaidlabel]. Include the packing slip or Return Form in the box with your return. Put the prepaid return label on the package and take it to an authorized UPS drop-off location. The return shipping fee may be deducted from your refund.</p>\r\n\r\n<p><strong>Refund Method &amp; Timing</strong></p>\r\n\r\n<p>With a few exceptions, we will reimburse you for returned items in the same way you paid for them. If you prefer, you can make an exchange for the same item.</p>\r\n\r\n<p>For returns by mail, once we receive your return, we will process it within 2&ndash;3 business days. Depending on your bank&#39;s processing time, it may take up to 7 days after we process the return to reflect on your account.</p>\r\n\r\n<p>If you paid more than $800 in cash or more than $250 by check or by a debit card without a major credit card logo, we will refund you by check within 10 business days. Any amounts deducted from a gift card will be credited to the gift card. If you no longer have the gift card used for an order, please call us at 1-888-BEST BUY (1-888-237-8289) with your order number handy, and we&#39;ll be happy to send you a replacement.</p>\r\n\r\n<p><strong>Special Considerations</strong></p>\r\n\r\n<p><strong>Return Shipping Fees</strong><br />\r\nIf you return an item using a prepaid method from our Online Returns Center, and the reason for return is not a result of a Best Buy error, the cost of return shipping will be deducted from your refund.</p>\r\n\r\n<p>Estimated return shipping fees will be displayed within the Online Returns Center when you are choosing the prepaid return label method for your return.</p>\r\n\r\n<p>If the return is the result of a Best Buy error, we&#39;ll refund return shipping costs as well.</p>\r\n\r\n<p><strong>Damaged, Defective or Incorrect Items</strong><br />\r\nIf you receive a product that is damaged in shipping, defective or that is not the product you ordered, please return it to a Best Buy store and we&#39;ll arrange for a replacement. If you would rather return the item by mail, please call us for special instructions at 1-888-BEST BUY (1-888-237-8289). We will cover all reasonable and customary ground shipping fees.</p>\r\n\r\n<p><strong>Delivery of Major Appliances</strong><br />\r\nOnce delivery is accepted by a customer, if defects and/or damage is identified please contact Best Buy within 48 hours of the delivery day. Contact Best Buy by calling 1-888-Best-Buy (1-888-237-8289).</p>\r\n\r\n<p><strong>Connected Devices</strong><br />\r\nPlease make sure that all data has been removed and the device is no longer linked to any cloud account or to any other device so that we may accept the return of this product.</p>\r\n\r\n<p><strong>Cell Phones and Devices with a Carrier Contract</strong><br />\r\nIf you decide to return a phone or device with a carrier contract, you are responsible for canceling your service contract with the carrier, and for all carrier charges.&nbsp;<br />\r\nThere are two ways to return your phone or device and cancel your service:</p>\r\n\r\n<p>- Return your device to a Best Buy store. Be sure to tell the store associate that you want to cancel your service. Carrier service cancellation policies may vary.<br />\r\n- Call Best Buy Mobile at 1-877-702-2211 (6 a.m. to midnight, CT) for instructions on how to return the device by mail. Let the phone associate know that you want to cancel your service.</p>\r\n\r\n<p><strong>Final Sale and Nonreturnable Items</strong><br />\r\nAll Final Sale merchandise cannot be returned. Other nonreturnable purchases include custom orders, digital content, prepaid cards, gift packaging, memberships, completed services, opened consumable items including batteries, cleaning agents, oils, ink and 3D printer filament, and items returned that are damaged, unsanitary, missing major contents or not in a like-new condition.</p>\r\n\r\n<p><strong>Gifts</strong><br />\r\nWe will provide you store credit for the purchase price of a gift you return in store. For gifts returned via mail, we will credit the gift purchaser and notify them via e-mail.</p>\r\n\r\n<p><strong>Wedding Registry Items</strong><br />\r\nMost items purchased from the Wedding Registry can be returned within 60 days of purchase. Items need to be linked to the Registry at the time of purchase to receive the extended return period. The 60-day return term applies to all customers including My Best Buy Elite and Elite Plus customers and to all products sold by Best Buy, except for cell phones and devices with a carrier contract which can be returned within 14 days of purchase. All other terms and conditions of the Best Buy Return &amp; Exchange Promise apply.</p>\r\n\r\n<p><strong>Software, Movies, </strong><strong>Music</strong><strong> and Games</strong><br />\r\nOpened computer software, movies, music or video games can only be exchanged for an identical item.</p>\r\n\r\n<p><strong>Apparel</strong><br />\r\nWe are happy to accept returned apparel that has not been used, worn, laundered and has its original tags attached.</p>\r\n\r\n<p><strong>Missing Packaging or Accessories</strong><br />\r\nIf you do not have all the original packaging or accessories, that&#39;s okay too. We can process a return with a nonrefundable deduction on your refund for what is missing.</p>\r\n\r\n<p><strong>Best Buy Express&trade;, Best Buy For Business&trade;, and Best Buy Education&trade; Returns in Store</strong><br />\r\nMost products you buy at a Best Buy Express location, or though Best Buy For Business or Best Buy Education can be returned at our stores.</p>\r\n\r\n<p><strong>Custom Orders</strong><br />\r\nCustom and personalized orders made especially for you are nonreturnable. Custom Order items are items where a customer has requested specific attributes (e.g., finish, color, size) or where a manufacturer builds only to order.</p>\r\n\r\n<p><strong>Bundle or Promotional Discount Items</strong><br />\r\nIf you return an item bought as part of a bundle or with a promotional discount and you do not return everything &mdash; not to worry. We will reimburse you for what you do return, minus the value of the discount or freebie.</p>\r\n","final_price_div_local":{"tagName":"SPAN","id":"","title":"","options":null,"selector":"#checkout-content .total .pull-right, div.order-summary__total div.order-summary__price span.cash-money","url":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17013&type=page","recording_idx":"47","has_custom_selector":true,"frame":""},"sales_tax_div_local":{"tagName":"SPAN","id":"","title":"","options":null,"selector":"#checkout-content .sales-tax .pull-right, div.order-summary__bd div.order-summary__tax","url":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17013&type=page","recording_idx":"47","has_custom_selector":true,"frame":""},"order_id_div_local":{"selector":"//div[contains(@class,'order-number')] | //div[contains(@class,'marketplace-number')] | //div[contains(@class,'thank-you__bd')]//div[contains(@class,'thank-you__msg')][not(contains(.,'@'))]","has_custom_selector":true,"frame":""},"checkout_recording_local":[{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// TO BE FIXED if we get purchase with local checkout !!! [Serban 2017-09-19]\r\n// -- SEE EXAMPLE from JS selecting \"Shipping\" options + similar CLICK with HIGH TIMEOUT !!!\r\n//clicking on \"store pickup\" inputs\r\njQuery(\"input[value='IN_STORE_PICKUP']\").click();","timeout":"","task":"product_store_select","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"selector":".bonus-item-remove, .bonus-items a[action-remove-bonus-item]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","task":"","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//removing all the free digital items if any\r\n//jQuery(\".bonus-item-remove\").click();\r\njQuery(\".bonus-items a[action-remove-bonus-item]\").click();","timeout":"","task":"","options":null,"comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","task":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"href":"http://www.bestbuy.com/cart/checkout","tagName":"A","name":"","type":"","id":"","title":"","options":null,"selector":"#checkout a.btn.btn-block.btn-lg.checkout-btn","is_optional":"no","frame":"","timeout":"50000","task":"","comment":"","has_custom_selector":true,"checked":null},"x":992,"y":1286,"text":"Checkout"},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"Sleep needed here, to avoid clicking on \"Checkout\" twice, without a page-redirect between them.","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// catching errors and forcing stop (if error found)\r\nvar errorFound = false;\r\nvar errorsList = document.querySelector(\".alert-warning .details\");\r\nif (errorsList) {\r\n  var errors = errorsList.querySelectorAll(\"li\");\r\n  for (var iPos=0; iPos<errors.length; iPos++) {\r\n    __utils__.echo('--- adjusting error message: ' + errors[iPos].textContent.trim());\r\n    errors[iPos].textContent = errors[iPos].textContent.replace('This item has been removed from your order.', '').trim();\r\n    errorFound = true;\r\n  }\r\n}\r\nif (errorFound) {\r\n  // forcing STOP here, by deleting the \"Checkout\" button\r\n  jQuery(\"#checkout a.btn.btn-block.btn-lg.checkout-btn\").remove();\r\n}","timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"#checkout a.btn.btn-block.btn-lg.checkout-btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"Re-clicking on \"Checkout\", in case we are back in the Cart page with this notification from the store: \"Your shipping options may have changed. Please review your shipping options and then click Checkout to continue with your order.\"","options":null,"has_custom_selector":true,"checked":null}},{"type":20,"info":{"href":"https://www-ssl.bestbuy.com/identity/guest?token=cKHLGSTVj%2F0VZVKmZ%2FWVoZr0m8s7PbbgfGL484kLpNtQEI%2BOPwTF%2F1zrQED6k9GDcQLmNIcTIJcCOrMgcBo6wwDPUjN45J6vi1%2FAYAIURw1f5zjPpRUAK4D73yN045T%2FluxVcaN3q2GgBfT5X6W4%2Bx5YWyAEmrbIgFH0pvaF4uleZ650Y3QggsPlNFcnJKjUAMIMrAlF%2BIptvEyZMBSyykhY1rk%2BRbjHoOlw4f561IBHnQOUhgDc%2Fgo8QR8nZrPqrY%2BfbwaHh4dmQpWXMR3KmQOqczZy%2FxAIlRYolGNMd4N5GVw3Y8j54yVPOKbmnK%2BXct3GywBPoIMEmMPlwi8JyigNLSVAf%2B4xLSU8ZkWF98nXJ%2FrVB2yuTjp468tlXF07kVqCDNLq6%2FV0phcCd4sXS4S7YXRqfQJiOPPZcfHa99ep8MMHQYt%2B2tzZ8UzjvVh3haorgr0NVVIzseLeStA0MWJVvkH%2F2Kd22V11U9qQe7x%2Bu2eEyeB0ntoi4qwQhEcCp0DBMEzz%2BWmbCYbrMEqdmAi3%2Binc8Qu4yTHg7eG1JJ%2FdUADxpzsY7jfNxa9pwVD7","tagName":"A","name":"","type":"","id":"","title":"","options":null,"selector":"a.cia-guest-content__continue","is_optional":"no","frame":"","timeout":"60000","task":"","comment":"","checked":null},"x":985,"y":331,"text":"Continue as Guest"},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"7000","js_code":null,"timeout":"","task":"","options":null,"comment":"","checked":null}},{"type":2,"info":{"selector":"//div[contains(@class,'line-items-list')]/div[not(contains(@class,'header'))][1]//input[contains(@name,'email')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"email","field_type":""},{"type":20,"info":{"selector":"//div[contains(@class,'line-items-list')]/div[not(contains(@class,'header'))][1]//a[contains(@class,'email-apply')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2500","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//going back to shipping page if any digital item is still in the cart\r\nvar digItem = document.querySelector('.digital-item');\r\nif(digItem){\r\n  jQuery(\"div.checkout-continue div.back-to-page a\").click();\r\n}","timeout":"","task":"","options":null,"comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","task":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//removing all the free digital download - items\r\njQuery('div.js-digital-delivery-group-container a.remove-line-item').click();","timeout":"","task":"","options":null,"comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//button[contains(., 'Someone Else')] | //label[contains(text(), 'Someone else will')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"60000","comment":"","options":null,"has_custom_selector":true,"checked":null}},{"type":2,"info":{"selector":"section.pickup-person > div input[name='firstName'], input[id*='pickup-agent-first-name-']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"has_custom_selector":true,"checked":null},"field_key":"shipping_first_name","field_type":""},{"type":2,"info":{"selector":"section.pickup-person > div input[name='lastName'], input[id*='pickup-agent-last-name-']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"has_custom_selector":true,"checked":null},"field_key":"shipping_last_name","field_type":""},{"type":2,"info":{"selector":"section.pickup-person > div input[name='emailAddress'], input[id*='pickup-agent-email-']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"has_custom_selector":true,"checked":null},"field_key":"email","field_type":""},{"type":2,"info":{"selector":"input[name='smsNotifyNumber'], section.pickup-person > div input[name='phone'], input[id*='pickup-agent-phone-']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"has_custom_selector":true,"checked":null},"field_key":"shipping_telephone","field_type":""},{"type":20,"info":{"selector":"div.age-verification-content a.verify","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"selector":"section.contact-information input[name='emailAddress']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"email","field_type":""},{"type":2,"info":{"selector":"input[name='phone']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"billing_telephone","field_type":""},{"type":20,"info":{"selector":"div.checkout-continue a.continue, div[class*='continue'] button","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","task":"","options":null,"comment":"","has_custom_selector":true,"checked":null}},{"type":20,"info":{"tagName":"INPUT","value":"","checked":null,"name":"number","type":"tel","src":"","id":"creditCard","title":"","options":null,"label":"Credit Card Number","selector":"#checkout-content input#creditCard, input[name='card-number']","is_optional":"no","frame":"","timeout":"60000","task":"","comment":"","has_custom_selector":true},"x":456,"y":699,"text":""},{"type":2,"info":{"selector":"#checkout-content input#creditCard, input[name='card-number']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","task":"","options":null,"comment":"","has_custom_selector":true,"checked":null},"field_key":"card_number","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"231","checked":null,"name":"securityCode","type":"text","src":"","id":"securityCode","title":"","options":null,"label":"Security Code","selector":"#checkout-content input#securityCode, input[name='security-code']","is_optional":"no","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true},"text":"","field_key":"cvv","field_type":""},{"type":20,"info":{"tagName":"SELECT","value":"","name":"expirationMonth","type":"select-one","id":"expirationMonth","title":"","options":[{"text":"Month","value":""},{"text":"01","value":"01"},{"text":"02","value":"02"},{"text":"03","value":"03"},{"text":"04","value":"04"},{"text":"05","value":"05"},{"text":"06","value":"06"},{"text":"07","value":"07"},{"text":"08","value":"08"},{"text":"09","value":"09"},{"text":"10","value":"10"},{"text":"11","value":"11"},{"text":"12","value":"12"}],"label":"Expiration Month","selector":"#checkout-content select#expirationMonth, select[name='expiration-month']","is_optional":"no","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true,"checked":null,"text_only":""},"x":367,"y":867,"text":"Month010203040506070809101112"},{"type":2,"info":{"tagName":"SELECT","value":"07","name":"expirationMonth","type":"select-one","id":"expirationMonth","title":"","options":[{"text":"Month","value":""},{"text":"01","value":"01"},{"text":"02","value":"02"},{"text":"03","value":"03"},{"text":"04","value":"04"},{"text":"05","value":"05"},{"text":"06","value":"06"},{"text":"07","value":"07"},{"text":"08","value":"08"},{"text":"09","value":"09"},{"text":"10","value":"10"},{"text":"11","value":"11"},{"text":"12","value":"12"}],"label":"Expiration Month","selector":"#checkout-content select#expirationMonth, select[name='expiration-month']","is_optional":"no","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true,"checked":null,"text_only":""},"text":"Month010203040506070809101112","field_key":"expiry_date_month","field_type":""},{"type":20,"info":{"tagName":"SELECT","value":"","name":"expirationYear","type":"select-one","id":"expirationYear","title":"","options":[{"text":"Year","value":""},{"text":"2015","value":"2015"},{"text":"2016","value":"2016"},{"text":"2017","value":"2017"},{"text":"2018","value":"2018"},{"text":"2019","value":"2019"},{"text":"2020","value":"2020"},{"text":"2021","value":"2021"},{"text":"2022","value":"2022"},{"text":"2023","value":"2023"},{"text":"2024","value":"2024"},{"text":"2025","value":"2025"}],"label":"Expiration Year","selector":"#checkout-content select#expirationYear, select[name='expiration-year']","is_optional":"no","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true,"checked":null,"text_only":""},"x":469,"y":849,"text":"Year20152016201720182019202020212022202320242025"},{"type":2,"info":{"tagName":"SELECT","value":"2018","name":"expirationYear","type":"select-one","id":"expirationYear","title":"","options":[{"text":"Year","value":""},{"text":"2020","value":"2020"},{"text":"2021","value":"2021"},{"text":"2022","value":"2022"},{"text":"2023","value":"2023"},{"text":"2024","value":"2024"},{"text":"2025","value":"2025"}],"label":"Expiration Year","selector":"#checkout-content select#expirationYear, select[name='expiration-year']","is_optional":"no","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true,"checked":null,"text_only":""},"text":"Year20152016201720182019202020212022202320242025","field_key":"expiry_date_year","field_type":""},{"type":20,"info":{"tagName":"INPUT","value":"","checked":null,"name":"firstName","type":"text","src":"","id":"firstName","title":"","options":null,"label":"First Name","selector":"input[name='firstName']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"x":363,"y":1295,"text":""},{"type":2,"info":{"tagName":"INPUT","value":"lkqwejl","checked":null,"name":"firstName","type":"text","src":"","id":"firstName","title":"","options":null,"label":"First Name","selector":"input[name='firstName']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_first_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"qlkwejql","checked":null,"name":"lastName","type":"text","src":"","id":"lastName","title":"","options":null,"label":"Last Name","selector":"input[name='lastName']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_last_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"913 oakes st","checked":null,"name":"street","type":"text","src":"","id":"street","title":"","options":null,"label":"Address","selector":"input[name='street']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_address","field_type":""},{"type":20,"info":{"selector":"//a[contains(text(), 'Add suite')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"1000","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"apt 50","checked":null,"name":"street2","type":"text","src":"","id":"street2","title":"","options":null,"label":"Address Line 2 (optional","selector":"input[name='street2']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_address_2","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"blah palo alto","checked":null,"name":"city","type":"text","src":"","id":"city","title":"","options":null,"label":"City","selector":"input[name='city']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_city","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"CA","name":"state","type":"select-one","id":"state","title":"","options":[{"text":"Select a State","value":""},{"text":"AL - Alabama","value":"AL"},{"text":"AK - Alaska","value":"AK"},{"text":"AP - Armed Forces Pacific","value":"AP"},{"text":"AE - Armed Forces Europe","value":"AE"},{"text":"AA - Armed Forces America","value":"AA"},{"text":"AZ - Arizona","value":"AZ"},{"text":"AR - Arkansas","value":"AR"},{"text":"CA - California","value":"CA"},{"text":"CO - Colorado","value":"CO"},{"text":"CT - Connecticut","value":"CT"},{"text":"DC - Washington D.C.","value":"DC"},{"text":"DE - Delaware","value":"DE"},{"text":"FL - Florida","value":"FL"},{"text":"GA - Georgia","value":"GA"},{"text":"GU - Guam","value":"GU"},{"text":"HI - Hawaii","value":"HI"},{"text":"ID - Idaho","value":"ID"},{"text":"IL - Illinois","value":"IL"},{"text":"IN - Indiana","value":"IN"},{"text":"IA - Iowa","value":"IA"},{"text":"KS - Kansas","value":"KS"},{"text":"KY - Kentucky","value":"KY"},{"text":"LA - Louisiana","value":"LA"},{"text":"ME - Maine","value":"ME"},{"text":"MD - Maryland","value":"MD"},{"text":"MA - Massachusetts","value":"MA"},{"text":"MI - Michigan","value":"MI"},{"text":"MN - Minnesota","value":"MN"},{"text":"MS - Mississippi","value":"MS"},{"text":"MO - Missouri","value":"MO"},{"text":"MT - Montana","value":"MT"},{"text":"NE - Nebraska","value":"NE"},{"text":"NV - Nevada","value":"NV"},{"text":"NH - New Hampshire","value":"NH"},{"text":"NJ - New Jersey","value":"NJ"},{"text":"NM - New Mexico","value":"NM"},{"text":"NY - New York","value":"NY"},{"text":"NC - North Carolina","value":"NC"},{"text":"ND - North Dakota","value":"ND"},{"text":"OH - Ohio","value":"OH"},{"text":"OK - Oklahoma","value":"OK"},{"text":"OR - Oregon","value":"OR"},{"text":"PA - Pennsylvania","value":"PA"},{"text":"RI - Rhode Island","value":"RI"},{"text":"SC - South Carolina","value":"SC"},{"text":"SD - South Dakota","value":"SD"},{"text":"TN - Tennessee","value":"TN"},{"text":"TX - Texas","value":"TX"},{"text":"UT - Utah","value":"UT"},{"text":"VT - Vermont","value":"VT"},{"text":"VA - Virginia","value":"VA"},{"text":"VI - Virgin Islands","value":"VI"},{"text":"WA - Washington","value":"WA"},{"text":"WV - West Virginia","value":"WV"},{"text":"WI - Wisconsin","value":"WI"},{"text":"WY - Wyoming","value":"WY"}],"selector":"select[name='state']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":"","checked":null,"text_only":""},"text":"Select a StateAL - AlabamaAK - AlaskaAP - Armed Forces PacificAE - Armed Forces EuropeAA - Armed Forces AmericaAZ - ArizonaAR - ArkansasCA - CaliforniaCO - ColoradoCT - ConnecticutDC - Washington D.C.DE - DelawareFL - FloridaGA - GeorgiaGU - GuamHI - HawaiiID - IdahoIL - IllinoisIN - IndianaIA - IowaKS - KansasKY - KentuckyLA - LouisianaME - MaineMD - MarylandMA - MassachusettsMI - MichiganMN - MinnesotaMS - MississippiMO - MissouriMT - MontanaNE - NebraskaNV - NevadaNH - New HampshireNJ - New JerseyNM - New MexicoNY - New YorkNC - North CarolinaND - North DakotaOH - OhioOK - OklahomaOR - OregonPA - PennsylvaniaRI - Rhode IslandSC - South CarolinaSD - South DakotaTN - TennesseeTX - TexasUT - UtahVT - VermontVA - VirginiaVI - Virgin IslandsWA - WashingtonWV - West VirginiaWI - WisconsinWY - Wyoming","field_key":"billing_state","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"94303","checked":null,"name":"zipcode","type":"text","src":"","id":"zipcode","title":"","options":null,"label":"ZIP Code","selector":"input[name='zipcode']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_zip","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"6506488989","checked":null,"name":"dayPhoneNumber","type":"text","src":"","id":"dayPhoneNumber","title":"","options":null,"label":"Phone","selector":"input[name='dayPhoneNumber'], input[name='phone']","is_optional":"no","frame":"","timeout":"","task":"","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_telephone","field_type":""},{"type":20,"info":{"tagName":"INPUT","value":"","checked":null,"name":"emailAddress","type":"email","src":"","id":"emailAddress","title":"","options":null,"label":"E-mail Address","selector":"input[name='emailAddress']","is_optional":"no","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true},"x":471,"y":1999,"text":""},{"type":2,"info":{"tagName":"INPUT","value":"qhwkejhqwkej@yahoo.com","checked":null,"name":"emailAddress","type":"text","src":"","id":"emailAddress","title":"","options":null,"label":"E-mail Address","selector":"input[name='emailAddress']","is_optional":"no","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true},"text":"","field_key":"email","field_type":""},{"type":20,"info":{"href":"javascript:void(0);","tagName":"A","name":"","type":"","id":"","title":"","options":null,"selector":".continue-to-review","is_optional":"yes","frame":"","timeout":"","task":"","comment":"","has_custom_selector":true,"checked":null},"x":749,"y":2441,"text":"Review Your Order"},{"type":20,"info":{"selector":"a.override-address-btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","task":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"//button[contains(text(),'Place Order')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"section.payment div.button--place-order button.btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","task":"","options":null,"comment":"","has_custom_selector":true,"checked":null}}],"identifier_div_local":{"selector":"span.ca-productlisting-link a.uri, div.sa-item-summary__description","has_custom_selector":true,"recording_idx":"16"},"name_div_local":{"selector":"div.store-info span.location-name, div.store-name","has_custom_selector":true},"distance_div_local":{"selector":"div.store-distance","has_custom_selector":true},"address_div_local":{"selector":"div.store-info div.street-address","has_custom_selector":true},"phone_div_local":null,"when_div_local":{"selector":"div.bby-availstatus-description, div.availability-status","has_custom_selector":true},"change_store_div_local":{"selector":"div.ca-locntable-btncol-description img.bdt-addToCart.buy, div[class*='-available']","has_custom_selector":true},"wrapper_div_local":{"selector":"div#stores-div table.ca-locnlisting tr, ul.store-container li.sa-store-mini","has_custom_selector":true},"coupon_value_div_auth":null,"gift_card_value_div_auth":null,"remove_addresses_recording_auth":null,"remove_baddresses_recording_auth":null,"remove_payments_recording_auth":null,"mobile_url_conversion":null,"allowed_product_url_args":["id","skuid"],"gift_card_recording":[{"type":20,"info":{"tagName":"INPUT","value":"299","checked":null,"name":"","type":"text","src":"","id":"payment.giftCard.code","title":"","options":null,"label":"Best Buy Gift Card or Savings Code","selector":"div.form-group.gift-cards__form-group input","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true},"x":454,"y":508,"text":""},{"type":2,"info":{"tagName":"INPUT","value":"2997 3324 6039 2082","checked":null,"name":"","type":"text","src":"","id":"payment.giftCard.code","title":"","options":null,"label":"Best Buy Gift Card or Savings Code","selector":"div.form-group.gift-cards__form-group input","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true},"text":"","field_key":"","field_type":""},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"3500","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"tagName":"INPUT","value":"","checked":null,"name":"","type":"text","src":"","id":"payment.giftCard.pin","title":"","options":null,"label":"Pin","selector":"div.gift-cards__pin-wrap input","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true},"x":475,"y":565,"text":""},{"type":2,"info":{"tagName":"INPUT","value":"1111","checked":null,"name":"","type":"text","src":"","id":"payment.giftCard.pin","title":"","options":null,"label":"Pin","selector":"div.gift-cards__pin-wrap input","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true},"text":"","field_key":"","field_type":""},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"3500","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"submit","id":"","title":"","options":null,"selector":"button.gift-cards__apply-btn","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true,"checked":null},"x":596,"y":580,"text":"Apply"}],"gift_card_recording_info":{"noauth_start_idx":"85"},"gift_card_recording_error_div":{"tagName":"DIV","id":"","title":"","options":[],"selector":"form.gift-cards div.has-error span.help-block, div.c-alert-level-danger div.c-alert-content","url":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17009&type=page&fastTrack=true#/payment?_k=eq9cbi","recording_idx":null,"has_custom_selector":true},"gift_card_recording_continue_div":{"selector":".credit-card-form__number-wrap input","has_custom_selector":true},"remote_status_recording":null,"remote_status_container_div":null,"remote_status_title_div":null,"remote_status_state_div":null,"remote_status_tracking_div":null,"shipping_options_div":null,"shipping_options":{"cheapest":{"text":"cheapest","min_days":"3","max_days":"7"}},"shipping_options_recording_info":{"noauth_start_idx":"-1"},"shipping_estimate_exceptions":{"cheapest":"0-34.9 --> 5.5 || 35-9999999 --> 0","fastest":""},"sync_data":[],"sync_master_url":null,"shipping_address_div_auth":null,"proxy":{"cart":"","purchase":"us_residential_1"},"estimator":"weight_discrete","feed_type":null,"feed_meta":{"origin":"Best-Buy-US/Best-Buy-Product-Catalog_IR.csv.gz","idx_source":"title","idx_transform":"(.*)\\s\\-.* --> $1"},"grouping_identifiers":[{"field":"custom_id","modifier":""}],"platform":"default","platform_meta":{"version":""},"resolution":null,"cookies":"abt507test===b || abt610===a","headers":null,"product_fetch_timeout":null,"tags":["ajax","memoized-react"],"login_url_check":null,"title_regexp":null,"p_attr_regexp":null,"images_regexp":"(maxHeight|maxWidth)=\\d+ --> $1=1000 --> g","sku_regexp":null,"mpn_regexp":null,"gtin_regexp":null,"receipt_prices":"visible","gifting_recording":null,"gifting_recording_info":null,"page_detector":[{"selector":["h1.payment__page-title"],"type":"billing","regex":"checkout\\/r\\/payment","label":"Checkout"},{"selector":[".item-list section.card"],"type":"cart_product","regex":"","label":""},{"selector":[".thank-you-enhancement__bd [class*=\"order-number\"] span.thank-you-enhancement__emphasis"],"type":"checkout_confirm","regex":"bestbuy\\.com\\/checkout\\/.*\\/thank-you","label":""},{"selector":["input[id='payment.promotionCode'], #promoCode, form.promotions input[maxlength=\"30\"], #promotionCode, [data-track=\"gift-promo-code-link\"], label[class*=\"promo-cards\"], input#gcNumber, .giftCardLinkText button","#checkout-content .row.total .col-xs-6:last .pull-right, .order-summary__price:last > .cash-money"],"type":"find_savings","regex":"bestbuy\\.com\\/checkout\\/c*\\/*r\\/(?:payment|fast-track)","label":"Payment/Fast-track"},{"selector":["section.payment"],"type":"payments","regex":"www.bestbuy.com\\/checkout\\/r\\/payment","label":""},{"selector":[".sku.product-data"],"type":"product","regex":"bestbuy\\.com\\/site\\/.*\\/(\\d+)\\.p","label":""},{"selector":["button:contains(\"Place Your Order\")"],"type":"submit_order","regex":"","label":""},{"selector":[".sku.product-data"],"type":"where_am_i","regex":"bestbuy\\.com\\/site\\/.*\\/(\\d+)\\.p","label":""}],"page_detector_watch":true,"h_legacy_find_savings":{"h_fs_promo_box_selector":"input[id='payment.promotionCode'], #promoCode, form.promotions input[maxlength=\"30\"], #promotionCode, [data-track=\"gift-promo-code-link\"], label[class*=\"promo-cards\"], input#gcNumber, .giftCardLinkText button","h_fs_final_price_selector":"#checkout-content .row.total .col-xs-6:last .pull-right, .order-summary__price:last > .cash-money","h_fs_submit_button":"@doFSSubmitButton(\"inputSelector\":<M>#promotionCode, input[id=\"payment.promotionCode\"],input#gcNumber</M>,\"eventsInOrder\":<M>input,blur,focus,change</M>,\"removeAttributeSelector\":<M>form.promotions button</M>,\"removeAttributeName\":<M>disabled</M>)@sleep(\"timeout\":<M></M>)@click(\"selector\":<M>button.gift-promo-cards__apply-btn,button.gc-apply-button-margin,button[data-track=\"promo-code-apply\"]</M>)","h_fs_time_between_codes":"2000","h_fs_pre_apply_code_action":"@click(\"selector\":<M>[data-track=\"gift-promo-code-link\"],.giftCardLinkText button</M>)","h_fs_time_between_pre_apply":"1000","h_fs_remove_code_action":"@click(\"selector\":<M>a.reward-certificate__remove,a.reward-certificate__remove,.payment-option [data-id][rel=remove],.payment-option [data-id][rel=remove]</M>)","h_fs_time_between_remove":"1000","h_fs_hide_cart_errors_selector":".section-errors__error.alert, .order-errors","h_fs_hide_cart_errors_selector2":"","h_fs_time_finish":"2000","h_fs_max_codes":"10","h_format_price_divisor":"","h_existing_code_selector":".alternate-payment__title","h_existing_code_selector_regex":"","h_existing_code_selector_attribute":"","temp_disable_find_savings":false,"h_fs_disable_dac":"true","h_fs_submit_button_template":{"id":"SAWE3","version":2,"variables":{"buttonSelector":"button.gift-promo-cards__apply-btn,button.gc-apply-button-margin,button[data-track=\"promo-code-apply\"]","inputSelector":"#promotionCode, input[id=\"payment.promotionCode\"],input#gcNumber","removeAttributeSelector":"form.promotions button","removeAttributeName":"disabled","timeout":""},"template":"@doFSSubmitButton(\"inputSelector\":<M>{{inputSelector}}</M>,\"eventsInOrder\":<M>input,blur,focus,change</M>,\"removeAttributeSelector\":<M>{{removeAttributeSelector}}</M>,\"removeAttributeName\":<M>{{removeAttributeName}}</M>)@sleep(\"timeout\":<M>{{timeout}}</M>)@click(\"selector\":<M>{{buttonSelector}}</M>)"},"h_fs_pre_apply_code_action_template":{"id":"SCLK1","version":1,"variables":{"selector":"[data-track=\"gift-promo-code-link\"],.giftCardLinkText button"},"template":"@click(\"selector\":<M>{{selector}}</M>)"},"h_fs_remove_code_action_template":{"id":"SCLK1","version":1,"variables":{"selector":"a.reward-certificate__remove,a.reward-certificate__remove,.payment-option [data-id][rel=remove],.payment-option [data-id][rel=remove]"},"template":"@click(\"selector\":<M>{{selector}}</M>)"}},"h_legacy_metadata":{"pns_priority":"3","pns_pushCodes":"1","pns_siteBaseURL":"not used","pns_siteCartURL1":"not used","pns_siteCartURL2":"not used","pns_siteCartURL3":"not used","pns_siteID":"bestbuy","pns_siteSelCartAddButton":"#checkout-content","pns_siteSelCartAddButtonType":"append","pns_siteSelCartCodeSubmitType":"click","pns_siteSelProdAddToCartType":"click","pns_siteSelProdHoneyButtonType":"append","pns_siteSelProdName":"#sku-title h1","pns_siteSelProdPrice":".item-price","pns_siteType":"ajax","approved_by":"ryan","pns_product_list_price":".regular-price","pns_product_id":"","pns_product_sku":"#sku-value","pns_confirmRegex":"bestbuy\\.com\\/checkout\\/.*\\/thank-you","pns_observerTarget":"body","pns_siteSelShowHoneyGold":"","pns_gDACjsonContentType":"","pns_gDAChtmlRes":"","pns_siteAzId":"89877","pns_productPricePath":"//div[@class='item-price']/text()|//div[@id='price']/button//text()","pns_siteSelOrderId":".thank-you-enhancement__bd [class*=\"order-number\"] span.thank-you-enhancement__emphasis","pns_cleanOrderIdRegex":"(BBY\\d+-\\d+)","droplist_inject_location":"#priceblock-wrapper-wrapper","droplist_qa":"false","droplist_universal_active":"true","honeyPayCartPriceSelector":".order-summary__total .order-summary__price .cash-money","honeyTipsAutopopOn":"true","hasPayPalSupport":"true","androidFSEnabled":"true","iosFSEnabled":"true","submitOrderButton":"button:contains(\"Place Your Order\")","payPalBtnSel":".paypal-component button","v4_productFetcher_variantWrapperSelector":"div.pdp-redesign-variation, .variation-element","v4_productFetcher_variantLabelSelector":".variation-header .c-label, .variation-header h2, .variation-element h2","v4_productFetcher_variantLabelValue":"text","v4_productFetcher_selectedVariantSelector1":".variation-dropdown .variation-dropdown-tile .tile-label","v4_productFetcher_selectedVariantValue1":"text","v4_productFetcher_selectedVariantSelector2":".variation-dropdown .variation-dropdown-tile","v4_productFetcher_selectedVariantValue2":"aria-label","v4_productFetcher_selectedVariantSelector3":"li.item div[class*=\"selected\"] button","v4_productFetcher_selectedVariantValue3":"aria-label","v4_productFetcher_selectedVariantSelector4":"div.tile-wrap div[class*=\"selected\"] button","v4_productFetcher_selectedVariantValue4":"aria-label","v4_productFetcher_selectedVariantSelector5":"li.item button.tile-selected","v4_productFetcher_selectedVariantValue5":"aria-label","v4_productFetcher_selectedVariantSelector6":"li.item button[class*=\"selected\"] img","v4_productFetcher_selectedVariantValue6":"alt","v4_productFetcher_selectedVariantRegex":"\\$[\\d.,]+","v4_productFetcher_descriptionSelector":"script:contains(\"sequence\")","v4_productFetcher_descriptionRegex":"description\\\\\":\\\\\"([^}]+)\"}","v4_productFetcher_schemaScriptSelector":"script[type=\"application/ld+json\"]:contains(\"gtin\")","v4_productFetcher_storePickupOnlySelector":"strong:contains(\"Store Pickup Only:\")","v4_productFetcher_storePickupOnlyValue":"text","v4_productFetcher_categoriesSelector":"nav[aria-label=\"breadcrumb\"] li a","v4_productFetcher_categoriesValue":"text","v4_productFetcher_primaryImageSelector":".variation-carousel-tile.has-image-swatch img, button.primary-button img","v4_productFetcher_primaryImageValue":"src","v4_productFetcher_secondaryImagesSelector":".thumbnail-list .image-thumbnail img","v4_productFetcher_secondaryImagesValue":"src","v4_productFetcher_priceCurrencySelector":"script:contains(\"priceCurrency\")","v4_productFetcher_priceCurrencyRegex":"priceCurrency\":\"(\\w+)\",","v4_productFetcher_oneTimePaymentButtonSelector":".activated-pricing__button:contains(\"One-time payment\")","v4_productFetcher_originalPriceSelector":".activated-pricing__option-price","v4_productFetcher_originalPriceValue":"text","v4_productFetcher_activateLaterButtonSelector":"button:contains(\"Activate later\")","v4_productFetcher_activateLaterButtonValue":"text","v4_productFetcher_productApiEndpoint":"/api/3.0/priceBlocks?skus=","v4_productFetcher_productIdRegex":"bestbuy\\.com\\/site\\/.*\\/(\\d+)\\.p"},"mixins":null,"vim_overrides":null,"privacy_url":"https://www.bestbuy.com/site/help-topics/privacy-policy/pcmcat204400050062.c?id=pcmcat204400050062","tos_url":"https://www.bestbuy.com/site/help-topics/terms-and-conditions/pcmcat204400050067.c?id=pcmcat204400050067","where_am_i":{"title_selector":"div#postcard h1, h1.productName, div.shop-product-title h1","price_selector":"//div[@id='ttPrice'] | //div[@id='postcard']//div[contains(@class,'pb-purchase-price')] | //div[@id='postcard']//div[contains(@class,'item-price') and not(span[contains(@class,'strikethrough')])] | //section[contains(@class,'pdpTop')]//div[contains(concat(' ',@class,' '),' price ')] | //div[@id='postcard']//div[contains(@class,'priceView-purchase-price')]/span | //div[@id='postcard']//div[contains(@class,'priceView-customer-price')]/span[@aria-hidden='true'] | //div[contains(@class,'priceView-layout-large')]//div[contains(@class,'priceView-customer-price')]","image_selector":"img.primary-image","category_selector":".c-breadcrumbs li:not(:first-child) a","keyword_selector":"","group_lookup_selector":null,"group_lookup_key":null,"item_lookup_selector":null,"item_lookup_key":null,"titleRegexp":"","imagesRegexp":"(maxHeight|maxWidth)=\\d+ --> $1=1000 --> g","itemLookupRegexp":null,"groupLookupRegexp":null,"title_selector_mobile":null,"price_selector_mobile":null,"image_selector_mobile":null,"category_selector_mobile":null,"keyword_selector_mobile":null,"group_lookup_selector_mobile":null,"group_lookup_key_mobile":null,"item_lookup_selector_mobile":null,"item_lookup_key_mobile":null,"titleRegexp_mobile":null,"imagesRegexp_mobile":null,"itemLookupRegexp_mobile":null,"groupLookupRegexp_mobile":null},"cart_link_div":null,"cart_link_div_mobile":null,"cart_link_div_extension":null,"cart_link_div_six":null,"cart_link_div_server":null,"cart_qtys_div":{"selector":"input[class*='qty'], select[class*='quantity'], div.cart-item select.c-dropdown.v-medium","noauth_start_idx":"3","auth_start_idx":"","local_start_idx":"-1"},"cart_qtys_div_mobile":null,"cart_qtys_div_extension":null,"cart_qtys_div_six":null,"cart_qtys_div_server":null,"cart_wrapper_div":{"selector":".item-list section.card","noauth_start_idx":"","auth_start_idx":"","local_start_idx":""},"cart_wrapper_div_mobile":null,"cart_wrapper_div_extension":null,"cart_wrapper_div_six":null,"cart_wrapper_div_server":null,"cart_p_name_div":{"selector":"a[id*=\"cart\"]","has_custom_selector":true},"cart_p_name_div_mobile":null,"cart_p_name_div_extension":null,"cart_p_name_div_six":null,"cart_p_name_div_server":null,"cart_p_sku_div":{"selector":"//div/@data-test-sku","has_custom_selector":true},"cart_p_sku_div_mobile":null,"cart_p_sku_div_extension":null,"cart_p_sku_div_six":null,"cart_p_sku_div_server":null,"cart_title_regexp":null,"cart_title_regexp_mobile":null,"cart_title_regexp_extension":null,"cart_title_regexp_six":null,"cart_title_regexp_server":null,"cart_p_url_div":{"selector":"a[id*=\"cart\"]","has_custom_selector":true},"cart_p_url_div_mobile":null,"cart_p_url_div_extension":null,"cart_p_url_div_six":null,"cart_p_url_div_server":null,"cart_p_image_div":{"selector":"div[data-test-sku] img","has_custom_selector":true},"cart_p_image_div_mobile":null,"cart_p_image_div_extension":null,"cart_p_image_div_six":null,"cart_p_image_div_server":null,"cart_p_qty_div":{"selector":"[id*=\"quantity\"] span","has_custom_selector":true},"cart_p_qty_div_mobile":null,"cart_p_qty_div_extension":null,"cart_p_qty_div_six":null,"cart_p_qty_div_server":null,"cart_p_attrs_div":null,"cart_p_attrs_div_mobile":null,"cart_p_attrs_div_extension":null,"cart_p_attrs_div_six":null,"cart_p_attrs_div_server":null,"cart_p_unit_price_div":{"selector":".price-block__inline","has_custom_selector":true},"cart_p_unit_price_div_mobile":null,"cart_p_unit_price_div_extension":null,"cart_p_unit_price_div_six":null,"cart_p_unit_price_div_server":null,"cart_p_total_price_div":null,"cart_p_total_price_div_mobile":null,"cart_p_total_price_div_extension":null,"cart_p_total_price_div_six":null,"cart_p_total_price_div_server":null,"cart_p_subtotal_div":null,"cart_p_subtotal_div_mobile":null,"cart_p_subtotal_div_extension":null,"cart_p_subtotal_div_six":null,"cart_p_subtotal_div_server":null,"cart_p_tax_div":{"selector":".price-summary tr:contains(\"Tax\") td","has_custom_selector":true},"cart_p_tax_div_mobile":null,"cart_p_tax_div_extension":null,"cart_p_tax_div_six":null,"cart_p_tax_div_server":null,"cart_p_shipping_div":null,"cart_p_shipping_div_mobile":null,"cart_p_shipping_div_extension":null,"cart_p_shipping_div_six":null,"cart_p_shipping_div_server":null,"cart_total_div":{"selector":".price-summary tr:contains(\"Total\") td","has_custom_selector":true},"cart_total_div_mobile":null,"cart_total_div_extension":null,"cart_total_div_six":null,"cart_total_div_server":null,"cart_custom_id":{"selector":"//div[@auto-test-sku]//@auto-test-sku","has_custom_selector":true},"cart_custom_id_mobile":null,"cart_custom_id_extension":null,"cart_custom_id_six":null,"cart_custom_id_server":null,"cart_opts_retrieval_js":null,"cart_opts_retrieval_js_mobile":null,"cart_opts_retrieval_js_extension":null,"cart_opts_retrieval_js_six":null,"cart_opts_retrieval_js_server":null,"address_check_noauth":null,"address_check_noauth_mobile":null,"address_check_noauth_extension":null,"address_check_noauth_six":null,"address_check_noauth_server":null,"final_price_div_noauth":{"tagName":"SPAN","id":"","title":"","options":null,"selector":"#checkout-content .total .pull-right, div.order-summary__total div.order-summary__price span.cash-money","url":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17013&type=page","recording_idx":"109","has_custom_selector":true,"frame":""},"final_price_div_noauth_mobile":null,"final_price_div_noauth_extension":null,"final_price_div_noauth_six":null,"final_price_div_noauth_server":null,"shipping_price_div_noauth":{"tagName":"SPAN","id":"","title":"","options":null,"selector":"//div[contains(@class, 'row')]/div[contains(@class, 'order-summary')]//div[contains(text(), 'Shipping')]/following-sibling::div/span | //div[contains(@class,'order-summary-card__bd')]//div[contains(.,'Shipping')]/following-sibling::div[1][contains(@class,'order-summary__price')]/span[contains(@class,'cash-money')]","url":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17013&type=page","recording_idx":"109","has_custom_selector":true,"frame":""},"shipping_price_div_noauth_mobile":null,"shipping_price_div_noauth_extension":null,"shipping_price_div_noauth_six":null,"shipping_price_div_noauth_server":null,"handling_price_div_noauth":{"selector":"//div[contains(@class, 'order-summary')]//div[contains(text(), 'Delivery')]/following-sibling::div/span","has_custom_selector":true,"recording_idx":"109","frame":""},"handling_price_div_noauth_mobile":null,"handling_price_div_noauth_extension":null,"handling_price_div_noauth_six":null,"handling_price_div_noauth_server":null,"checkout_recording_noauth":[{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"3000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// selecting \"Shipping\" / \"Delivery\" option for all products, instead of pickup-from-store [Serban 2017-09-19]\r\n// -- \"Shipping\" for normal products, \"Delivery\" for large products e.g. fridge\r\n// -- we must allow additional delay after each click!\r\n_ttClickNextShipping = function() {\r\n  __utils__.echo('--- checking if there is another unselected \"Shipping\" / \"Delivery\" option');\r\n  var nextShipping = jQuery(\"div.availability--unselected label.availability__body:contains('Shipping'), div.availability--unselected label.availability__body:contains('Delivery')\")[0];\r\n  if (nextShipping) {\r\n    __utils__.echo('--- \"Shipping\" / \"Delivery\" option found => clicking it');\r\n    __utils__.mouseEvent('click', nextShipping);\r\n    setTimeout(function() {\r\n      _ttClickNextShipping();\r\n    }, 5000);\r\n  }\r\n};\r\n\r\n_ttClickNextShipping();","timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"//body[not(//div[contains(@class,'availability--unselected')]//label[contains(@class,'availability__body') and (contains(.,'Shipping') or contains(.,'Delivery'))])]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"60000","comment":"This will only match when \"Shipping\" option has been selected for all products (see above JS)","options":null,"checked":null,"has_custom_selector":true}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//sometimes the cart page needs to be reloaded if not all the products has \"shipping\" selected\r\nvar path = \"//div[contains(text(),'our system just had a hiccup')]\";\r\nvar div = document.evaluate(path, document, null, XPathResult.FIRST_ORDERED_NODE_TYPE, null).singleNodeValue;\r\nif(div){\r\n  window.location.reload();\r\n}","timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// COPY-PASTE from step #1\r\n// selecting \"Shipping\" / \"Delivery\" option for all products, instead of pickup-from-store [Serban 2017-09-19]\r\n// -- \"Shipping\" for normal products, \"Delivery\" for large products e.g. fridge\r\n// -- we must allow additional delay after each click!\r\n_ttClickNextShipping = function() {\r\n  __utils__.echo('--- checking if there is another unselected \"Shipping\" / \"Delivery\" option');\r\n  var nextShipping = jQuery(\"div.availability--unselected label.availability__body:contains('Shipping'), div.availability--unselected label.availability__body:contains('Delivery')\")[0];\r\n  if (nextShipping) {\r\n    __utils__.echo('--- \"Shipping\" / \"Delivery\" option found => clicking it');\r\n    __utils__.mouseEvent('click', nextShipping);\r\n    setTimeout(function() {\r\n      _ttClickNextShipping();\r\n    }, 5000);\r\n  }\r\n};\r\n\r\n_ttClickNextShipping();","timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"//body[not(//div[contains(@class,'availability--unselected')]//label[contains(@class,'availability__body') and (contains(.,'Shipping') or contains(.,'Delivery'))])]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"60000","comment":"This will only match when \"Shipping\" option has been selected for all products (see above JS)","options":null,"checked":null,"has_custom_selector":true}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//removing all the free digital items if any\r\njQuery(\"div.product-qty-block a[action-remove-bonus-item]\").click();","timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// removing any digital download products which requires an account [tibi.bajgyik] 2017-10-15\r\n// https://www.bestbuy.com/site/seagate-expansion-4tb-external-usb-3-0-2-0-hard-drive-black/8686213.p?skuId=8686213\r\nvar removeBonus = jQuery(\"div.cart-item div.availability__info:contains('account required')\").closest(\"div.cart-item\").find(\"a.cart-item__remove\")[0];\r\nif(removeBonus){\r\n  __utils__.mouseEvent(\"click\", removeBonus);\r\n}","timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"10000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// removing any digital download products which requires an account [rm] 2019-1-18\r\n// https://www.bestbuy.com/site/seagate-expansion-4tb-external-usb-3-0-2-0-hard-drive-black/8686213.p?skuId=8686213\r\nvar removeBonus = jQuery(\"div.cart-item div.availability__info:contains('account required')\").closest(\"div.cart-item\").find(\"a.cart-item__remove\")[0];\r\nif(removeBonus){\r\n  __utils__.mouseEvent(\"click\", removeBonus);\r\n}","timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"input#availability-radio-1","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":20,"info":{"href":"http://www.bestbuy.com/cart/checkout","tagName":"A","name":"","type":"","id":"","title":"","options":null,"selector":"#checkout a.btn.btn-block.btn-lg.checkout-btn, div.listing-header__button button","is_optional":"no","frame":"","timeout":"5000","has_custom_selector":true,"comment":"","checked":null},"x":978,"y":888,"text":"Checkout"},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"10000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"div.button-wrapper a.no-thanks","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"submit","id":"create_accountBTN","title":"","options":null,"selector":"button#dont_create_accountBTN, .cia-guest-content__continue","is_optional":"yes","frame":"","timeout":"250","has_custom_selector":true,"comment":"","checked":null},"x":723,"y":255,"text":"Create an Account"},{"type":20,"info":{"selector":"input#fulfillment_1losStandard","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"setting \"standard\" shipping method","options":null,"checked":null,"has_custom_selector":true}},{"type":20,"info":{"selector":"div.total span","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//deleting the next element in checkout and reformatting the error message, if tax calculation error appears\r\nvar error = document.querySelector(\"div.error-content div.bbyalert-text\");\r\nif(error && error.textContent.indexOf('tax calculation system is temporarily down')>-1){\r\n  var button = document.querySelector(\"div.total span\");\r\n  if(button){\r\n    button.parentNode.removeChild(button);\r\n  }\r\n  error.textContent = \"We're sorry, our tax calculation system is temporarily down. You can try your order again later.\";\r\n}","timeout":"","options":null,"comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"div.total span","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"div.age-verification-content a.verify","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"div.js-digital-delivery-group-container section a.remove-line-item","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","has_custom_selector":true,"checked":null}},{"type":20,"info":{"selector":"div.js-digital-delivery-group-container section a.remove-line-item","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","has_custom_selector":true,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"1500","js_code":null,"timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//clicking on \"enter delivery address\" button, if present and if not hidden!!, otherwise clicking on \"enter shipping address\" button if visible\r\nvar delivery = document.querySelector(\"#checkout-content .delivery-address-btn\");\r\nvar shipping = document.querySelector(\"#checkout-content .shipping-address-btn\");\r\nif(delivery && __utils__.visible(delivery)){\r\n  jQuery(delivery).click();\r\n  __utils__.echo('--- clicking on enter delivery address');\r\n}\r\nelse if(__utils__.visible(shipping)){\r\n  jQuery(shipping).click();\r\n  __utils__.echo('--- clicking on enter shipping address');\r\n}\r\nif(!delivery && !shipping){\r\n  __utils__.echo('--- no delivery or shipping address button found');\r\n}","timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"//*[contains(concat(' ', normalize-space(@class), ' '), ' form-group ')]//*[contains(concat(' ', normalize-space(@class), ' '), ' autocomplete__wrapper ')]//a[contains(text(), 'Hide Suggestions')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","has_custom_selector":true,"comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//div[contains(@class, 'age-verification')]//button[contains(text(), '17+')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","has_custom_selector":true,"comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":".button-wrap a.cia-guest-content__continue","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"asdsad","checked":null,"name":"firstName","type":"text","src":"","id":"firstName","title":"","options":null,"label":"First Name","selector":"input[id='consolidatedAddresses.ui_address_2.firstName']","is_optional":"no","frame":"","timeout":"25000","has_custom_selector":true,"comment":""},"text":"","field_key":"shipping_first_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"qwdqwdq","checked":null,"name":"lastName","type":"text","src":"","id":"lastName","title":"","options":null,"label":"Last Name","selector":"input[id='consolidatedAddresses.ui_address_2.lastName']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"shipping_last_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"913 oakes st","checked":null,"name":"street","type":"text","src":"","id":"street","title":"","options":null,"label":"Address","selector":"input[id='consolidatedAddresses.ui_address_2.street']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"shipping_address","field_type":""},{"type":20,"info":{"selector":"//a[contains(text(), 'Add suite')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"apt 50","checked":null,"name":"street2","type":"text","src":"","id":"addressLine2","title":"","options":null,"label":"Address Line 2 (optional","selector":"input[id='consolidatedAddresses.ui_address_2.street2']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"shipping_address_2","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"blah palo alto","checked":null,"name":"city","type":"text","src":"","id":"city","title":"","options":null,"label":"City","selector":"input[id='consolidatedAddresses.ui_address_2.city']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"shipping_city","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"CA","name":"state","type":"select-one","id":"state","title":"","options":[{"text":"Select","value":""},{"text":"AL","value":"AL"},{"text":"AK","value":"AK"},{"text":"AP","value":"AP"},{"text":"AE","value":"AE"},{"text":"AA","value":"AA"},{"text":"AZ","value":"AZ"},{"text":"AR","value":"AR"},{"text":"CA","value":"CA"},{"text":"CO","value":"CO"},{"text":"CT","value":"CT"},{"text":"DC","value":"DC"},{"text":"DE","value":"DE"},{"text":"FL","value":"FL"},{"text":"GA","value":"GA"},{"text":"GU","value":"GU"},{"text":"HI","value":"HI"},{"text":"ID","value":"ID"},{"text":"IL","value":"IL"},{"text":"IN","value":"IN"},{"text":"IA","value":"IA"},{"text":"KS","value":"KS"},{"text":"KY","value":"KY"},{"text":"LA","value":"LA"},{"text":"ME","value":"ME"},{"text":"MD","value":"MD"},{"text":"MA","value":"MA"},{"text":"MI","value":"MI"},{"text":"MN","value":"MN"},{"text":"MS","value":"MS"},{"text":"MO","value":"MO"},{"text":"MT","value":"MT"},{"text":"NE","value":"NE"},{"text":"NV","value":"NV"},{"text":"NH","value":"NH"},{"text":"NJ","value":"NJ"},{"text":"NM","value":"NM"},{"text":"NY","value":"NY"},{"text":"NC","value":"NC"},{"text":"ND","value":"ND"},{"text":"OH","value":"OH"},{"text":"OK","value":"OK"},{"text":"OR","value":"OR"},{"text":"PA","value":"PA"},{"text":"RI","value":"RI"},{"text":"SC","value":"SC"},{"text":"SD","value":"SD"},{"text":"TN","value":"TN"},{"text":"TX","value":"TX"},{"text":"UT","value":"UT"},{"text":"VT","value":"VT"},{"text":"VA","value":"VA"},{"text":"VI","value":"VI"},{"text":"WA","value":"WA"},{"text":"WV","value":"WV"},{"text":"WI","value":"WI"},{"text":"WY","value":"WY"}],"label":"State","selector":"select[id='consolidatedAddresses.ui_address_2.state']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":"","checked":null,"text_only":""},"text":"Select a StateAL - AlabamaAK - AlaskaAP - Armed Forces PacificAE - Armed Forces EuropeAA - Armed Forces AmericaAZ - ArizonaAR - ArkansasCA - CaliforniaCO - ColoradoCT - ConnecticutDC - Washington D.C.DE - DelawareFL - FloridaGA - GeorgiaGU - GuamHI - HawaiiID - IdahoIL - IllinoisIN - IndianaIA - IowaKS - KansasKY - KentuckyLA - LouisianaME - MaineMD - MarylandMA - MassachusettsMI - MichiganMN - MinnesotaMS - MississippiMO - MissouriMT - MontanaNE - NebraskaNV - NevadaNH - New HampshireNJ - New JerseyNM - New MexicoNY - New YorkNC - North CarolinaND - North DakotaOH - OhioOK - OklahomaOR - OregonPA - PennsylvaniaRI - Rhode IslandSC - South CarolinaSD - South DakotaTN - TennesseeTX - TexasUT - UtahVT - VermontVA - VirginiaVI - Virgin IslandsWA - WashingtonWV - West VirginiaWI - WisconsinWY - Wyoming","field_key":"shipping_state","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"94303","checked":null,"name":"zipcode","type":"text","src":"","id":"zipcode","title":"","options":null,"label":"ZIP Code","selector":"input[id='consolidatedAddresses.ui_address_2.zipcode']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"shipping_zip","field_type":""},{"type":2,"info":{"selector":"input[id='user.emailAddress']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null,"has_custom_selector":true},"field_key":"email","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"6506488989","checked":null,"name":"dayPhoneNumber","type":"text","src":"","id":"dayPhoneNumber","title":"","options":null,"label":"Phone","selector":"input[id='user.phone']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"shipping_telephone","field_type":""},{"type":20,"info":{"tagName":"INPUT","value":"on","checked":true,"name":"useAddressAsBilling","type":"checkbox","src":"","id":"use-as-billingview70","title":"","options":null,"label":"This is also my billing address","selector":"input[name='useAddressAsBilling']","is_optional":"yes","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"x":342,"y":478,"text":""},{"type":2,"info":{"selector":"input[id='save-for-billing-address-ui_address_2']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"250","tagName":"INPUT","type":"checkbox","checked":false,"comment":"","options":null},"field_key":"use_shipping_for_billing","field_type":"hardcode"},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//show hidden buttons [davidkulcsar19] 2017-04-22\r\njQuery(\"div.saved-addresses__select div.saved-addresses__select-collapse\").show();","timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"10000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// extending session timeout so we won't be redirected to cart page (15 from store) [chis.george.cristian] 2018-09-27\r\nif (typeof sessionTimeout == \"number\") {\r\n  sessionTimeout = 9999;\r\n} else {\r\n\talert('TT Alert - Could not extend session timeout!');\r\n}\r\n","timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"3000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"div.saved-addresses__select button[class='saved-addresses__option list-group-item']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"10000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"div.saved-addresses__select button[class='saved-addresses__option list-group-item']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"div.saved-addresses__select button[class='saved-addresses__option list-group-item']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":20,"info":{"tagName":"INPUT","value":"Continue","checked":null,"name":"","type":"submit","src":"","id":"","title":"","options":null,"selector":"div.continue input.btn","is_optional":"yes","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"x":368,"y":604,"text":""},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2500","js_code":null,"timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//removing the continue button if the item can't be delivered to a specific address or to a POBOX address, or if bad phone\r\nvar errors = document.querySelectorAll(\"div.error-content div.bbyalert-text\");\r\nfor(var iPos=0; iPos<errors.length; iPos++){\r\n  if(errors[iPos].textContent.indexOf('not available in your area')>0 || errors[iPos].textContent.indexOf('PO Box')>0 || errors[iPos].textContent.indexOf('phone number')>0){\r\n    errors[iPos].textContent = errors[iPos].textContent.split('However')[0];\r\n    var button = document.querySelector('#checkout-content .shipping-address-btn');\r\n    button.parentNode.removeChild(button);\r\n  }\r\n}\r\n\r\n//deleting the next element in checkout and reformatting the error message, if tax calculation error appears\r\nvar error = document.querySelector(\"div.error-content div.bbyalert-text\");\r\nif(error && error.textContent.indexOf('tax calculation system is temporarily down')>-1){\r\n  var button = document.querySelector(\"#checkout-content .shipping-address-btn\");\r\n  button.parentNode.removeChild(button);\r\n  error.textContent = \"We're sorry, our tax calculation system is temporarily down. You can try your order again later.\";\r\n}\r\n\r\n","timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":".override-address-btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"selector":"#checkout-content .shipping-address-btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"selector":".use-address","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"selector":"div.checkout-continue a.continue","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"div.digital-delivery-group-container a.remove-line-item","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"div.digital-delivery-group-container a.remove-line-item","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null,"has_custom_selector":true}},{"type":2,"info":{"selector":"div.digital-delivery-group-container input[name='email']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","tagName":"INPUT","type":"text","options":null,"comment":"","has_custom_selector":true,"checked":null},"field_key":"email","field_type":""},{"type":20,"info":{"selector":"a.email-apply","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":20,"info":{"href":"javascript:void(0);","tagName":"A","name":"","type":"","id":"","title":"","options":null,"selector":"#checkout-content .btn.btn-primary.btn-lg.continue, div.button--continue button.btn","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":"","checked":null},"x":702,"y":1154,"text":"Continue"},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//adjusting address error for alaska also removing the continue button, as it resets the error to its original form\r\nvar prodBoxes = document.querySelectorAll(\"div.sub-group-line-items\");\r\nfor(var iPos=0; iPos<prodBoxes.length; iPos++){\r\n  var el = prodBoxes[iPos];\r\n  var noAddress = el.querySelector('div.shipping-address-details .shipping-address-btn');\r\n  var error = el.querySelector('div.error-content div.bbyalert-text');\r\n  if(noAddress && error.textContent.indexOf('enter a shipping address')>0){\r\n    var itemTitle = el.querySelector('div.line-item > div > span > span');\r\n    error.textContent = \"We're sorry, but these items are not available to be shipped to that address:\" + \" \" + itemTitle.textContent;\r\n  var button = document.querySelector('#checkout-content .btn.btn-secondary.btn-lg.continue');\r\n  button.parentNode.removeChild(button);\r\n  }\r\n}","timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"div.delivery-scheduler__header a.delivery-scheduler__header-link","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"25000","options":null,"comment":"","checked":null,"has_custom_selector":true}},{"type":20,"info":{"selector":"#checkout-content .btn.btn-secondary.btn-lg.continue","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"selector":"div.button--continue button.btn-primary","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"has_custom_selector":true,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"div.button--continue button.btn-primary","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"button.btn-primary.continue","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//button//span[contains(.,'Keep Address as Entered')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null,"has_custom_selector":true}},{"type":20,"info":{"selector":".delivery-scheduler div a.delivery-scheduler__header-link","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":".delivery__body .button--continue .btn span p","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"#checkout-content .btn.btn-primary.btn-lg.continue, div.button--continue button.btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"click on continue to payment again, in case it gives 'shipping opts updated' message - based on shipping address","options":null,"checked":null}},{"type":20,"info":{"selector":"button.session-timeout-modal__guest-continue-button","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"session_continue","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"input#optimized-cc-card-number","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"50000","comment":"ensures that the following script runs when the page is properly loaded","options":null,"checked":null,"has_custom_selector":true}},{"type":2,"info":{"selector":"input#optimized-cc-card-number","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","options":null,"comment":"","has_custom_selector":true,"checked":null},"field_key":"card_number","field_type":""},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//deleting the next element in checkout and reformatting the error message, if tax calculation error appears\r\nvar error = document.querySelector(\"div.error-content div.bbyalert-text\");\r\nif(error && error.textContent.indexOf('tax calculation system is temporarily down')>-1){\r\n  var button = document.querySelector(\"#checkout-content input#securityCode\");\r\n  button.parentNode.removeChild(button);\r\n  error.textContent = \"We're sorry, our tax calculation system is temporarily down. You can try your order again later.\";\r\n}","timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"input#credit-card-cvv","frame":"ensures that the following script runs at the right time","is_optional":"no","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null,"has_custom_selector":true}},{"type":2,"info":{"tagName":"SELECT","value":"05","name":"expirationMonth","type":"select-one","id":"expirationMonth","title":"","options":[{"text":"Month","value":""},{"text":"01","value":"01"},{"text":"02","value":"02"},{"text":"03","value":"03"},{"text":"04","value":"04"},{"text":"05","value":"05"},{"text":"06","value":"06"},{"text":"07","value":"07"},{"text":"08","value":"08"},{"text":"09","value":"09"},{"text":"10","value":"10"},{"text":"11","value":"11"},{"text":"12","value":"12"}],"selector":"#checkout-content select#expirationMonth, select[name='expiration-month']","is_optional":"no","frame":"","timeout":"250","comment":"","has_custom_selector":true,"checked":null,"text_only":""},"text":"Month010203040506070809101112","field_key":"expiry_date_month","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"2017","name":"expirationYear","type":"select-one","id":"expirationYear","title":"","options":[{"text":"Year","value":""},{"text":"2020","value":"2020"},{"text":"2021","value":"2021"},{"text":"2022","value":"2022"},{"text":"2023","value":"2023"},{"text":"2024","value":"2024"},{"text":"2025","value":"2025"}],"selector":"#checkout-content select#expirationYear, select[name='expiration-year']","is_optional":"no","frame":"","timeout":"250","comment":"","has_custom_selector":true,"checked":null,"text_only":""},"text":"Year20152016201720182019202020212022202320242025","field_key":"expiry_date_year","field_type":""},{"type":2,"info":{"selector":"input#credit-card-cvv","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"250","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null,"has_custom_selector":true},"field_key":"cvv","field_type":""},{"type":20,"info":{"selector":"a.billing-address__change-link","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"has_custom_selector":true,"checked":null}},{"type":20,"info":{"selector":"//span[contains(@class,'payment-name') and contains(text(),'Gift Cards and Savings Codes')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"qwdwqd","checked":null,"name":"firstName","type":"text","src":"","id":"firstName","title":"","options":null,"label":"First Name","selector":"input[id='payment.billingAddress.firstName']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_first_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"dwqdwqd","checked":null,"name":"lastName","type":"text","src":"","id":"lastName","title":"","options":null,"label":"Last Name","selector":"input[id='payment.billingAddress.lastName']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_last_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"2250 latham square","checked":null,"name":"street","type":"text","src":"","id":"street","title":"","options":null,"label":"Address","selector":"input[id='payment.billingAddress.street']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_address","field_type":""},{"type":20,"info":{"selector":"//a[contains(text(), 'Add suite')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"apt 44","checked":null,"name":"street2","type":"text","src":"","id":"street2","title":"","options":null,"label":"Address Line 2 (optional","selector":"input[id='payment.billingAddress.street2']","is_optional":"yes","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_address_2","field_type":""},{"type":20,"info":{"selector":"label[for='payment.billingAddress.street'] a.autocomplete__toggle","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"hide suggestions","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"mouintain view","checked":null,"name":"city","type":"text","src":"","id":"city","title":"","options":null,"label":"City","selector":"input[id='payment.billingAddress.city']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_city","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"CA","name":"state","type":"select-one","id":"state","title":"","options":[{"text":"Select","value":""},{"text":"AL","value":"AL"},{"text":"AK","value":"AK"},{"text":"AP","value":"AP"},{"text":"AE","value":"AE"},{"text":"AA","value":"AA"},{"text":"AZ","value":"AZ"},{"text":"AR","value":"AR"},{"text":"CA","value":"CA"},{"text":"CO","value":"CO"},{"text":"CT","value":"CT"},{"text":"DC","value":"DC"},{"text":"DE","value":"DE"},{"text":"FL","value":"FL"},{"text":"GA","value":"GA"},{"text":"GU","value":"GU"},{"text":"HI","value":"HI"},{"text":"ID","value":"ID"},{"text":"IL","value":"IL"},{"text":"IN","value":"IN"},{"text":"IA","value":"IA"},{"text":"KS","value":"KS"},{"text":"KY","value":"KY"},{"text":"LA","value":"LA"},{"text":"ME","value":"ME"},{"text":"MD","value":"MD"},{"text":"MA","value":"MA"},{"text":"MI","value":"MI"},{"text":"MN","value":"MN"},{"text":"MS","value":"MS"},{"text":"MO","value":"MO"},{"text":"MT","value":"MT"},{"text":"NE","value":"NE"},{"text":"NV","value":"NV"},{"text":"NH","value":"NH"},{"text":"NJ","value":"NJ"},{"text":"NM","value":"NM"},{"text":"NY","value":"NY"},{"text":"NC","value":"NC"},{"text":"ND","value":"ND"},{"text":"OH","value":"OH"},{"text":"OK","value":"OK"},{"text":"OR","value":"OR"},{"text":"PA","value":"PA"},{"text":"RI","value":"RI"},{"text":"SC","value":"SC"},{"text":"SD","value":"SD"},{"text":"TN","value":"TN"},{"text":"TX","value":"TX"},{"text":"UT","value":"UT"},{"text":"VT","value":"VT"},{"text":"VA","value":"VA"},{"text":"VI","value":"VI"},{"text":"WA","value":"WA"},{"text":"WV","value":"WV"},{"text":"WI","value":"WI"},{"text":"WY","value":"WY"}],"selector":"select[id='payment.billingAddress.state']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":"","checked":null,"text_only":""},"text":"Select a StateAL - AlabamaAK - AlaskaAP - Armed Forces PacificAE - Armed Forces EuropeAA - Armed Forces AmericaAZ - ArizonaAR - ArkansasCA - CaliforniaCO - ColoradoCT - ConnecticutDC - Washington D.C.DE - DelawareFL - FloridaGA - GeorgiaGU - GuamHI - HawaiiID - IdahoIL - IllinoisIN - IndianaIA - IowaKS - KansasKY - KentuckyLA - LouisianaME - MaineMD - MarylandMA - MassachusettsMI - MichiganMN - MinnesotaMS - MississippiMO - MissouriMT - MontanaNE - NebraskaNV - NevadaNH - New HampshireNJ - New JerseyNM - New MexicoNY - New YorkNC - North CarolinaND - North DakotaOH - OhioOK - OklahomaOR - OregonPA - PennsylvaniaRI - Rhode IslandSC - South CarolinaSD - South DakotaTN - TennesseeTX - TexasUT - UtahVT - VermontVA - VirginiaVI - Virgin IslandsWA - WashingtonWV - West VirginiaWI - WisconsinWY - Wyoming","field_key":"billing_state","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"94040","checked":null,"name":"zipcode","type":"text","src":"","id":"zipcode","title":"","options":null,"label":"ZIP Code","selector":"input[id='payment.billingAddress.zipcode']","is_optional":"no","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_zip","field_type":""},{"type":20,"info":{"selector":"input[name='dayPhoneNumber']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"6506488989","checked":null,"name":"dayPhoneNumber","type":"text","src":"","id":"dayPhoneNumber","title":"","options":null,"label":"Phone","selector":"input[name='dayPhoneNumber']","is_optional":"yes","frame":"","timeout":"250","has_custom_selector":true,"comment":""},"text":"","field_key":"billing_telephone","field_type":""},{"type":2,"info":{"selector":"input#emailAddress","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","tagName":"INPUT","type":"text","options":null,"comment":"","checked":null},"field_key":"email","field_type":""},{"type":20,"info":{"href":"javascript:void(0);","tagName":"A","name":"","type":"","id":"","title":"","options":null,"selector":"#checkout-content .btn.btn-secondary.btn-lg.continue-to-review","is_optional":"yes","frame":"","timeout":"250","has_custom_selector":true,"comment":"","checked":null},"x":705,"y":1956,"text":"Review Your Order"},{"type":20,"info":{"selector":".override-address-btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"4000","js_code":null,"timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"/*\r\n//checkout with a lot of products sometimes blocks before the review page - in this case a refresh is needed\r\nvar notLoaded = document.querySelector(\"div.spinner\");\r\nif(notLoaded){\r\n  window.location.reload();\r\n}\r\n*/","timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"#checkout-content .btn.btn-lg.continue-to-review","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"selector":"//h2[contains(text(), 'Review')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"70000","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//updating delivery estimate div for DELIVERY products\r\nvar deliveryTitles = document.querySelectorAll('.delivery div.item-details div.short-label');\r\nif(deliveryTitles){\r\n  for(var iPos=0; iPos<deliveryTitles.length; iPos++){\r\n    var el = deliveryTitles[iPos];\r\n    var deliveryDate = jQuery(el).parents('div.sub-group').find('div.delivery-date em')[0];\r\n    deliveryDate.textContent = el.textContent + ': ' + deliveryDate.textContent;\r\n  }\r\n}","timeout":"","options":null,"comment":"","checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//updating shipping estimate div for SHIPPING items\r\nvar deliveryTitles = document.querySelectorAll('section[data-context=\"Shipping\"] div.item-details div.short-label');\r\nif(deliveryTitles){\r\n  for(var iPos=0; iPos<deliveryTitles.length; iPos++){\r\n    var el = deliveryTitles[iPos];\r\n    var deliveryDate = jQuery(el).parents('div.lineItem-details').find('div.shipping-date')[0];\r\n    deliveryDate.textContent = el.textContent + ': ' + deliveryDate.textContent;\r\n  }\r\n}","timeout":"","has_custom_selector":true,"options":null,"comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"1500","js_code":null,"timeout":"","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"a.override-address-btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"comment":"","checked":null}},{"type":20,"info":{"selector":"section.digital-delivery .remove-line-item","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"selector":"section.digital-delivery .remove-line-item","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"250","options":null,"has_custom_selector":true,"comment":"","checked":null}},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"submit","id":"","title":"","options":null,"selector":"//button//p[contains(.,'Place Your Order')]","is_optional":"yes","frame":"","timeout":"","comment":"","has_custom_selector":true,"checked":null},"x":1061,"y":1588,"text":"Place Your Order"},{"type":20,"info":{"selector":"section.payment div.button--place-order button.btn","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//button[contains(text(),'Keep Address')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"//deleting the tax calculation error, if appears after place order, and if the order ID is present\r\nvar error = document.querySelector(\"div.error-content div.bbyalert-text\");\r\nvar orderId = document.querySelector(\"div.order-number, .marketplace-number\");\r\nif(error && error.textContent.indexOf('tax calculation system is temporarily down')>-1 && orderId){\r\n  error.parentNode.removeChild(error);\r\n}","timeout":"","options":null,"comment":"","checked":null}}],"checkout_recording_noauth_mobile":null,"checkout_recording_noauth_extension":null,"checkout_recording_noauth_six":null,"checkout_recording_noauth_server":null,"sales_tax_div_noauth":{"tagName":"SPAN","id":"","title":"","options":null,"selector":"#checkout-content .sales-tax .pull-right, div.order-summary__bd div.order-summary__tax","url":"https://www-ssl.bestbuy.com/site/olspage.jsp?id=pcat17013&type=page","recording_idx":"109","has_custom_selector":true,"frame":""},"sales_tax_div_noauth_mobile":null,"sales_tax_div_noauth_extension":null,"sales_tax_div_noauth_six":null,"sales_tax_div_noauth_server":null,"shipping_estimate_div_noauth":{"selector":"#checkout-content .shipping-date, div.delivery-date em, div.item-list__item-availability p.i18n-paragraph","has_custom_selector":true,"recording_idx":"109","frame":""},"shipping_estimate_div_noauth_mobile":null,"shipping_estimate_div_noauth_extension":null,"shipping_estimate_div_noauth_six":null,"shipping_estimate_div_noauth_server":null,"checkout_information_noauth":null,"checkout_information_noauth_mobile":null,"checkout_information_noauth_extension":null,"checkout_information_noauth_six":null,"checkout_information_noauth_server":null,"order_id_div_noauth":{"selector":"//div[contains(@class,'order-number')] | //div[contains(@class,'marketplace-number')] | //div[contains(@class,'thank-you__bd')]//div[contains(@class,'thank-you__msg')][not(contains(.,'@'))] | //span[contains(@class,'thank-you-enhancement__emphasis') and contains(.,'Order')]","has_custom_selector":true,"frame":""},"order_id_div_noauth_mobile":null,"order_id_div_noauth_extension":null,"order_id_div_noauth_six":null,"order_id_div_noauth_server":null,"coupon_value_div_noauth":{"selector":"div.order-summary__total div.order-summary__price span.cash-money","has_custom_selector":true,"recording_idx":null},"coupon_value_div_noauth_mobile":null,"coupon_value_div_noauth_extension":null,"coupon_value_div_noauth_six":null,"coupon_value_div_noauth_server":null,"gift_card_value_div_noauth":{"selector":"//section[contains(@class, 'order-summary-card')]//div[contains(@class, 'order-summary__label') and contains(., 'Gift Cards & Savings Codes')]/following-sibling::div[contains(@class, 'order-summary__price')]","has_custom_selector":true,"recording_idx":"109"},"gift_card_value_div_noauth_mobile":null,"gift_card_value_div_noauth_extension":null,"gift_card_value_div_noauth_six":null,"gift_card_value_div_noauth_server":null,"shipping_address_div_noauth":null,"shipping_address_div_noauth_mobile":null,"shipping_address_div_noauth_extension":null,"shipping_address_div_noauth_six":null,"shipping_address_div_noauth_server":null,"has_issues":false,"changelog":"[RO-36194] - Updated Cart Product Attr selectors.","add_to_cart_changes_div_mobile":null,"recording_start_urls_mobile":null,"parent_id":{"$oid":"66bb9c72567c3d1be597d1d3"},"created_at":{"$date":"2024-10-16T16:15:37.421Z"},"updated_at":{"$date":"2024-10-17T17:38:43.147Z"},"worker_honey_user_id":"492319753225430598","activated_at":{"$date":"2024-10-17T17:38:53.578Z"},"activated_by_honey_user_id":"492319753225430598","assignee_id":null}