{"_id":{"$oid":"66df395443930e562bb9b528"},"scope":"complete","country":"us","engine":"chrome_vim","product_page_requires_account":"no","shipping_options_div_type":"click","end_delay":4000,"status":"live","old_status":"pending","website_url":"sephora.com","website_name":"Sephora US","honey_id":"163","site_id":{"$oid":"52a5c33d55a0f9f111000002"},"partial_urls":["sephora.com"],"login_recording":null,"signup_recording":null,"title_div":{"selector":"//h1[contains(@data-comp,'DisplayName')]/span","has_custom_selector":true},"brand_div":{"selector":"//h1[contains(@data-comp,'DisplayName')]//a[contains(@class, 'css')]","has_custom_selector":true},"price_div":{"selector":"#ttPrice","has_custom_selector":true},"returns_div":null,"image_div":{"selector":"//nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li[1]//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BccBanner')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li[1]//img | //div[@data-comp='HeroMediaList ']//div[contains(@id,'tabPanel')][@aria-hidden='false']//*[name()='svg']//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BccBanner')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li//img | //div[@data-comp='Carousel ']//li[1]//*[name()='svg']//img | //ul//li[1]//button[contains(@data-comp, \"ProductImage\")]//picture//img | //ul//li[2]//button[contains(@data-comp, \"ProductImage\")]//picture//img","has_custom_selector":true},"alt_images_div":{"selector":"//nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li[1]//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BccBanner')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li[1]//img | //div[@data-comp='HeroMediaList ']//div[contains(@id,'tabPanel')][@aria-hidden='false']//*[name()='svg']//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BccBanner')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li//img | //div[@data-comp='Carousel ']//li//*[name()='svg']//img | //ul//li//button[contains(@data-comp, \"ProductImage\")]//picture//img | //ul//li//button[contains(@data-comp, \"ProductImage\")]//picture//img","has_custom_selector":true},"custom_id_div":null,"extra_info_div":null,"weight_div":null,"product_container_div":null,"add_to_cart_recording":[{"type":20,"info":{"selector":"div#modalDialog button[aria-label='Continue shopping']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2000","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1010,"info":{"selector":".ttSize","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [ata.ahmad] 2021-02-02\r\nreturn __ttAttrGet(\"size\");\r\n","set":"return __ttAttrSet(fillValue, \"size\");\r\n","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"has_custom_selector":true},"field_key":"size","field_type":""},{"type":1010,"info":{"selector":".ttColor","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [ata.ahmad] 2021-02-02\r\nreturn __ttAttrGet(\"Color\");","set":"return __ttAttrSet(fillValue, \"Color\");","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"has_custom_selector":true},"field_key":"color","field_type":""},{"info":{"selector":".ttScent","frame":"","is_optional":"no","timeout":"","get":"return __ttAttrGet(\"Scent\");","set":"return __ttAttrSet(fillValue, \"Scent\");","set_during_retrieve_opts":"true"},"type":1010,"field_key":"scent"},{"info":{"selector":"select[id*='qty']","frame":"","is_optional":"no","timeout":"","tagName":"INPUT","type":"select"},"field_key":"quantity","field_type":"","type":2},{"type":20,"info":{"selector":"div#modalDialog button[aria-label='Continue shopping']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2000","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//div[contains(@id, \"modalDialog\")]//button[contains(@data-at, \"ql_close\")]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2000","js_code":null,"timeout":"","only_on_checkout_type":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"button","id":"","title":"","options":null,"selector":"button[data-comp^='AddToBasketButton'][data-at='add_to_basket_btn'] , div[data-comp='CallToActions '] button[data-comp^='AddToBasketButton'], body:not([twoTapOOS])","has_custom_selector":true,"is_optional":"no","frame":"","timeout":"","only_on_checkout_type":"","comment":"","checked":null},"x":1064,"y":341,"text":"Add to Basket"}],"add_to_cart_changes_div":null,"remove_from_cart_recording":null,"order_error_divs":[{"selector":"p[data-comp^='ErrorMsg']","overwrite":"text"},{"selector":"//div[@id='modalDialog']//p[contains(text(),'Payment error')]","overwrite":"text"},{"selector":"//p[@data-comp='InputMsg Box ']","overwrite":"text"}],"notes":"preparedProductData Notes [Ata - 2/9/21] :\n------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\nPOSSIBLE POINTS OF BREAKAGE:\n---The biggest weakness of this preparedProductData build is that we are only grabbing our info from one source, and that is the $('script#linkStore').\nIf there is ever a widespread break on PDP's, this should be the first thing that is checked, because if that script has an ID change or anything of the sort, then the whole recipe fails as we do not grab our data. I tried to find another source for product info, but nothing was consistent.\nHow to test:\n      -Navigate to any Product Page\n      -Check to see if this selector is still valid \"script#linkStore\"\n      -If it isn't then that is definitely causing the break.\n-------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n\nSephora was originally built with the approach of manually clicking through page elements and scraping data from each variant change.\nSephora's front end was prone to change, and would constantly be returning breaks.\nIt was because of this, that we decided as a team to re-platform the recipe, and take the approach of hitting Sephora's store API for data retrieval.\n\nWhat is Sephora's API?:\nThere is a script on every Sephora product page that contains all variant info.\nFor more visual aid, do the following:\n---Navigate to any Sephora PDP, like this one: https://www.sephora.com/product/double-wear-stay-in-place-makeup-P378284\n---Inject jQuery\n---copy and paste the following code into the console and hit enter:\nvar rawScript = $('script#linkStore');\nvar rawObject = rawScript.text();\nvar ttObject = JSON.parse(rawObject);\nvar product = ttObject && ttObject.page && ttObject.page.product;\n---type 'product' and hit enter. The variable that is returned is a JSON object, that all product pages retrieve product info on.\n\nWhat is prePreparedProductData:\nSince's Sephora's API was very nicely formatted, we were easily able to format all of that variant data into preparedProductData format, which is just\nTwoTap's specially formatted variable that contains all variant info. We declare it globally in prodOptsJS, and this is used for our data scraping.\nFor more visual aid, do the following:\n---Navigate to any Sephora Product Page, like this one: https://www.sephora.com/product/double-wear-stay-in-place-makeup-P378284\n---Inject jQuery\n---Copy and paste all of ProdOptsJS into the console and hit enter.\n---Type in 'preparedProductData' and hit enter. The object that is returned is the object we format in ProdOptsJS using _ttBuildPreparedProductData\n\nWhat is _ttValuesMap:\nWhen we add in color variants, we reference only their URL, but in order to add them in, we also need to reference their text.\n_ttValuesMap is a hash map, in which each key-value pair is URL-Text.\nFor more visual aid, do the following:\n---Navigate to any Sephora Product Page, like this one: https://www.sephora.com/product/double-wear-stay-in-place-makeup-P378284\n---Inject jQuery\n---Copy and paste all of ProdOptsJS into the console and hit enter.\n---Type in '_ttValuesMap' and hit enter. The object that is returned is the object we format in ProdOptsJS using _buildttValuesMap.\n----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------\n** Known Issues**\nWe're not able to display the original price and discounted price [Caleb Kang - 07/06/21]\n\n\n** GID Notes **\nThe GID is extracted from the URL, and it is just a product ID that Sephora gives to its products. It always starts with the letter \"P\". Examples below\nURL ----> GID\nhttps://www.sephora.com/product/spicebomb-extreme-P405501?skuId=1798479                      ----> P405501\nhttps://www.sephora.com/product/tinted-moisturizer-broad-spectrum-P109936                         ----> P109936\nhttps://www.sephora.com/product/intensive-skin-serum-concealer-P400172?skuId=1732429   ----> P400172\n\n\n** Attributes **\nNote: Attributes classification comes from the backend, so the attributes may not always look categorized as they do on the page, but the in stock variants should always add up.\nSupported:\nSize: https://www.sephora.com/product/spicebomb-extreme-P405501?skuId=1798479\nColor: https://www.sephora.com/product/rouge-pur-couture-slim-sheer-matte-lipstick-P449787\nScent: \n\n** Products **\nColor:\nhttps://www.sephora.com/product/rouge-pur-couture-slim-sheer-matte-lipstick-P449787?icid2=justarrivedmakeup_skugrid_ufe:p449787:product\nhttps://www.sephora.com/product/l-absolu-lacquer-P431511?icid2=products%20grid:p431511\n\nSize:\nhttps://www.sephora.com/product/moroccanoil-treatment-light-P412091?icid2=best%20for%20frizz:p412091:product\nhttps://www.sephora.com/product/all-nighter-long-lasting-makeup-setting-spray-P263504?icid2=bestsellersmakeup_skugrid_ufe:p263504:product\n\n** Additional Comments **\nRead preparedProductData info on possible breakages. That is the biggest catch of this site, and if that endpoint breaks, the entire recipe breaks.","sku_identifier":{"selector":"#ttSKU","has_custom_selector":true},"mpn_identifier":{"selector":"#ttMPN","has_custom_selector":true},"gtin_identifier":null,"final_price_div_auth":null,"shipping_price_div_auth":null,"handling_price_div_auth":null,"checkout_recording_auth":null,"currency_format":"$AMOUNT","recording_start_urls":{"addToCart":"https://www.sephora.com/product/no-7-bonding-oil-P447376","noauthCheckout":"https://www.sephora.com/basket"},"recording_end_urls":{"addToCart":"https://www.sephora.com/product/no-7-bonding-oil-P447376?icid2=justarrivedhair_skugrid_ufe:p447376:product","noauthCheckout":"https://www.sephora.com/checkout/payment"},"category_wrapper_div":{"selector":"//nav[contains(@aria-label, 'Breadcrumb')]//ol//li//a","has_custom_selector":true},"address_check_auth":null,"final_sale_div":null,"original_price_div":{"selector":"//p[contains(@data-comp, \"Price\")]//b[2] ","has_custom_selector":true},"discounted_price_div":{"selector":"//p[contains(@data-comp, \"Price\")]//b[1]","has_custom_selector":true},"sales_tax_div_auth":null,"shipping_estimate_div_auth":null,"pickup_div":null,"non_purchasable_div":null,"p_free_shipping_div":{"selector":"//div[@data-comp='RegularProductTop']//p[contains(text(),'free shipping') and not(contains(.,'$'))]","has_custom_selector":true},"errors_meta":[],"data_converters":{"shipping_telephone":[{"type":"simple","converter_id":"no_conversion"}],"shipping_address":[{"type":"simple","converter_id":"no_conversion"}],"shipping_zip":[{"type":"simple","converter_id":"no_conversion"}],"shipping_city":[{"type":"simple","converter_id":"no_conversion"}],"shipping_state":[{"type":"simple","converter_id":"51ebf9e755a0f90acc00000c"}],"card_number":[{"type":"simple","converter_id":"no_conversion"}],"expiry_date_month":[{"type":"simple","converter_id":"no_conversion"}],"expiry_date_year":[{"type":"simple","converter_id":"no_conversion"}],"billing_telephone":[{"type":"simple","converter_id":"no_conversion"}],"billing_address":[{"type":"simple","converter_id":"no_conversion"}],"billing_zip":[{"type":"simple","converter_id":"no_conversion"}],"billing_city":[{"type":"simple","converter_id":"no_conversion"}],"billing_state":[{"type":"simple","converter_id":"51ebf9e755a0f90acc00000c"}]},"logo":null,"delays":{"add_to_cart":10000,"product_opts":295000,"add_to_cart_field_press":"","product_opts_field":""},"user_agent":null,"user_agent_scope":null,"needed_banned_remote_urls":[],"contact":"https://www.sephora.com/beauty/contact-us","ship_est_start_time":{"$date":"2019-09-11T11:17:23.871Z"},"est_stats_start_time":null,"checkout_information_auth":null,"regression_tests_status":{"daily_noauth_simple_test":{"at":{"$date":"2020-07-10T06:15:55.706Z"},"status":"failed","issues":["Purchase failed."],"cart_failures":0,"purchase_failures":1,"estimation_failures":0},"auth_success_test":{"at":{"$date":"2019-09-12T13:24:28.040Z"},"status":"ok","issues":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0},"local_success_test":{"at":{"$date":"2019-09-12T13:24:28.771Z"},"status":"ok","issues":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0},"noauth_success_test":{"at":{"$date":"2020-09-28T03:38:48.091Z"},"status":"failed","issues":["Cart estimates failed."],"cart_failures":2,"purchase_failures":0,"estimation_failures":2},"feed_test":{"at":{"$date":"2021-08-13T17:58:00.900Z"},"status":"ok","issues":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0}},"checkout_dep_fields":null,"regression_products":[{"url":"https://www.sephora.com/product/no-7-bonding-oil-P447376","source":"manual"},{"url":"https://www.sephora.com/product/rouge-pur-couture-slim-sheer-matte-lipstick-P449787?icid2=justarrivedmakeup_skugrid_ufe:p449787:product","source":"manual"},{"url":"https://www.sephora.com/product/tinted-moisturizer-broad-spectrum-P109936?icid2=bestsellersmakeup_skugrid_ufe:p109936:product","source":"manual"},{"url":"https://www.sephora.com/product/radiant-creamy-concealer-P377873?icid2=bestsellersmakeup_skugrid_ufe:p377873:product&skuId=2245371","source":"manual"},{"url":"https://www.sephora.com/product/all-nighter-long-lasting-makeup-setting-spray-P263504?icid2=bestsellersmakeup_skugrid_ufe:p263504:product","source":"manual"},{"url":"https://www.sephora.com/product/makewaves-lengthening-curling-clean-mascara-P502484?skuId=2606176&icid2=products%20grid:p502484:product","source":"manual"},{"url":"https://www.sephora.com/product/moroccanoil-treatment-light-P412091?icid2=best%20for%20frizz:p412091:product","source":"manual"},{"url":"https://www.sephora.com/product/whirl-trio-interchangeable-styling-wand-P388707?icid2=best%20for%20frizz:p388707:producta","source":"manual"},{"url":"https://www.sephora.com/product/replica-jazz-club-P385350?icid2=bestsellersfragrance_skugrid_ufe:p385350:product&skuId=1803592","source":"manual"},{"url":"https://www.sephora.com/product/cream-lip-stain-liquid-lipstick-P281411","source":"manual"},{"url":"https://www.sephora.com/product/cleansing-exfoliating-wipes-P409800","source":"manual"},{"url":"https://www.sephora.com/product/mousse-radiance-clarifying-self-foaming-cleanser-P217909?skuId=1114636","source":"manual"},{"url":"https://www.sephora.com/product/brazilian-crush-body-fragrance-mist-mini-P421481?skuId=1985118","source":"manual"},{"url":"https://www.sephora.com/product/spicebomb-extreme-P405501?skuId=1798479","source":"manual"},{"url":"https://www.sephora.com/product/n5-l-eau-P412038","source":"manual"},{"url":"https://www.sephora.com/product/buriti-bronzer-P408971","source":"manual"},{"url":"https://www.sephora.com/product/color-depositing-mask-P447377","source":"manual"},{"url":"https://www.sephora.com/product/sephora-collection-pro-shadow-15-P455657?skuId=2290682&icid2=products%20grid:p455657:product","source":"manual"}],"store_options":{"images_on_add_to_cart":"yes","creates_store_account":null,"final_price_includes_gift_card":null,"overwrite_sales_tax":null,"sync_noauth_and_auth":null,"one_coupon_only":null,"honey_billing_address":null,"add_app_to_ua":null,"shoprunner_on_shipping_opts":null,"existing_account_emails_not_allowed":null,"retry_on_info_failures":null,"disable_product_quantity":false,"disable_daily_regressions":null,"disable_image_proxy":"yes","continue_on_alerts":null,"noauth_ends_with_success":null,"auth_ends_with_success":null,"local_ends_with_success":null,"use_chrome":null,"is_variantless":null},"product_opts_retrieval_js":"// remove and add hidden element to host code generated values\r\n$('#ttHidden').remove();\r\n$('body').append('<div id=\"ttHidden\" style=\"display: none;\"></div>');\r\n\r\nvar countryNotUS = __utils__.findOne('[data-at=\"checkmark_icon\"]:not([data-at=\"country_us\"] + [data-at=\"checkmark_icon\"])');\r\n\r\nif(countryNotUS){\r\n    __utils__.echo('--- ERROR! - PRODUCT NOT SUPPORTED - Country outside of US');\r\n    __utils__.echo('escapeVim');  \r\n}\r\n\r\n\r\nvar product_title = __utils__.findOne(_t_productPageSelectors.title).text().toLowerCase();\r\nvar isWellness = !!__utils__.findOne(\"//nav[contains(@aria-label, 'Breadcrumb')]//ol//li//a[contains(text(), 'Wellness')]\");\r\nvar nsfw_list = ['vibrator', 'vibrating', 'sex', 'libido', 'vaginal'];\r\n\r\nfor (var i = 0; i < nsfw_list.length ; i++) {\r\n  if (product_title.indexOf(nsfw_list[i]) > -1 && isWellness) {\r\n   __utils__.echo('--- ERROR! - PRODUCT NOT SUPPORTED - NSFW PRODUCT');\r\n   __utils__.echo('escapeVim');\r\n  }\r\n}\r\n\r\n// getting product data from script\r\nvar scriptEl = __utils__.findOne('script#linkStore');\r\nvar rawScript = scriptEl && scriptEl.text();\r\nvar parsedScript;\r\ntry { \r\n    parsedScript = JSON.parse(rawScript);\r\n} catch (e) { /* do nothing */}\r\nvar product = parsedScript && parsedScript.page && parsedScript.page.product;\r\n\r\n// set product data for crawler to read \r\nvar mpn = product && product.productDetails && product.productDetails.productId;\r\n$('#ttHidden').append('<div id=\"ttMPN\">' + mpn + '</div>');\r\n\r\nvar description = product && product.quickLookDescription;\r\n$('#ttHidden').append('<div id=\"ttDescription\">' + description + '</div>');\r\n\r\nvar sku = product && product.currentSku && product.currentSku.skuId;\r\n$('#ttHidden').append('<div id=\"ttSKU\">' + sku + '</div>');\r\n\r\nvar priceEl = __utils__.findOne('//p[contains(@data-comp,\"Price\")]//b');\r\nvar price = priceEl && priceEl.text();\r\n$('#ttHidden').append('<div id=\"ttPrice\">' + price + '</div>');\r\n\r\n_ttFillValues = {};   //Poppulated during _buildPreparedProductData\r\n_ttValuesMap = _buildttValuesMap(product);\r\n\r\npreparedProductData = _buildPreparedProductData(product);\r\n_ttFillValueOrder = __ttOrderFillValues();  // Getting attribute titles in order of add/remove from cart for use in __ttAttrGet [color, length, size, width]\r\n\r\n// keys in the PPD object, used to index through in the GET.\r\nvar ppdKeys = Object.keys(preparedProductData);\r\nif (!ppdKeys.length) {\r\n  $(\"body\").attr(\"twoTapOOS\", \"true\");\r\n}\r\n\r\n/*\r\n[Ata Ahmad - 2/10/2021]\r\nAll code below are just functions we built that are hoisted to the top of the scope via Javascript's hoisting properties.\r\nWe make calls to these functions in the first lines above this comment section, that do all the execution in building preparedProductData.\r\n*/\r\n// Formatting images\r\n// Input: array of objects\r\n// Output: array of strings, each string is an image url.\r\nfunction _ttFormatPageImages(images) {\r\n  var result =[];\r\n  for (var iPos = 0; iPos < images.length; iPos++) {\r\n    var currentImage = images[iPos];\r\n    var image = currentImage.imageUrl;\r\n    result.push(image);\r\n  }\r\n  return result;\r\n}\r\n\r\nfunction _buildVariantData(product){\r\n    var variantData = [];\r\n    var regularSkus = product.regularChildSkus;\r\n    var currentSku = product.currentSku;\r\n    var saleSkus = product.onSaleChildSkus;\r\n    \r\n    if (regularSkus) variantData = variantData.concat(regularSkus);\r\n    currentSku && variantData.push(currentSku);\r\n    if (saleSkus) variantData = variantData.concat(saleSkus);\r\n    \r\n    return variantData;\r\n}\r\n\r\n// Input: JSON object that contains all of the product page information from Sephora.\r\n// Output: TT formatted preparedProductData Object\r\n// Fills in the _ttFillValuesMap with the first variants it detects.\r\nfunction _buildPreparedProductData(product) {\r\n    // Pushing all available sku objects into the variantData arr.\r\n    var variantData = _buildVariantData(product);\r\n\r\n    var preparedProductData = {};\r\n    for (var iPos = 0; iPos < variantData.length; iPos++) {\r\n        var currentVariant = variantData[iPos];\r\n        \r\n        var isOOS = currentVariant.isOutOfStock;\r\n        if (isOOS) continue;\r\n        \r\n        var currentPrice = (currentVariant.salePrice) ? currentVariant.salePrice : currentVariant.listPrice;\r\n        var imageRaw = currentVariant.skuImages && currentVariant.skuImages.imageUrl;\r\n        var image = imageRaw;\r\n        var altImagesArray = currentVariant.alternateImages || [];\r\n        var alternateImages = _ttFormatPageImages(altImagesArray);\r\n        var sku = currentVariant.skuId;\r\n        \r\n        var sizeValue = currentVariant.size && currentVariant.size.toLowerCase().trim() || _ttValuesMap[currentPrice] || \"Standard\";\r\n        var attributeRawValue = currentVariant.smallImage;\r\n        var attributeValue = \"https://www.sephora.com\" + attributeRawValue;\r\n        var attributeName = currentVariant.variationType;\r\n        var hasSecondAttribute = attributeName !== \"Size\" && attributeRawValue;\r\n    \r\n        var valuesArray = [];\r\n        sizeValue && valuesArray.push(sizeValue);\r\n        hasSecondAttribute && valuesArray.push(attributeValue);\r\n\r\n        if (!_ttFillValues.Size && sizeValue) {\r\n          _ttFillValues.size = sizeValue;\r\n          $('body').addClass('ttSize');\r\n        }\r\n        if (!_ttFillValues[attributeName] && hasSecondAttribute) {\r\n          _ttFillValues[attributeName] = attributeValue;\r\n          $('body').addClass('tt' + attributeName);\r\n        }\r\n        \r\n        preparedProductData[valuesArray.join(\"--XX--\")] = {\r\n          price: currentPrice,\r\n          image: image,\r\n          alt_images: alternateImages,\r\n          sku: sku,\r\n        };\r\n    }\r\n    return preparedProductData;\r\n}\r\n\r\n\r\n\r\n// Input: JSON object that contains all of Sephora's product information \r\n// Output: _ttValuesMap - key-value pair map where key is the swatch image URL and value is the name of the swatch option\r\n/*\r\nExample of output:\r\n{\r\n    \"https://sephora.com/productcolor-isblue\": \"blue\",\r\n    \"https://sephora.com/productcolor-isblack\": \"black\",\r\n}\r\n*/\r\n\r\nfunction _buildttValuesMap(product) {\r\n    var variantData = _buildVariantData(product);\r\n    \r\n    var _ttValuesMap = {};\r\n    var textsCount = {};\r\n    for (var iPos = 0; iPos < variantData.length; iPos++) {\r\n        var currentVariant = variantData[iPos];\r\n        \r\n        var isOOS = currentVariant.isOutOfStock;\r\n        if (isOOS) continue;\r\n        \r\n        var attributeRawValue = currentVariant.smallImage;\r\n        var attributeValue = \"https://www.sephora.com\" + attributeRawValue;\r\n        var attributeText = currentVariant.variationValue;\r\n        if (!attributeText) {\r\n          attributeText = currentVariant.displayName && currentVariant.displayName.toLowerCase().replace(/[\\d\\.]+/gi, '').trim();\r\n          if (!attributeText) {\r\n            attributeText = currentVariant.displayName && currentVariantdisplayName.trim();\r\n          }\r\n        }\r\n        _ttValuesMap[attributeValue] = attributeText;\r\n        \r\n        // Occasionally there is no size information on some variants, so we are mapping prices to size values of other variants.\r\n        // Example: https://www.sephora.com/product/color-depositing-mask-P447377?skuId=2577187\r\n        var currentPrice = (currentVariant.salePrice) ? currentVariant.salePrice : currentVariant.listPrice;\r\n        var sizeValue = currentVariant.size && currentVariant.size.toLowerCase().trim();\r\n        if (sizeValue) _ttValuesMap[currentPrice] = sizeValue;\r\n    }\r\n    console.log('values map');\r\n    console.log(JSON.stringify(_ttValuesMap));\r\n    return _ttValuesMap;\r\n}\r\n\r\n\r\n\r\n// Returns the array of supported attributes\r\nfunction __ttOrderFillValues() {\r\n    var addRemoveOrder = [\"size\", \"Color\", \"Scent\"];\r\n    var result = [];\r\n    for (var iPos = 0; iPos < addRemoveOrder.length; iPos++) {\r\n        var current = addRemoveOrder[iPos];\r\n        if (_ttFillValues[current]) {\r\n            result.push(current);\r\n        }\r\n    }\r\n    return result;\r\n}\r\n\r\n/*\r\nBelow I'll run an example to explain the logis of the GET. The following is a dummy example, but I'm also including a product link at the bottom.\r\nFor this dummy example, this is what the _ttFillValues object will look like in the case of a product having size and color:\r\n{\r\n  \"size\": \"medium\",\r\n  \"color\": \"honey\"\r\n}\r\nIn this function __ttAttrGet(), we take in a string, either \"size\" or \"color\", and based on that, we create an index (idx) for later use.\r\nWe loop through each key in the preparedProductData object, and split the key into it's constituent parts. \r\n\r\nSo for example, a key will look like this: large--XX--https://sephora.com/productcolor\r\nOnce we split this key up, it'll become this: [\"large\", \"https://sephora.com/productcolor\"]\r\n\r\nThe index (idx) that we created based on our string input, will point to the position that we are checking up to in this array.\r\nAs we go through each key in preparedProductData, we will check if each key has the appropriate values leading up to the index we made,\r\nbased on whether they match the _ttFillValues values. if they match then the key will be pushed into the preResult array.\r\n\r\nIf our _ttFillValues object is like the one at the top of this comments section, then the following would happen:\r\n\r\nCase 1:\r\nkey: \"large--XX--https://sephora.com/productcolor-isblue\"\r\nTurns into this array: [\"large\", \"https://sephora.com/productcolor-isblue\"]\r\nIf we're checking color, then we are checking the first element (size) to see if it matches the \"size\" value in _ttFillValues.\r\nIn this case _ttFillValues[\"size\"] = \"medium\" which does not equal what we have in our current key's size value (\"medium\").\r\nSo we skip this iteration in looping through the ppdKeys.\r\n\r\n\r\nCase 2:\r\nkey: medium--XX--https://sephora.com/productcolor-isblue\r\nturns into this array: [\"medium\", \"https://sephora.com/productcolor-isblue\"]\r\nIf we're checking color, then we are checking the first element (size) to see if it matches the \"size\" value in _ttFillValues.\r\nIn this case, _ttFillValues[\"size\"] = \"medium\" equals what we have in our current key's size value (\"medium\").\r\nSince it passes having all preceding matching indeces (in this example just the size index), then we push the following into our preResult array.\r\n{\r\n  text: _ttValuesMap(\"https://sephora.com/productcolor-isblue\"),  <--- This would be \"blue\" since _ttValuesMap is just a hashmap of url keys to name values.\r\n  value: \"https://sephora.com/productcolor-isblue\"\r\n}\r\nThe final result is an array of variants that are all in stock that we sort using the .sort() method.\r\n\r\nA good example product to test this one (See store comments for testing instructions): \r\nhttps://www.sephora.com/product/tinted-moisturizer-broad-spectrum-P109936    <--- Has size and color attributes.\r\nhttps://www.sephora.com/product/moroccanoil-treatment-light-P412091          <--- Has only size attribute.\r\n\r\n*/\r\n__ttAttrGet = function (attribute) {\r\n    var idx;\r\n    for (var iPos = 0; iPos < _ttFillValueOrder.length; iPos++) {\r\n        var current = _ttFillValueOrder[iPos];\r\n        if (current == attribute) {\r\n            idx = iPos;\r\n            break;\r\n        }\r\n    }\r\n    var preResult = [];\r\n    for (var iPos = 0; iPos < ppdKeys.length; iPos++) {\r\n        var key = ppdKeys[iPos];            // ex: \"color--XX--size\"\r\n        var elValues = key.split('--XX--'); // Splitting key into array\r\n        var match = true;\r\n        var elValue = elValues[idx];\r\n        for (var jPos = 0; jPos < idx; jPos++) {\r\n            var matchValue = elValues[jPos];\r\n            var fillValue = _ttFillValues[_ttFillValueOrder[jPos]];\r\n            if (fillValue != matchValue) {\r\n                match = false;\r\n            }\r\n        }\r\n        if (!match) {\r\n            continue;\r\n        }\r\n        if (attribute != \"size\" && _ttValuesMap[elValue]) {\r\n          var obj = { value: elValue, text: _ttValuesMap[elValue] };\r\n          preResult.push(obj);\r\n        } else if (preResult.indexOf(elValue) == -1){\r\n          preResult.push(elValue);\r\n        }\r\n    }\r\n    if (ppdKeys.length == 1) {\r\n      var val = ppdKeys[0].split('--XX--')[idx];\r\n      if (attribute != \"size\") {\r\n        preResult = [{ value: val, text: _ttValuesMap[val] }];\r\n      } else {\r\n        preResult = [val];\r\n      }\r\n    }\r\n    return preResult.sort();\r\n};\r\n\r\n__ttUpdateSKU = function() {\r\n  var fillValues = [];\r\n  if (_ttFillValues[\"size\"] !== undefined) {\r\n    fillValues.push(_ttFillValues[\"size\"]);\r\n  }\r\n  if (_ttFillValues[\"Color\"] !== undefined) {\r\n    fillValues.push(_ttFillValues[\"Color\"]);\r\n  }\r\n  if (_ttFillValues[\"Scent\"] !== undefined) {\r\n    fillValues.push(_ttFillValues[\"Scent\"]);\r\n  }\r\n  console.log('fill values');\r\n  console.log(JSON.stringify(fillValues));\r\n  \r\n  console.log('PPD');\r\n  console.log(JSON.stringify(preparedProductData));\r\n  var variant = preparedProductData[fillValues.join(\"--XX--\")];\r\n  console.log(\"variant\");\r\n  console.log(variant);\r\n  if (!variant) {\r\n    console.log('setting initial data')\r\n    var pageSkuEl = __utils__.findOne('[data-at=\"item_sku\"]');\r\n    var sku = pageSkuEl && pageSkuEl.text().match(/[^\\d]+(\\d+).*/) && pageSkuEl.text().match(/[^\\d]+(\\d+).*/)[1];\r\n    $('#ttSKU').text(sku);\r\n    var priceEl = __utils__.findOne('//p[contains(@data-comp,\"Price\")]//b');\r\n    var price = priceEl && priceEl.text();\r\n    $('#ttPrice').text(price);\r\n  } else {\r\n    console.log('setting variant data');\r\n    $('#ttSKU').text(variant.sku);\r\n    $('#ttPrice').text(variant.price);\r\n  }\r\n};\r\n// This updated the fillValue in _ttFillValues, then returns true. All OOS filtering is done in the _buildPreparedProductData function.\r\n__ttAttrSet = function (fillValue, attribute) {\r\n    _ttFillValues[attribute] = fillValue;      // Update selected value in _ttFillValues (see __ttAttrGet for use)\r\n    __ttUpdateSKU();\r\n    return true;\r\n};","coupon_recording":null,"coupon_recording_info":null,"coupon_recording_error_div":null,"order_id_div_auth":null,"description_div":{"selector":"#ttDescription","has_custom_selector":true},"returns":"<p><strong>Returns Policy</strong><br />\r\nIf you are not completely satisfied with a Sephora purchase or gift for any reason, please review our return, refund, and exchange policies below for Sephora.com purchases and in-store purchases. Products must be returned in new or gently used condition. Sephora monitors return activity for abuse and reserves the right to limit returns or exchanges at Sephora and Sephora inside JCPenney in all instances.</p>\r\n\r\n<p>THIS POLICY IS EFFECTIVE FOR ALL PURCHASES MADE ON AND AFTER AUGUST 28, 2019. Purchases made prior to August 28, 2019, may be returned within 60 days of purchase in accordance with the previous return policy.</p>\r\n\r\n<p><strong>Sephora.com Purchases</strong><br />\r\nSephora.com purchases can be easily returned for FREE (no return shipping or handling fees) to any of our Sephora locations[https://www.sephora.com/store-locations-events/store-locations-events] for fast processing or by mail if you use our pre-paid return shipping label (follow the return procedures described below). We regret that we are unable to refund your original shipping charges, if applicable, unless the return was a result of our error. Please allow two weeks for your return to be processed if sent by mail. You will receive an email confirmation once your return has been processed. Your financial institution may take longer to reflect the transaction.</p>\r\n\r\n<p>- When you return your purchase to Sephora.com by mail and we receive your item within 30 days of purchase, if you paid with a credit or debit card, you will receive a full refund to your credit or debit card for the purchase price of the item. If you paid with PayPal, you will receive a full refund to your PayPal account.<br />\r\n- If we receive your item by mail within 31-60 days of purchase, or if your item was paid for with a Sephora gift card, online store credit or your PayPal account and we receive it by mail within 60 days of purchase, you will receive a full refund in the form of an online store credit for the item which may be redeemed at Sephora.com. For more information on how to redeem your store credit, please go to Customer Service on Sephora.com and go to&nbsp;Payment Methods[https://www.sephora.com/payment-methods].<br />\r\n- For Sephora.com products returned in store, rather than by mail, refunds are only provided if the product is returned within 30 days of purchase, and you will receive a full refund to your credit or debit card. If you paid with PayPal, you will receive a full refund in your choice of store credit or a gift card.</p>\r\n\r\n<p>Items purchased on Sephora.com may not be returned by mail, and will not be refunded, 61 days after the purchase date. Items shipped to Sephora outside of the returns window, not in new or gently used condition, without a receipt, or not purchased at Sephora, may not be credited back or returned to you.</p>\r\n\r\n<p>Sephora.com is unable to offer exchanges by mail; however, we are happy to exchange your product in any of our store locations.</p>\r\n\r\n<p><strong>Sephora.com Return Procedures</strong><br />\r\nHere are two easy ways to return your item:</p>\r\n\r\n<p><strong>1. Sephora.com Returns by Mail</strong><br />\r\n- Fill out both sides of the Return Form attached to the Order Summary and include the Return Form with your items. Include your name, e-mail address, and phone number so that we can contact you, if necessary.<br />\r\n- Package your return item in the manufacturer&#39;s product box and Sephora packaging (if available).<br />\r\nOtherwise, pack your return in a well-padded envelope or box to prevent damage in transit.<br />\r\n- Print the Prepaid Return Label from [www.sephora.com/returnlabel] and mail your return via United States Postal Service.<br />\r\n- You will receive an email confirmation when your return is processed.</p>\r\n\r\n<p>Returns can be mailed to:<br />\r\nSephora<br />\r\n531 Chelsea Road<br />\r\nAberdeen, MD 21001</p>\r\n\r\n<p>It takes up to two weeks to process returns and credit your account or to issue an online store credit. Return shipments can be tracked here[http://returnstracking.shipmentmanager.com/2292] and we will notify you via e-mail once your return has been processed. Please note that your financial institution may take longer to reflect the transaction. If you have any questions about your return, please contact Customer Service.</p>\r\n\r\n<p><strong>2. Sephora.com Returns to Store Location</strong><br />\r\nVisit any free standing Sephora store[https://www.sephora.com/stores/sephora-near-me] to return an item purchased from Sephora.com within 30 days of purchase.</p>\r\n\r\n<p>- Please bring your Order Summary and Return Form with you, as well as the credit card you used to place your order.<br />\r\n- If you purchased from Sephora.com with your JCPenney credit card, our free standing Sephora store will gladly offer a gift card or an exchange. Please return your item(s) to a Sephora inside JCPenney store in order to receive a full refund on your JCPenney card.<br />\r\n- If you purchased from Sephora.com with your PayPal account, our free standing Sephora store will gladly offer a gift card, store credit or an exchange. We regret that our Sephora stores are unable to process a refund to your PayPal account.</p>\r\n\r\n<p><strong>Gift Returns</strong><br />\r\nIf you are returning a Sephora gift that you received by mail and do not want the refund to go to the purchaser, before mailing the return please call 1-877-SEPHORA (1-877-737-4672) to set-up the gift return under your account.</p>\r\n\r\n<p>Check the &quot;I am returning a gift&quot; box on the back of your Return Form and indicate the reason for return as &quot;5-Gift&quot;. Please fill out all the information on the Return Form, including your name, e-mail address, and phone number. Your refund will be in the form of an online store credit that you can use at any time on Sephora.com. You may also call us at 1-877-SEPHORA (1-877-737-4672) to redeem your online store credit.</p>\r\n\r\n<p><strong>Sephora In-store Purchases</strong><br />\r\nSephora in-store purchases may be returned within 30 days of purchase with a receipt or gift receipt at a store location in exchange for a refund in the same form of payment as your purchase was made, we do not accept mail returns for merchandise originally purchased at a retail location.</p>\r\n\r\n<p>For receipted or verified returns made 30 days after purchase, we offer store credit in the form of a Sephora merchandise credit.</p>\r\n\r\n<p>Sephora merchandise credit does not have an expiration date, cannot be redeemed for cash (unless required by law), reloaded, transferred to others, or sold and can only be used at Sephora stores (not at Sephora.com or through Customer Service). Sephora merchandise credit will not be replaced if lost or stolen.</p>\r\n","final_price_div_local":null,"sales_tax_div_local":null,"order_id_div_local":null,"checkout_recording_local":null,"identifier_div_local":null,"name_div_local":null,"distance_div_local":null,"address_div_local":null,"phone_div_local":null,"when_div_local":null,"change_store_div_local":null,"wrapper_div_local":null,"coupon_value_div_auth":null,"gift_card_value_div_auth":null,"remove_addresses_recording_auth":null,"remove_baddresses_recording_auth":null,"remove_payments_recording_auth":null,"mobile_url_conversion":null,"allowed_product_url_args":["none"],"gift_card_recording":null,"gift_card_recording_info":null,"gift_card_recording_error_div":null,"gift_card_recording_continue_div":null,"remote_status_recording":null,"remote_status_container_div":null,"remote_status_title_div":null,"remote_status_state_div":null,"remote_status_tracking_div":null,"shipping_options_div":{"selector":"div[data-comp*='ShipMethodsList'] label","has_custom_selector":true},"shipping_options":{"cheapest":{"text":"cheapest","min_days":"4","max_days":"8"},"fastest":{"text":"fastest","min_days":"2","max_days":"3"}},"shipping_options_recording_info":{"noauth_start_idx":"20"},"shipping_estimate_exceptions":{"cheapest":"50-9999999 --> 0","fastest":""},"sync_data":[],"sync_master_url":null,"shipping_address_div_auth":null,"proxy":{"cart":"","purchase":""},"estimator":"price","feed_type":"linkshare","feed_meta":{"origin":"2417","idx_source":"parsed_url","idx_transform":".*product\\/(.+)\\-.* --> $1"},"grouping_identifiers":[{"field":"canonical_url","modifier":".*\\/product\\/.*(P\\d+).* --> $1"}],"platform":"default","platform_meta":null,"resolution":null,"cookies":null,"headers":null,"product_fetch_timeout":null,"tags":[],"login_url_check":null,"title_regexp":null,"p_attr_regexp":null,"images_regexp":"imwidth=\\d+ --> imwidth=1000","sku_regexp":null,"mpn_regexp":null,"gtin_regexp":null,"receipt_prices":"unknown","gifting_recording":null,"gifting_recording_info":null,"page_detector":[{"selector":["button[data-at=\"place_order_btn\"]"],"type":"submit_order","regex":"sephora\\.com\\/checkout","label":"checkout"},{"selector":["body:has([data-at*='pickup_location_section_title']) input#promoInput"],"type":"honey_gold","regex":"sephora\\.com\\/checkout\\/","label":"Checkout Page for pick only"},{"selector":["[data-at=\"product_refinement\"]"],"type":"cart_product","regex":".*\\/basket.*","label":"Cart page (skippable)"},{"selector":[".OrderConfirm .u-mb3 a, a[data-at=\"confirmation_order_number\"]"],"type":"checkout_confirm","regex":"^https:\\/\\/www\\.sephora\\.com\\/checkout\\/confirmation\\?orderId=(?:\\d+)","label":""},{"selector":["body:has([data-at=\"bsk_total_cc\"]:contains(\"$\"):not(:contains(\"$0.00\")), body:has([data-at='basket_checkout_btn']:contains('Checkout Shipped Items')) #promoInput ,  body:has([data-at='shipping_address_section_title']) [data-at=\"bsk_promo_input\"], body:has([data-at='shipping_address_section_title']) button[data-comp*=\"CheckoutPromoSection\"]","[data-at=\"order_total\"]:contains(\"$\"):not(:contains(\"$0.00\")),  [data-at=\"bsk_total_cc\"]:contains(\"$\"):not(:contains(\"$0.00\"))"],"type":"find_savings","regex":"sephora\\.com\\/checkout\\/ ||sephora\\.com\\/basket\\/","label":"Cart/Checkout Page for shipping only"},{"selector":["body:not(:has(div[data-at=\"total_tax\"]:contains(\"$-.--\")))","div[data-at=\"checkout_payment_method\"]"],"type":"payments","regex":"sephora\\.com\\/checkout(\\/payment)?","label":""},{"selector":["body:has([data-at=\"country_us\"] + [data-at=\"checkmark_icon\"]) [data-comp=\"RegularProduct \"]"],"type":"product","regex":"","label":""},{"selector":["body:has([data-at=\"country_us\"] + [data-at=\"checkmark_icon\"]) [data-comp=\"RegularProduct \"]"],"type":"where_am_i","regex":"","label":""}],"page_detector_watch":true,"h_legacy_find_savings":{"h_fs_promo_box_selector":"body:has([data-at=\"bsk_total_cc\"]:contains(\"$\"):not(:contains(\"$0.00\")), body:has([data-at='basket_checkout_btn']:contains('Checkout Shipped Items')) #promoInput ,  body:has([data-at='shipping_address_section_title']) [data-at=\"bsk_promo_input\"], body:has([data-at='shipping_address_section_title']) button[data-comp*=\"CheckoutPromoSection\"]","h_fs_final_price_selector":"[data-at=\"order_total\"]:contains(\"$\"):not(:contains(\"$0.00\")),  [data-at=\"bsk_total_cc\"]:contains(\"$\"):not(:contains(\"$0.00\"))","h_fs_submit_button":"try {\r\n  const promobox = document.querySelector('#promoInput');\r\n  promobox.dispatchEvent(new Event('input', { bubbles: true }));  \r\n  promobox.dispatchEvent(new Event('blur'));  \r\n  promobox.dispatchEvent(new Event('focus'));  \r\n  document.querySelector('[data-at=\"apply_btn\"]').click()\r\n} catch(e) {}\r\n  \r\nsetTimeout(() => { \r\n  if (document.getElementById('honeyContainer').shadowRoot.getElementById('fullscreen:applying:Done')) {\r\n    try {\r\n  \t  document.querySelector('[data-comp=\"GlobalModalsWrapper \"] [aria-label=\"Continue shopping\"], [id*=\"modal\"] button[aria-label=\"Continue shopping\"], [data-at=\"done_button\"]').click();\r\n    } catch(e) {}\r\n  }\r\n  \r\n  if (document.querySelector('#modal-root div[data-at=\"promo_warning_popup\"]')) {\r\n\ttry {\r\n\t  document.querySelector('#modal-root #modal2Dialog button[aria-label=\"Continue shopping\"],#modal0Dialog button[aria-label=\"Continue shopping\"]').click();\r\n\t} catch(e) {}\r\n} else if (document.querySelector('#modal-root div[data-at=\"promo_warning_popup\"]')) {\r\n\t  try {\r\n\t    document.querySelector('#modal-root button[aria-label=\"Continue shopping\"]').click();\r\n\t  } catch (e) {}\r\n  }\r\n  else if(document.querySelector('#modal-root button[aria-label=\"Continue shopping\"]')){\r\n    try {\r\n      document.querySelector('#modal-root button[aria-label=\"Continue shopping\"]').click();\r\n    }\r\n    catch(e){}\r\n  }\r\n}, 1000);\r\n\r\nsetTimeout(() => {\r\n    if(document.querySelector('#modal-root button[data-at=\"done_button\"]')){\r\n    try{\r\n      \r\n      document.querySelector('#modal-root button[data-at=\"done_button\"]').click();\r\n    }\r\n    catch(e){}\r\n  }\r\n}, 2000);","h_fs_time_between_codes":"5000","h_fs_pre_apply_code_action":"try{\r\n  document.querySelector('button[data-comp*=\"CheckoutPromoSection\"]').click();\r\n} catch(e) {}","h_fs_time_between_pre_apply":"2000","h_fs_remove_code_action":"try {\r\n  $('[data-at=\"modal_close\"]').click();\r\n\r\n}catch(e) {/*do nothing move on*/}\r\n\r\ndocument.querySelector('#promoInput').dispatchEvent(new Event('input', { bubbles: true }));\r\ndocument.querySelector('#promoInput').dispatchEvent(new Event('blur'));  \r\ndocument.querySelector('#promoInput').dispatchEvent(new Event('focus'));\r\n//needs input click before it can inject code\r\n\r\ntry{\r\n  document.querySelector('[data-comp=\"GlobalModalsWrapper\"] [aria-label=\"Continue shopping\"], [data-at=\"modal_close\"]').click();\r\n} catch(e) {}\r\n\r\ntry {\r\n  document.querySelector('[data-at=\"basket_promo_item\"] button[data-comp=\"Link Box\"], [data-at=\"done_button\"], [data-at=\"applied_promo\"] + button').click();\r\n} catch (e) {}\r\n","h_fs_time_between_remove":"5000","h_fs_hide_cart_errors_selector":"","h_fs_hide_cart_errors_selector2":"","h_fs_time_finish":"5000","h_fs_max_codes":"10","h_format_price_divisor":"","h_existing_code_selector":"","h_existing_code_selector_regex":"","h_existing_code_selector_attribute":"","temp_disable_find_savings":false,"h_fs_disable_dac":"","h_fs_top_funnel_code":"","h_fs_submit_button_template":null,"h_fs_remove_code_action_template":null},"h_legacy_metadata":{"pns_siteID":"sephora","pns_siteBaseURL":"not used","pns_siteCartURL1":"not used","pns_siteCartURL2":"not used","pns_siteCartURL3":"not used","pns_siteSelCartCodeSubmitType":"click","pns_siteSelCartAddButton":".basket-summary","pns_siteSelCartAddButtonType":"append","pns_checkoutSel":".btn.btn-alt.btn-lg.btn-block","pns_siteType":"refresh","pns_siteSelProdName":".brand-name","pns_siteSelProdPrice":".price :first","pns_siteSelProdHoneyButtonType":"append","pns_siteSelProdAddToCartType":"click","pns_pushCodes":"1","pns_priority":"3","approved_by":"ryan","pns_product_description":".short-description.u-hidden","pns_product_title":".OneLinkNoTx.pdp-primary__title","pns_product_list_price":".price__list.ng-binding","pns_product_sale_price":".price__sale.ng-binding","pns_confirmRegex":"sephora\\.com\\/checkout\\/confirmation\\?orderId=(?:\\d+)","pns_honeygoldShowRegex":"sephora.com/checkout/shipping","pns_observerTarget":"body","pns_siteSelShowHoneyGold":"body:has([data-at*='pickup_location_section_title']) input#promoInput","pns_gDACjsonContentType":"","pns_gDAChtmlRes":"","pns_siteAzId":"72454","pns_productPricePath":"//span[contains(@ng-show,'sku.sale_price')]|//div[@class='u-sizeFill']//span[contains(@ng-class,'sku.sale_price')]","search_observer":"false","search_regex":"keyword=(.*?)(?=&)","pns_siteSelOrderId":".OrderConfirm .u-mb3 a, a[data-at=\"confirmation_order_number\"]","pns_siteCodeRMNURL":"http://www.retailmenot.com/view/sephora.com #content","pns_siteCodeBackupURL2":"http://zendeals.com/sephora-coupons","pns_siteCodeBackupURL":"http://www.savings.com/m-Sephora-coupons.html #column-left","droplist_universal_active":"true","honeyPayCartPriceSelector":"[data-at=\"order_total\"]","honeyTipsAutopopOn":"true","payPalBtnSel":"[data-comp*='PayPalButton']","hasPayPalSupport":"true","launchpad_pathname":"/","androidFSEnabled":"true","iosFSEnabled":"true","submitOrderButton":"button[data-at=\"place_order_btn\"]"},"mixins":null,"vim_overrides":null,"privacy_url":"https://www.sephora.com/beauty/privacy-policy","tos_url":"https://www.sephora.com/beauty/terms-of-use","where_am_i":{"title_selector":"//h1[contains(@data-comp,'DisplayName')]/span","price_selector":"//p[contains(@data-comp, 'Price')]/span[contains(@data-comp,'BaseComponent')]/span[contains(text(),'$')] | //div[contains(@data-comp, 'Price')]//span[@data-at='price'] | //p[contains(@data-comp, 'Price')]//b[1]","image_selector":"//nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li[1]//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BccBanner')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li[1]//img | //div[@data-comp='HeroMediaList ']//div[contains(@id,'tabPanel')][@aria-hidden='false']//*[name()='svg']//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//img | //nav[contains(@aria-label,'Breadcrumbs')]/following-sibling::div[contains(@data-comp,'BccBanner')]/following-sibling::div[contains(@data-comp,'BaseComponent')][1]//div[contains(@data-comp,'Rcarousel')]//li//img | //div[@data-comp='Carousel ']//li[1]//*[name()='svg']//img | //ul//li[1]//button[contains(@data-comp, \"ProductImage\")]//picture//img | //ul//li[2]//button[contains(@data-comp, \"ProductImage\")]//picture//img","category_selector":"//nav[contains(@aria-label, 'Breadcrumb')]//ol//li//a","keyword_selector":"","titleRegexp":"","imagesRegexp":""},"cart_link_div":null,"cart_link_div_mobile":null,"cart_link_div_extension":null,"cart_link_div_six":null,"cart_link_div_server":null,"cart_qtys_div":{"selector":"[data-at='basket_count']","noauth_start_idx":"-1","auth_start_idx":"","local_start_idx":""},"cart_qtys_div_mobile":null,"cart_qtys_div_extension":null,"cart_qtys_div_six":null,"cart_qtys_div_server":null,"cart_wrapper_div":{"selector":"[data-at=\"product_refinement\"]","noauth_start_idx":"-1","auth_start_idx":"-1","local_start_idx":"-1"},"cart_wrapper_div_mobile":null,"cart_wrapper_div_extension":null,"cart_wrapper_div_six":null,"cart_wrapper_div_server":null,"cart_p_name_div":{"selector":"[data-at=\"bsk_sku_name\"]","has_custom_selector":true},"cart_p_name_div_mobile":null,"cart_p_name_div_extension":null,"cart_p_name_div_six":null,"cart_p_name_div_server":null,"cart_p_sku_div":null,"cart_p_sku_div_mobile":null,"cart_p_sku_div_extension":null,"cart_p_sku_div_six":null,"cart_p_sku_div_server":null,"cart_title_regexp":null,"cart_title_regexp_mobile":null,"cart_title_regexp_extension":null,"cart_title_regexp_six":null,"cart_title_regexp_server":null,"cart_p_url_div":{"selector":"div > div > div > div > div > p > a","has_custom_selector":true},"cart_p_url_div_mobile":null,"cart_p_url_div_extension":null,"cart_p_url_div_six":null,"cart_p_url_div_server":null,"cart_p_image_div":{"selector":"[data-at=\"product_image_link\"] img","has_custom_selector":true},"cart_p_image_div_mobile":null,"cart_p_image_div_extension":null,"cart_p_image_div_six":null,"cart_p_image_div_server":null,"cart_p_qty_div":{"selector":"[data-at=\"sku_qty\"]","has_custom_selector":true},"cart_p_qty_div_mobile":null,"cart_p_qty_div_extension":null,"cart_p_qty_div_six":null,"cart_p_qty_div_server":null,"cart_p_attrs_div":{"selector":"[data-at=\"item_variation_type\"]","has_custom_selector":true},"cart_p_attrs_div_mobile":null,"cart_p_attrs_div_extension":null,"cart_p_attrs_div_six":null,"cart_p_attrs_div_server":null,"cart_p_unit_price_div":null,"cart_p_unit_price_div_mobile":null,"cart_p_unit_price_div_extension":null,"cart_p_unit_price_div_six":null,"cart_p_unit_price_div_server":null,"cart_p_total_price_div":{"selector":"[data-at=\"bsk_sku_price\"]","has_custom_selector":true},"cart_p_total_price_div_mobile":null,"cart_p_total_price_div_extension":null,"cart_p_total_price_div_six":null,"cart_p_total_price_div_server":null,"cart_p_subtotal_div":{"selector":"span[data-at=\"merch_subtotal_label\"] ~ span","has_custom_selector":true},"cart_p_subtotal_div_mobile":null,"cart_p_subtotal_div_extension":null,"cart_p_subtotal_div_six":null,"cart_p_subtotal_div_server":null,"cart_p_tax_div":null,"cart_p_tax_div_mobile":null,"cart_p_tax_div_extension":null,"cart_p_tax_div_six":null,"cart_p_tax_div_server":null,"cart_p_shipping_div":{"selector":"[data-at=\"bsk_total_ship\"]","has_custom_selector":true},"cart_p_shipping_div_mobile":null,"cart_p_shipping_div_extension":null,"cart_p_shipping_div_six":null,"cart_p_shipping_div_server":null,"cart_total_div":{"selector":"span[data-at=\"bsk_total_cc\"]:visible","has_custom_selector":true},"cart_total_div_mobile":null,"cart_total_div_extension":null,"cart_total_div_six":null,"cart_total_div_server":null,"cart_custom_id":null,"cart_custom_id_mobile":null,"cart_custom_id_extension":null,"cart_custom_id_six":null,"cart_custom_id_server":null,"cart_opts_retrieval_js":null,"cart_opts_retrieval_js_mobile":null,"cart_opts_retrieval_js_extension":null,"cart_opts_retrieval_js_six":null,"cart_opts_retrieval_js_server":null,"address_check_noauth":null,"address_check_noauth_mobile":null,"address_check_noauth_extension":null,"address_check_noauth_six":null,"address_check_noauth_server":null,"final_price_div_noauth":{"selector":"[data-at=\"order_total\"]","has_custom_selector":true,"recording_idx":"39","frame":""},"final_price_div_noauth_mobile":null,"final_price_div_noauth_extension":null,"final_price_div_noauth_six":null,"final_price_div_noauth_server":null,"shipping_price_div_noauth":{"selector":"[data-at=\"bsk_total_ship\"]","has_custom_selector":true,"recording_idx":"39","frame":""},"shipping_price_div_noauth_mobile":null,"shipping_price_div_noauth_extension":null,"shipping_price_div_noauth_six":null,"shipping_price_div_noauth_server":null,"handling_price_div_noauth":null,"handling_price_div_noauth_mobile":null,"handling_price_div_noauth_extension":null,"handling_price_div_noauth_six":null,"handling_price_div_noauth_server":null,"checkout_recording_noauth":[{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"button","id":"","title":"","options":null,"selector":"button[data-comp^='CheckoutButton']","is_optional":"no","frame":"","timeout":"","comment":"","checked":null,"has_custom_selector":true},"x":1004,"y":591,"text":"Checkout"},{"type":20,"info":{"selector":"//div[@data-comp='GlobalModalsWrapper ']//button[@data-at='close_button']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"button[data-comp^='CheckoutButton']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","has_custom_selector":true,"comment":"","options":null,"checked":null}},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"button","id":"","title":"","options":null,"selector":"//div[contains(@data-comp, 'GuestCheckoutMessaging')]//button[contains(text(),'Continue As Guest')]","is_optional":"no","frame":"","timeout":"","comment":"","checked":null,"has_custom_selector":true},"x":865,"y":486,"text":"Continue As Guest"},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"John","checked":null,"name":"firstName","type":"text","src":"","id":"firstName","title":"","options":null,"label":"First name","selector":"#ship_address_form input#firstName","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"shipping_first_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"Carter","checked":null,"name":"lastName","type":"text","src":"","id":"lastName","title":"","options":null,"label":"Last name","selector":"#ship_address_form input#lastName","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"shipping_last_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"(312) 345-6788","checked":null,"name":"phone","type":"text","src":"","id":"phone","title":"","options":null,"label":"Phone","selector":"#ship_address_form input#phone","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"shipping_telephone","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"shoshonino@gmail.com","checked":null,"name":"email","type":"text","src":"","id":"email","title":"","options":null,"label":"Email address","selector":"#ship_address_form input#email","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"email","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"913 oakes street","checked":null,"name":"address1","type":"text","src":"","id":"avs_input","title":"","options":null,"label":"Street address","selector":"#ship_address_form input#avs_input","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"shipping_address","field_type":""},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"button","id":"","title":"","options":null,"selector":"#ship_address_form button[aria-controls='address2_section']","is_optional":"no","frame":"","timeout":"","comment":"","checked":null,"has_custom_selector":true},"x":268,"y":445,"text":"Add Apt #, Floor, etc."},{"type":2,"info":{"tagName":"INPUT","value":"ap 3","checked":null,"name":"address2","type":"text","src":"","id":"address2","title":"","options":null,"label":"Apt #, Floor, etc","selector":"[id='address2_section'] input[id='address2']","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"shipping_address_2","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"94303","checked":null,"name":"postalCode","type":"text","src":"","id":"postalCode","title":"","options":null,"label":"ZIP/Postal code","selector":"#ship_address_form input#postalCode","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"shipping_zip","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"palo alto","checked":null,"name":"city","type":"text","src":"","id":"city","title":"","options":null,"label":"City","selector":"#ship_address_form input#city","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"shipping_city","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"CO","name":"state","type":"select-one","id":"state","title":"","options":[{"text":"AA - Armed Forces America","value":"AA"},{"text":"AE - Armed Forces Europe","value":"AE"},{"text":"AK - Alaska","value":"AK"},{"text":"AL - Alabama","value":"AL"},{"text":"AP - Armed Forces Pacific","value":"AP"},{"text":"AR - Arkansas","value":"AR"},{"text":"AZ - Arizona","value":"AZ"},{"text":"CA - California","value":"CA"},{"text":"CO - Colorado","value":"CO"},{"text":"CT - Connecticut","value":"CT"},{"text":"DC - District of Columbia","value":"DC"},{"text":"DE - Delaware","value":"DE"},{"text":"FL - Florida","value":"FL"},{"text":"GA - Georgia","value":"GA"},{"text":"HI - Hawaii","value":"HI"},{"text":"IA - Iowa","value":"IA"},{"text":"ID - Idaho","value":"ID"},{"text":"IL - Illinois","value":"IL"},{"text":"IN - Indiana","value":"IN"},{"text":"KS - Kansas","value":"KS"},{"text":"KY - Kentucky","value":"KY"},{"text":"LA - Louisiana","value":"LA"},{"text":"MA - Massachusetts","value":"MA"},{"text":"MD - Maryland","value":"MD"},{"text":"ME - Maine","value":"ME"},{"text":"MI - Michigan","value":"MI"},{"text":"MN - Minnesota","value":"MN"},{"text":"MO - Missouri","value":"MO"},{"text":"MS - Mississippi","value":"MS"},{"text":"MT - Montana","value":"MT"},{"text":"NC - North Carolina","value":"NC"},{"text":"ND - North Dakota","value":"ND"},{"text":"NE - Nebraska","value":"NE"},{"text":"NH - New Hampshire","value":"NH"},{"text":"NJ - New Jersey","value":"NJ"},{"text":"NM - New Mexico","value":"NM"},{"text":"NV - Nevada","value":"NV"},{"text":"NY - New York","value":"NY"},{"text":"OH - Ohio","value":"OH"},{"text":"OK - Oklahoma","value":"OK"},{"text":"OR - Oregon","value":"OR"},{"text":"PA - Pennsylvania","value":"PA"},{"text":"PR - Puerto Rico","value":"PR"},{"text":"RI - Rhode Island","value":"RI"},{"text":"SC - South Carolina","value":"SC"},{"text":"SD - South Dakota","value":"SD"},{"text":"TN - Tennessee","value":"TN"},{"text":"TX - Texas","value":"TX"},{"text":"UT - Utah","value":"UT"},{"text":"VA - Virginia","value":"VA"},{"text":"VT - Vermont","value":"VT"},{"text":"WA - Washington","value":"WA"},{"text":"WI - Wisconsin","value":"WI"},{"text":"WV - West Virginia","value":"WV"},{"text":"WY - Wyoming","value":"WY"}],"label":"State/Region","selector":"#ship_address_form select#state","is_optional":"no","frame":"","timeout":"","text_only":"","comment":"","checked":null},"text":"AA - Armed Forces AmericaAE - Armed Forces EuropeAK - AlaskaAL - AlabamaAP - Armed Forces PacificAR - ArkansasAZ - ArizonaCA - CaliforniaCO - ColoradoCT - ConnecticutDC - District of ColumbiaDE - DelawareFL - FloridaGA - GeorgiaHI - HawaiiIA - IowaID - IdahoIL - IllinoisIN - IndianaKS - KansasKY - KentuckyLA - LouisianaMA - MassachusettsMD - MarylandME - MaineMI - MichiganMN - MinnesotaMO - MissouriMS - MississippiMT - MontanaNC - North CarolinaND - North DakotaNE - NebraskaNH - New HampshireNJ - New JerseyNM - New MexicoNV - NevadaNY - New YorkOH - OhioOK - OklahomaOR - OregonPA - PennsylvaniaPR - Puerto RicoRI - Rhode IslandSC - South CarolinaSD - South DakotaTN - TennesseeTX - TexasUT - UtahVA - VirginiaVT - VermontWA - WashingtonWI - WisconsinWV - West VirginiaWY - Wyoming","field_key":"shipping_state","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"CA","name":"state","type":"select-one","id":"state","title":"","options":[{"text":"AA - Armed Forces America","value":"AA"},{"text":"AE - Armed Forces Europe","value":"AE"},{"text":"AK - Alaska","value":"AK"},{"text":"AL - Alabama","value":"AL"},{"text":"AP - Armed Forces Pacific","value":"AP"},{"text":"AR - Arkansas","value":"AR"},{"text":"AZ - Arizona","value":"AZ"},{"text":"CA - California","value":"CA"},{"text":"CO - Colorado","value":"CO"},{"text":"CT - Connecticut","value":"CT"},{"text":"DC - District of Columbia","value":"DC"},{"text":"DE - Delaware","value":"DE"},{"text":"FL - Florida","value":"FL"},{"text":"GA - Georgia","value":"GA"},{"text":"HI - Hawaii","value":"HI"},{"text":"IA - Iowa","value":"IA"},{"text":"ID - Idaho","value":"ID"},{"text":"IL - Illinois","value":"IL"},{"text":"IN - Indiana","value":"IN"},{"text":"KS - Kansas","value":"KS"},{"text":"KY - Kentucky","value":"KY"},{"text":"LA - Louisiana","value":"LA"},{"text":"MA - Massachusetts","value":"MA"},{"text":"MD - Maryland","value":"MD"},{"text":"ME - Maine","value":"ME"},{"text":"MI - Michigan","value":"MI"},{"text":"MN - Minnesota","value":"MN"},{"text":"MO - Missouri","value":"MO"},{"text":"MS - Mississippi","value":"MS"},{"text":"MT - Montana","value":"MT"},{"text":"NC - North Carolina","value":"NC"},{"text":"ND - North Dakota","value":"ND"},{"text":"NE - Nebraska","value":"NE"},{"text":"NH - New Hampshire","value":"NH"},{"text":"NJ - New Jersey","value":"NJ"},{"text":"NM - New Mexico","value":"NM"},{"text":"NV - Nevada","value":"NV"},{"text":"NY - New York","value":"NY"},{"text":"OH - Ohio","value":"OH"},{"text":"OK - Oklahoma","value":"OK"},{"text":"OR - Oregon","value":"OR"},{"text":"PA - Pennsylvania","value":"PA"},{"text":"PR - Puerto Rico","value":"PR"},{"text":"RI - Rhode Island","value":"RI"},{"text":"SC - South Carolina","value":"SC"},{"text":"SD - South Dakota","value":"SD"},{"text":"TN - Tennessee","value":"TN"},{"text":"TX - Texas","value":"TX"},{"text":"UT - Utah","value":"UT"},{"text":"VA - Virginia","value":"VA"},{"text":"VT - Vermont","value":"VT"},{"text":"WA - Washington","value":"WA"},{"text":"WI - Wisconsin","value":"WI"},{"text":"WV - West Virginia","value":"WV"},{"text":"WY - Wyoming","value":"WY"}],"label":"State/Region","selector":"#ship_address_form select#state","is_optional":"no","frame":"","timeout":"","text_only":"","comment":"","checked":null},"text":"AA - Armed Forces AmericaAE - Armed Forces EuropeAK - AlaskaAL - AlabamaAP - Armed Forces PacificAR - ArkansasAZ - ArizonaCA - CaliforniaCO - ColoradoCT - ConnecticutDC - District of ColumbiaDE - DelawareFL - FloridaGA - GeorgiaHI - HawaiiIA - IowaID - IdahoIL - IllinoisIN - IndianaKS - KansasKY - KentuckyLA - LouisianaMA - MassachusettsMD - MarylandME - MaineMI - MichiganMN - MinnesotaMO - MissouriMS - MississippiMT - MontanaNC - North CarolinaND - North DakotaNE - NebraskaNH - New HampshireNJ - New JerseyNM - New MexicoNV - NevadaNY - New YorkOH - OhioOK - OklahomaOR - OregonPA - PennsylvaniaPR - Puerto RicoRI - Rhode IslandSC - South CarolinaSD - South DakotaTN - TennesseeTX - TexasUT - UtahVA - VirginiaVT - VermontWA - WashingtonWI - WisconsinWV - West VirginiaWY - Wyoming","field_key":"shipping_state","field_type":""},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"button","id":"","title":"","options":null,"selector":"//div[contains(@data-comp, 'ShipAddressSection')]//button[contains(text(),'Save & Continue')]","is_optional":"no","frame":"","timeout":"","comment":"","checked":null,"has_custom_selector":true},"x":286,"y":685,"text":"Save & Continue"},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//button[contains(text(),'More delivery options')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// add class to selected shipping option [chioran.gabriel] 2019-09-11\r\nvar checkedShippingInput = __utils__.findOne(\"div[data-comp*='ShipMethodsList'] label input:checked\");\r\nif(checkedShippingInput){\r\n  checkedShippingInput.classList += ' ttSelectedShipping';\r\n}\r\n\r\n// extracting delivery shipping option \r\nvar selectedShipOpt = __utils__.findOne(\"//input[contains(@class,'ttSelectedShipping')]/parent::label//div[contains(@data-comp, 'ShipMethodDescription')]//div[contains(text(),'Estimated Delivery')]\");\r\nif (selectedShipOpt && selectedShipOpt.textContent.indexOf('(') > -1) {\r\n  var _ttEstDelText = selectedShipOpt.textContent.split('(')[1].split(')')[0];\r\n  if (_ttEstDelText) {\r\n    var _ttEstDelEl = document.createElement('div');\r\n    _ttEstDelEl.id = 'ttEstDelivery';\r\n    _ttEstDelEl.textContent = _ttEstDelText.trim();\r\n    document.body.appendChild(_ttEstDelEl);\r\n  }\r\n}\r\n","timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//div[contains(@data-comp, 'ShipOptionsForm')]//button[contains(text(),'Save & Continue')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null,"has_custom_selector":true}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"tagName":"INPUT","value":"4111111111111111","checked":null,"name":"cardNumber","type":"text","src":"","id":"cardNumber","title":"","options":null,"label":"Card number","selector":"[id='checkout_section2_body'] input#cardNumber","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"card_number","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"12","checked":null,"name":"expirationMonth","type":"text","src":"","id":"expirationMonth","title":"","options":null,"label":"MM","selector":"[id='checkout_section2_body'] input#expirationMonth","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"expiry_date_month","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"21","checked":null,"name":"expirationYear","type":"text","src":"","id":"expirationYear","title":"","options":null,"label":"YY","selector":"[id='checkout_section2_body'] input#expirationYear","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"expiry_date_year","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"123","checked":null,"name":"securityCode","type":"text","src":"","id":"securityCode","title":"","options":null,"label":"CVV/CVC","selector":"[id='checkout_section2_body'] input#securityCode","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"cvv","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"pear","checked":null,"name":"firstName","type":"text","src":"","id":"firstName","title":"","options":null,"label":"First name","selector":"[id='checkout_section2_body'] input#firstName","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"billing_first_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"anabell","checked":null,"name":"lastName","type":"text","src":"","id":"lastName","title":"","options":null,"label":"Last name","selector":"[id='checkout_section2_body'] input#lastName","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"billing_last_name","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"","checked":true,"name":"","type":"checkbox","src":"","id":"","title":"","options":null,"label":"Use a different address","selector":"//div[contains(text(),'Use a different address')]/parent::label/input","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true},"text":"","field_key":"billing_same_as_shipping","field_type":"hardcode"},{"type":2,"info":{"tagName":"INPUT","value":"(332) 345-6789","checked":null,"name":"phone","type":"text","src":"","id":"phone","title":"","options":null,"label":"Phone","selector":"[id='checkout_section2_body'] input#phone","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"billing_telephone","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"2240 latham square","checked":null,"name":"address1","type":"text","src":"","id":"address1","title":"","options":null,"label":"Street address","selector":"[id='checkout_section2_body'] input[id='address1']","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"billing_address","field_type":""},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"button","id":"","title":"","options":null,"selector":"div[data-comp*='PaymentSectionNewUser'] button[aria-controls='address2_section']","is_optional":"no","frame":"","timeout":"","comment":"","checked":null,"has_custom_selector":true},"x":282,"y":1153,"text":"Add Apt #, Floor, etc."},{"type":2,"info":{"tagName":"INPUT","value":"ap 1","checked":null,"name":"address2","type":"text","src":"","id":"address2","title":"","options":null,"label":"Apt #, Floor, etc","selector":"[id='address2_section'] input[id='address2']","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"billing_address_2","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"94040","checked":null,"name":"postalCode","type":"text","src":"","id":"postalCode","title":"","options":null,"label":"ZIP/Postal code","selector":"[id='checkout_section2_body'] input#postalCode","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"billing_zip","field_type":""},{"type":2,"info":{"tagName":"INPUT","value":"mountain view","checked":null,"name":"city","type":"text","src":"","id":"city","title":"","options":null,"label":"City","selector":"[id='checkout_section2_body'] input#city","is_optional":"no","frame":"","timeout":"","comment":""},"text":"","field_key":"billing_city","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"AZ","name":"state","type":"select-one","id":"state","title":"","options":[{"text":"AA - Armed Forces America","value":"AA"},{"text":"AE - Armed Forces Europe","value":"AE"},{"text":"AK - Alaska","value":"AK"},{"text":"AL - Alabama","value":"AL"},{"text":"AP - Armed Forces Pacific","value":"AP"},{"text":"AR - Arkansas","value":"AR"},{"text":"AZ - Arizona","value":"AZ"},{"text":"CA - California","value":"CA"},{"text":"CO - Colorado","value":"CO"},{"text":"CT - Connecticut","value":"CT"},{"text":"DC - District of Columbia","value":"DC"},{"text":"DE - Delaware","value":"DE"},{"text":"FL - Florida","value":"FL"},{"text":"GA - Georgia","value":"GA"},{"text":"HI - Hawaii","value":"HI"},{"text":"IA - Iowa","value":"IA"},{"text":"ID - Idaho","value":"ID"},{"text":"IL - Illinois","value":"IL"},{"text":"IN - Indiana","value":"IN"},{"text":"KS - Kansas","value":"KS"},{"text":"KY - Kentucky","value":"KY"},{"text":"LA - Louisiana","value":"LA"},{"text":"MA - Massachusetts","value":"MA"},{"text":"MD - Maryland","value":"MD"},{"text":"ME - Maine","value":"ME"},{"text":"MI - Michigan","value":"MI"},{"text":"MN - Minnesota","value":"MN"},{"text":"MO - Missouri","value":"MO"},{"text":"MS - Mississippi","value":"MS"},{"text":"MT - Montana","value":"MT"},{"text":"NC - North Carolina","value":"NC"},{"text":"ND - North Dakota","value":"ND"},{"text":"NE - Nebraska","value":"NE"},{"text":"NH - New Hampshire","value":"NH"},{"text":"NJ - New Jersey","value":"NJ"},{"text":"NM - New Mexico","value":"NM"},{"text":"NV - Nevada","value":"NV"},{"text":"NY - New York","value":"NY"},{"text":"OH - Ohio","value":"OH"},{"text":"OK - Oklahoma","value":"OK"},{"text":"OR - Oregon","value":"OR"},{"text":"PA - Pennsylvania","value":"PA"},{"text":"PR - Puerto Rico","value":"PR"},{"text":"RI - Rhode Island","value":"RI"},{"text":"SC - South Carolina","value":"SC"},{"text":"SD - South Dakota","value":"SD"},{"text":"TN - Tennessee","value":"TN"},{"text":"TX - Texas","value":"TX"},{"text":"UT - Utah","value":"UT"},{"text":"VA - Virginia","value":"VA"},{"text":"VT - Vermont","value":"VT"},{"text":"WA - Washington","value":"WA"},{"text":"WI - Wisconsin","value":"WI"},{"text":"WV - West Virginia","value":"WV"},{"text":"WY - Wyoming","value":"WY"}],"label":"State/Region","selector":"[id='checkout_section2_body'] select#state","is_optional":"no","frame":"","timeout":"","text_only":"","comment":"","checked":null},"text":"AA - Armed Forces AmericaAE - Armed Forces EuropeAK - AlaskaAL - AlabamaAP - Armed Forces PacificAR - ArkansasAZ - ArizonaCA - CaliforniaCO - ColoradoCT - ConnecticutDC - District of ColumbiaDE - DelawareFL - FloridaGA - GeorgiaHI - HawaiiIA - IowaID - IdahoIL - IllinoisIN - IndianaKS - KansasKY - KentuckyLA - LouisianaMA - MassachusettsMD - MarylandME - MaineMI - MichiganMN - MinnesotaMO - MissouriMS - MississippiMT - MontanaNC - North CarolinaND - North DakotaNE - NebraskaNH - New HampshireNJ - New JerseyNM - New MexicoNV - NevadaNY - New YorkOH - OhioOK - OklahomaOR - OregonPA - PennsylvaniaPR - Puerto RicoRI - Rhode IslandSC - South CarolinaSD - South DakotaTN - TennesseeTX - TexasUT - UtahVA - VirginiaVT - VermontWA - WashingtonWI - WisconsinWV - West VirginiaWY - Wyoming","field_key":"billing_state","field_type":""},{"type":2,"info":{"tagName":"SELECT","value":"CA","name":"state","type":"select-one","id":"state","title":"","options":[{"text":"AA - Armed Forces America","value":"AA"},{"text":"AE - Armed Forces Europe","value":"AE"},{"text":"AK - Alaska","value":"AK"},{"text":"AL - Alabama","value":"AL"},{"text":"AP - Armed Forces Pacific","value":"AP"},{"text":"AR - Arkansas","value":"AR"},{"text":"AZ - Arizona","value":"AZ"},{"text":"CA - California","value":"CA"},{"text":"CO - Colorado","value":"CO"},{"text":"CT - Connecticut","value":"CT"},{"text":"DC - District of Columbia","value":"DC"},{"text":"DE - Delaware","value":"DE"},{"text":"FL - Florida","value":"FL"},{"text":"GA - Georgia","value":"GA"},{"text":"HI - Hawaii","value":"HI"},{"text":"IA - Iowa","value":"IA"},{"text":"ID - Idaho","value":"ID"},{"text":"IL - Illinois","value":"IL"},{"text":"IN - Indiana","value":"IN"},{"text":"KS - Kansas","value":"KS"},{"text":"KY - Kentucky","value":"KY"},{"text":"LA - Louisiana","value":"LA"},{"text":"MA - Massachusetts","value":"MA"},{"text":"MD - Maryland","value":"MD"},{"text":"ME - Maine","value":"ME"},{"text":"MI - Michigan","value":"MI"},{"text":"MN - Minnesota","value":"MN"},{"text":"MO - Missouri","value":"MO"},{"text":"MS - Mississippi","value":"MS"},{"text":"MT - Montana","value":"MT"},{"text":"NC - North Carolina","value":"NC"},{"text":"ND - North Dakota","value":"ND"},{"text":"NE - Nebraska","value":"NE"},{"text":"NH - New Hampshire","value":"NH"},{"text":"NJ - New Jersey","value":"NJ"},{"text":"NM - New Mexico","value":"NM"},{"text":"NV - Nevada","value":"NV"},{"text":"NY - New York","value":"NY"},{"text":"OH - Ohio","value":"OH"},{"text":"OK - Oklahoma","value":"OK"},{"text":"OR - Oregon","value":"OR"},{"text":"PA - Pennsylvania","value":"PA"},{"text":"PR - Puerto Rico","value":"PR"},{"text":"RI - Rhode Island","value":"RI"},{"text":"SC - South Carolina","value":"SC"},{"text":"SD - South Dakota","value":"SD"},{"text":"TN - Tennessee","value":"TN"},{"text":"TX - Texas","value":"TX"},{"text":"UT - Utah","value":"UT"},{"text":"VA - Virginia","value":"VA"},{"text":"VT - Vermont","value":"VT"},{"text":"WA - Washington","value":"WA"},{"text":"WI - Wisconsin","value":"WI"},{"text":"WV - West Virginia","value":"WV"},{"text":"WY - Wyoming","value":"WY"}],"label":"State/Region","selector":"[id='checkout_section2_body'] select#state","is_optional":"no","frame":"","timeout":"","text_only":"","comment":"","checked":null},"text":"AA - Armed Forces AmericaAE - Armed Forces EuropeAK - AlaskaAL - AlabamaAP - Armed Forces PacificAR - ArkansasAZ - ArizonaCA - CaliforniaCO - ColoradoCT - ConnecticutDC - District of ColumbiaDE - DelawareFL - FloridaGA - GeorgiaHI - HawaiiIA - IowaID - IdahoIL - IllinoisIN - IndianaKS - KansasKY - KentuckyLA - LouisianaMA - MassachusettsMD - MarylandME - MaineMI - MichiganMN - MinnesotaMO - MissouriMS - MississippiMT - MontanaNC - North CarolinaND - North DakotaNE - NebraskaNH - New HampshireNJ - New JerseyNM - New MexicoNV - NevadaNY - New YorkOH - OhioOK - OklahomaOR - OregonPA - PennsylvaniaPR - Puerto RicoRI - Rhode IslandSC - South CarolinaSD - South DakotaTN - TennesseeTX - TexasUT - UtahVA - VirginiaVT - VermontWA - WashingtonWI - WisconsinWV - West VirginiaWY - Wyoming","field_key":"billing_state","field_type":""},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"button","id":"","title":"","options":null,"selector":"//div[contains(@data-comp, 'CheckoutCreditCardForm')]//button[contains(text(),'Place Order')]","is_optional":"no","frame":"","timeout":"","comment":"","checked":null,"has_custom_selector":true},"x":325,"y":1589,"text":"Place Order"}],"checkout_recording_noauth_mobile":null,"checkout_recording_noauth_extension":null,"checkout_recording_noauth_six":null,"checkout_recording_noauth_server":null,"sales_tax_div_noauth":{"selector":"[data-at=\"total_tax\"]","has_custom_selector":true,"recording_idx":"39","frame":""},"sales_tax_div_noauth_mobile":null,"sales_tax_div_noauth_extension":null,"sales_tax_div_noauth_six":null,"sales_tax_div_noauth_server":null,"shipping_estimate_div_noauth":{"selector":"div#ttEstDelivery","has_custom_selector":true,"recording_idx":"22","frame":""},"shipping_estimate_div_noauth_mobile":null,"shipping_estimate_div_noauth_extension":null,"shipping_estimate_div_noauth_six":null,"shipping_estimate_div_noauth_server":null,"checkout_information_noauth":null,"checkout_information_noauth_mobile":null,"checkout_information_noauth_extension":null,"checkout_information_noauth_six":null,"checkout_information_noauth_server":null,"order_id_div_noauth":{"selector":".OrderConfirm .u-mb3 a, a[data-at=\"confirmation_order_number\"]","has_custom_selector":true,"frame":""},"order_id_div_noauth_mobile":null,"order_id_div_noauth_extension":null,"order_id_div_noauth_six":null,"order_id_div_noauth_server":null,"coupon_value_div_noauth":null,"coupon_value_div_noauth_mobile":null,"coupon_value_div_noauth_extension":null,"coupon_value_div_noauth_six":null,"coupon_value_div_noauth_server":null,"gift_card_value_div_noauth":null,"gift_card_value_div_noauth_mobile":null,"gift_card_value_div_noauth_extension":null,"gift_card_value_div_noauth_six":null,"gift_card_value_div_noauth_server":null,"shipping_address_div_noauth":null,"shipping_address_div_noauth_mobile":null,"shipping_address_div_noauth_extension":null,"shipping_address_div_noauth_six":null,"shipping_address_div_noauth_server":null,"has_issues":false,"changelog":"RO-34519: Update the GID modifier","add_to_cart_changes_div_mobile":null,"recording_start_urls_mobile":null,"parent_id":{"$oid":"66d0d49243930e562bb9b2aa"},"created_at":{"$date":"2024-09-09T18:07:16.166Z"},"updated_at":{"$date":"2024-09-09T18:08:48.436Z"},"worker_honey_user_id":"8424507245273010515","activated_at":{"$date":"2024-09-09T18:08:54.403Z"},"activated_by_honey_user_id":"8424507245273010515","assignee_id":null}