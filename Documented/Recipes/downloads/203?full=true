{"_id":{"$oid":"637d1cb2e357d00001b48c05"},"scope":"complete","country":"us","engine":"chrome_vim","product_page_requires_account":"no","shipping_options_div_type":"none","end_delay":4000,"status":"live","old_status":"pending","website_url":"westelm.com","website_name":"West Elm","honey_id":"203","site_id":{"$oid":"529d9ca855a0f94fe8000002"},"partial_urls":["westelm.com"],"login_recording":null,"signup_recording":null,"title_div":{"selector":"div.product-info h1[data-test-id=\"product-title\"], div#ttTitle","has_custom_selector":true},"brand_div":{"selector":"site_name","has_custom_selector":true},"price_div":{"selector":"//div[contains(@class,'pip-summary')]//*[contains(@class,'product-subset')]//*[contains(@class,'price-state') and contains(@class,'price-standard')] | //div[contains(@class,'subsetPricing')][not(ancestor::*[contains(@class,'persistent-section') or contains(@class,'pip-info')])]//*[contains(@class,'price-state') and contains(@class,'price-standard')] | //div[contains(@class,'pip-summary')]//*[contains(@class,'price-state') and contains(@class,'price-sale') or contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[contains(@class,'price-container')]//*[contains(@class,'price-state') and contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[contains(@class,'subsetPricing')][not(ancestor::*[contains(@class,'persistent-section') or contains(@class,'pip-info')])]//*[contains(@class,'price-state') and contains(@class,'price-sale') or contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[@id='ttPrice'] ","has_custom_selector":true},"returns_div":null,"image_div":{"selector":"//section[contains(@class,'hero-container')]//div[contains(@class,'hero-image')]//a[contains(@class,'overlayTrigger')]//img[@id='hero'] | //div[contains(@class,'subset-image')][not(ancestor::div[contains(@data-style,'persistent-section')])]//img | //div[@id='item-image']//*[@data-style='carousel']//*[@data-test-id='thumbnail-widget-0']//img","has_custom_selector":true},"alt_images_div":{"selector":"//section[contains(@class,'hero-container')]//div[contains(@class,'scroller-container')]//a[not(contains(@class,'videoThumbnail'))]//img | //section[contains(@class,'hero-container')]//div[contains(@class,'hero-image')]//a[contains(@class,'overlayTrigger')]//img[@id='hero'] | //div[contains(@class,'subset-image')][not(ancestor::div[contains(@data-style, 'persistent-section')])]//img | //div[@id='item-image']//*[@data-style='carousel']//img","has_custom_selector":true},"custom_id_div":null,"extra_info_div":null,"weight_div":null,"product_container_div":null,"add_to_cart_recording":[{"type":1010,"info":{"selector":"//div[contains(@class, \"product-info\")]//*[@data-test-id=\"product-attributes\"]//li[@data-test-id=\"product-attribute-0\"] | //div[contains(@class,'pip-info')]//section[contains(@class,'simple-subset')]//*[contains(@class,'visual-attributes')][1] | //div[contains(@class,'guided-pip')]//*[contains(@class,'guided-pip-step-label')][1]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [cborodaty] 2021-09-15\r\nreturn __ttAttrGet(0);","set":"return __ttAttrSet(fillValue, 0);","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 1","field_type":""},{"type":1010,"info":{"selector":"//div[contains(@class, \"product-info\")]//*[@data-test-id=\"product-attributes\"]//li[@data-test-id=\"product-attribute-1\"] | //div[contains(@class,'pip-info')]//section[contains(@class,'simple-subset')]//*[contains(@class,'visual-attributes')][2] | //div[contains(@class,'guided-pip')]//*[contains(@class,'guided-pip-step-label')][2]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [cborodaty] 2021-09-15\r\nreturn __ttAttrGet(1);","set":"return __ttAttrSet(fillValue, 1);","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 2","field_type":""},{"type":1010,"info":{"selector":"//div[contains(@class, \"product-info\")]//*[@data-test-id=\"product-attributes\"]//li[@data-test-id=\"product-attribute-2\"] | //div[contains(@class,'pip-info')]//section[contains(@class,'simple-subset')]//*[contains(@class,'visual-attributes')][3] | //div[contains(@class,'guided-pip')]//*[contains(@class,'guided-pip-step-label')][3]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [cborodaty] 2021-09-15\r\nreturn __ttAttrGet(2);","set":"return __ttAttrSet(fillValue, 2);","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 3","field_type":""},{"type":1010,"info":{"selector":"//div[contains(@class, \"product-info\")]//*[@data-test-id=\"product-attributes\"]//li[@data-test-id=\"product-attribute-3\"] | //div[contains(@class,'pip-info')]//section[contains(@class,'simple-subset')]//*[contains(@class,'visual-attributes')][4] | //div[contains(@class,'guided-pip')]//*[contains(@class,'guided-pip-step-label')][4]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [cborodaty] 2021-09-15\r\nreturn __ttAttrGet(3);","set":"return __ttAttrSet(fillValue, 3);","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null,"has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":""},"field_key":"option 4","field_type":""},{"type":1010,"info":{"selector":"//div[contains(@class, \"product-info\")]//*[@data-test-id=\"product-attributes\"]//li[@data-test-id=\"product-attribute-4\"] | //div[contains(@class,'pip-info')]//section[contains(@class,'simple-subset')]//*[contains(@class,'visual-attributes')][5] | //div[contains(@class,'guided-pip')]//*[contains(@class,'guided-pip-step-label')][5]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [cborodaty] 2021-09-15\r\nreturn __ttAttrGet(4);","set":"return __ttAttrSet(fillValue, 4);","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"option 5","field_type":""},{"type":1010,"info":{"selector":"//div[contains(@class, \"product-info\")]//*[@data-test-id=\"product-attributes\"]//li[@data-test-id=\"product-attribute-5\"] | //div[contains(@class,'pip-info')]//section[contains(@class,'simple-subset')]//*[contains(@class,'visual-attributes')][6] | //div[contains(@class,'guided-pip')]//*[contains(@class,'guided-pip-step-label')][6]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [cborodaty] 2021-09-15\r\nreturn __ttAttrGet(5);\r\n","set":"return __ttAttrSet(fillValue, 5);","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"option 6","field_type":""},{"type":20,"info":{"tagName":"INPUT","value":"","checked":null,"name":"","type":"image","src":"http://ab.pkimgs.com/pkimgs/ab/images/i/201415/0063/images/common/buttons/btn_add-to-cart.gif","id":"","title":"","options":null,"ancestors":[{"attributes":{"id":"","className":"btn_addtobasket","href":null,"src":"http://ab.pkimgs.com/pkimgs/ab/images/i/201415/0063/images/common/buttons/btn_add-to-cart.gif","name":null,"type":"image"},"name":"INPUT"},{"attributes":{"id":"","className":"add-to-basket","href":null,"src":null,"name":null,"type":null},"name":"FIELDSET"},{"attributes":{"id":"","className":"addcart-options","href":null,"src":null,"name":null,"type":null},"name":"DIV"},{"attributes":{"id":"","className":"add-cart-container","href":null,"src":null,"name":null,"type":null},"name":"DIV"},{"attributes":{"id":"","className":"simple-subset","href":null,"src":null,"name":null,"type":null},"name":"SECTION"},{"attributes":{"id":"","className":"pip-summary","href":null,"src":null,"name":null,"type":null},"name":"DIV"},{"attributes":{"id":"","className":"pip-info","href":null,"src":null,"name":null,"type":null},"name":"DIV"},{"attributes":{"id":"","className":"purchasing-container","href":null,"src":null,"name":null,"type":null},"name":"DIV"},{"attributes":{"id":"main-content","className":"con simple-pip ","href":null,"src":null,"name":null,"type":null},"name":"DIV"},{"attributes":{"id":"pip","className":"wrap intl-wrap","href":null,"src":null,"name":null,"type":null},"name":"DIV"}],"selector":"//div[contains(@class, \"product-info\")]//button[@data-test-id=\"btn-addtobasket\"] | //div[contains(@class,'pip-info')]//button[contains(@class,'btn_addtobasket_add')] | //*[@id='subset-container']//button[@id='primaryGroup_addToCart_0']","withPath":"div#pip div div div div section div div fieldset input[type='image']","withoutPath":"div.add-cart-container div.addcart-options fieldset.add-to-basket input.btn_addtobasket[type='image']","is_optional":"no","has_custom_selector":true,"frame":"","timeout":"","only_on_checkout_type":"","comment":""},"x":625,"y":679,"text":""}],"add_to_cart_changes_div":{"selector":"span#cart-count","has_custom_selector":true},"remove_from_cart_recording":[],"order_error_divs":[{"selector":"ul.error","overwrite":"text"},{"selector":"span.error","overwrite":"text"},{"selector":"div.specific-error","overwrite":"text"},{"selector":"//form[@class='checkout-error']/p[1]","overwrite":"text"},{"selector":"//h3[contains(text(),'has exceeded the maximum order')]","overwrite":"text"},{"selector":"div#order-difficulties div.block-of-text","overwrite":"text"},{"selector":"div[id*='error'] span","overwrite":"text"},{"selector":"div.error-block li.message","overwrite":"text"}],"notes":"***Special Notes:\r\n--------> PARENT RECIPE: Pottery Barn Kids\r\n- Has skippable cart, cart/vim implemented at checkout\r\n- Users with website accounts can do express checkout which will take them straight to the PAYMENT section, right where place order button is, take this into account when implementing CART/VIM integrations\r\n- Checkout has shadowRoot elements that need special handling to access them. Fortunately, was able to find a URL to use ajax to get product info and create a prod URL for GID matching.\r\n- Has two types of products pages (v1,v2) meaning each type has different product page selectors\r\n\r\n***Old Notes:\r\nthe product title is completely different for each sku, and also vs. no-sku pre-selected:\r\n- \"Harper Quilted Decorative Shams\"\r\n\thttps://www.potterybarnkids.com/products/harper-quilted-decorative-shams/\r\n- \"Harper Decorative Sham, Gray\"\r\n\thttps://www.potterybarnkids.com/products/harper-quilted-decorative-shams/?sku=125745\r\n- \"Harper Small Quilted Sham, Navy\"\r\n\thttps://www.potterybarnkids.com/products/harper-quilted-decorative-shams/?sku=125786\r\n=> we remove the \"sku\" argument via crawl-URL-modifier, in order to have the same \"clean\" product-title for all skus (i.e. no pre-selected sku via URL)\r\n- also we extract the title from the \"og:title\" meta, to ensure that we get a \"clean\" title even from \"partial-observations\" on users' devices (i.e. crawl-URL-modifier NOT applied)\r\n\r\n*** GID Notes:\r\n- Targetting the URL title slug:\r\nProduct - https://www.westelm.com/products/sculptural-glass-globe-flushmount-medium-champagne-h3461/\r\nGID - sculptural-glass-globe-flushmount-medium-champagne-h3461\r\n\r\nProduct - https://www.westelm.com/products/belgian-linen-bed-skirt-b1788/\r\nGID - belgian-linen-bed-skirt-b1788\r\n\r\n*** Attributes:\r\n\r\nThere are many kinds of attributes and they don't appear in a specific order => generic attributes were implemented\r\nFor the attribute \"select\", the label in TT will remain empty, to avoid automatic deletion of attribute options containing the word \"select\".\r\n \r\n*** Product Types:\r\n \r\nNo attributes\r\nhttps://www.westelm.com/products/two-tone-zimbabwe-wall-baskets--set-of-3--e2524/\r\nhttps://www.westelm.com/products/pipeline-hall-tree-g763/?pkey=centryway-storage\r\n\r\nColor\r\nhttps://www.westelm.com/products/faux-fur-chinchilla-pillow-cover-throw-set-t6007/?pkey=cthrow-pillow-sets\r\nhttps://www.westelm.com/products/large-curved-baskets-d4400/\r\nhttps://www.westelm.com/products/nolan-lockers-set-of-3-h4019/?pkey=centryway-storage\r\n\r\nSelect\r\nhttps://www.westelm.com/products/mid-century-low-shelf-acorn-h5334/?pkey=centryway-storage\r\nhttps://www.westelm.com/products/tricolor-storage-baskets-d6383/  \r\nhttps://www.potterybarnkids.com/products/classic-book-nook-shelving/\r\n\r\nSize\r\nhttp://www.westelm.com/products/emmerson-dining-table-g504/\r\nhttp://www.westelm.com/products/parker-expandable-dining-table-g830/\r\nhttps://www.westelm.com/products/mid-century-bedframe-acorn-h001/\r\n\r\nSize & Color\r\nhttps://www.westelm.com/products/bishop-pedestal-planters-d6246/?pkey=cplant-shop\r\nhttps://www.westelm.com/products/lcl-closed-mondays-woven-bucket-basket-d5823/\r\nhttps://www.westelm.com/products/sketchbook-planters-d6244/?pkey=cplant-shop\r\nhttps://www.westelm.com/products/belgian-linen-bed-skirt-b1788/\r\n\r\nSize & Select\r\nhttps://www.westelm.com/products/simple-hurricane-a784/\r\nhttps://www.westelm.com/products/vertical-gro-system-planter-d10586/?pkey=cplant-shop\r\n\r\nSize & Type & Finish\r\nhttps://www.westelm.com/products/streamline-bookshelf-wood-h5768/?pkey=centryway-storage\r\n\r\nWidth & Length & Color\r\nhttps://www.westelm.com/products/custom-sisal-rug-t5176/\r\n\r\nSize & Color & Quantity\r\nhttps://www.westelm.com/products/marled-linen-pillow-cover-t5972/?pkey=call-pillows-throws-poufs\r\n\r\nV2 (1 options)\r\nhttps://www.westelm.com/products/shelter-bench-queen-h6965/?pkey=centryway-storage\r\nhttps://www.westelm.com/products/mid-century-show-wood-recliner-h6967/?pkey=call-living-room\r\n\r\nV2 (2 options)\r\nhttps://www.westelm.com/products/axel-leather-sofa-h1465/\r\nhttps://www.westelm.com/products/modular-harmony-sectional-modular-h6266/?pkey=call-living-room\r\nhttps://www.westelm.com/products/phoebe-chair-h2643/?pkey=call-living-room\r\n\r\nV2 (3 options)\r\nhttps://www.westelm.com/products/mid-century-leather-show-wood-chair-h1423/?pkey=call-living-room\r\nhttps://www.westelm.com/products/harris-loft-sofa-76-h4991/?pkey=call-living-room\r\nhttps://www.westelm.com/products/harper-2-piece-chaise-sectional-h6919/?pkey=call-living-room\r\nhttps://www.westelm.com/products/henry-sleeper-g228/\r\nhttps://www.westelm.com/products/drake-sofa-76-h2859/\r\n\r\nV2 (4 options) (have not been able to find one product like this that does not timeout, but does might exist out there on the site)\r\nhttps://www.westelm.com/products/paidge-sofa-h211/  --> TimesOut\r\nhttps://www.westelm.com/products/deco-upholstered-bed-h1776/    --> TimesOut\r\n\r\nRange Pricing\r\nhttps://www.westelm.com/products/cityscape-planters-d987/?pkey=cplant-shop\r\n\r\nSale Price\r\nhttps://www.westelm.com/products/soft-corded-pillow-cover-throw-set-t6005/?pkey=cthrow-pillow-sets\r\n\r\nOpen Box\r\nhttps://www.westelm.com/products/open-box-panel-tufted-headboard-g673/?pkey=copen-box-deals\r\n\r\nOOS\r\nhttp://www.westelm.com/products/silver-flecked-sphere-hurricanes-e759/\r\nhttp://www.westelm.com/products/rounded-retro-armless-sofa-h765/\r\n\r\n*** Not Supported:\r\n\r\nMultiproducts\r\nhttps://www.westelm.com/products/build-your-own-nolan-entryway-collection-h4021/?pkey=centryway-storage\r\nhttps://www.westelm.com/products/belgian-linen-duvet-cover-shams-b1580/  \r\nhttps://www.westelm.com/products/crinkle-velvet-duvet-cover-shams-b2259/\r\n\r\nBuild Your Own (Sectional)\r\nhttps://www.westelm.com/sectional-builder/Sectional_Haven/?groupId=haven-2-piece-terminal-chaise-sectional-h3422\r\n\r\nTimeout (too many attribute variants) [from sibling recipe]\r\nhttps://www.westelm.com/products/andes-3-piece-chaise-sectional-h1815/?pkey=call-living-room\r\n","sku_identifier":{"selector":"//div[contains(@class, \"product-info\")]//div[contains(@data-style,'pip-quantity-selector')]/@sku | //*[@class=\"ttSKU\"]","has_custom_selector":true},"mpn_identifier":null,"gtin_identifier":null,"final_price_div_auth":null,"shipping_price_div_auth":null,"handling_price_div_auth":null,"checkout_recording_auth":null,"currency_format":"$AMOUNT","recording_start_urls":{"addToCart":"http://www.potterybarnkids.com/products/fillmore-crib/?pkey=bcribs&","removeFromCart":"","noauthCheckout":"http://www.potterybarnkids.com/shoppingcart/","login":"https://secure.potterybarnkids.com/account/login.html","authCheckout":"http://www.potterybarnkids.com/shoppingcart/","coupon":"https://www.potterybarnkids.com/checkout/payment.html"},"recording_end_urls":{"addToCart":"http://www.westelm.com/products/henry-deluxe-sleeper-h856/?pkey=csleeper-sofas&cm_src=sleeper-sofas||NoFacet-_-NoFacet-_--_-","noauthCheckout":"https://secure.westelm.com/checkout/payment.html","coupon":"https://secure.westelm.com/checkout/payment.html","login":"https://secure.westelm.com/account/login.html","authRemoveAddresses":"https://secure.westelm.com/account/addressbook/","authRemovePayments":"https://secure.westelm.com/account/creditcard/create.html?removeSuccessful=true&completion=cc-remove","authCheckout":"https://secure.westelm.com/checkout/payment.html","removeFromCart":"https://secure.westelm.com/shoppingcart/"},"category_wrapper_div":{"selector":"ul#breadcrumbs li a span, #breadcrumb-list [itemprop=\"name\"]","has_custom_selector":true},"address_check_auth":null,"final_sale_div":null,"original_price_div":{"selector":"//div[contains(@class,'pip-summary')]//*[contains(@class,'product-subset')]//*[contains(@class,'price-state') and contains(@class,'price-standard')] | //div[contains(@class,'subsetPricing')][not(ancestor::*[contains(@class,'persistent-section') or contains(@class,'pip-info')])]//*[contains(@class,'price-state') and contains(@class,'price-standard')] | //div[contains(@class,'pip-summary')]//*[contains(@class,'price-state') and contains(@class,'price-sale') or contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[contains(@class,'price-container')]//*[contains(@class,'price-state') and contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[contains(@class,'subsetPricing')][not(ancestor::*[contains(@class,'persistent-section') or contains(@class,'pip-info')])]//*[contains(@class,'price-state') and contains(@class,'price-sale') or contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[contains(@class, 'product-info')]//div[contains(@class, 'product-pricing')]//*[contains(@class, 'suggested-price')]//span[contains(@class, 'amount')]","has_custom_selector":true},"discounted_price_div":{"selector":"//div[contains(@class,'pip-summary')]//*[contains(@class,'price-state') and contains(@class,'price-sale') or contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[contains(@class,'price-container')]//*[contains(@class,'price-state') and contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[contains(@class,'subsetPricing')][not(ancestor::*[contains(@class,'persistent-section') or contains(@class,'pip-info')])]//*[contains(@class,'price-state') and contains(@class,'price-sale') or contains(@class,'price-special')]//span[contains(@class,'currencyUSD')] | //div[@id='ttSalePrice'] ","has_custom_selector":true},"sales_tax_div_auth":null,"shipping_estimate_div_auth":null,"pickup_div":null,"non_purchasable_div":null,"p_free_shipping_div":null,"errors_meta":[],"data_converters":{"shipping_name":[{"type":"simple","converter_id":"53b1ca44ce04fae49f000002"}],"shipping_address":[{"type":"simple","converter_id":"no_conversion"}],"shipping_city":[{"type":"simple","converter_id":"no_conversion"}],"shipping_state":[{"type":"simple","converter_id":"51ebf9e755a0f90acc00000c"}],"shipping_zip":[{"type":"simple","converter_id":"no_conversion"}],"shipping_telephone":[{"type":"simple","converter_id":"no_conversion"}],"billing_name":[{"type":"simple","converter_id":"53b1cbc9ce04fae49f000007"}],"billing_address":[{"type":"simple","converter_id":"no_conversion"}],"billing_city":[{"type":"simple","converter_id":"no_conversion"}],"billing_state":[{"type":"simple","converter_id":"51ebf9e755a0f90acc00000c"}],"billing_zip":[{"type":"simple","converter_id":"no_conversion"}],"billing_telephone":[{"type":"simple","converter_id":"no_conversion"}],"card_type":[{"type":"simple","converter_id":"51ebf48f55a0f90acc000004"}],"card_number":[{"type":"simple","converter_id":"no_conversion"}],"expiry_date_month":[{"type":"simple","converter_id":"51ebf78555a0f90acc000007"}],"expiry_date_year":[{"type":"simple","converter_id":"51ebf8dc55a0f90acc00000a"}]},"logo":null,"delays":{"product_opts_field":"","product_opts":295000,"add_to_cart_field_press":"","add_to_cart":500},"user_agent":null,"user_agent_scope":["cart","purchase"],"needed_banned_remote_urls":["doubleclick.net","google-analytics.com","analytics.google.com"],"contact":"https://secure.westelm.com/customer-service/email-us/","ship_est_start_time":null,"est_stats_start_time":null,"checkout_information_auth":null,"regression_tests_status":{"daily_noauth_simple_test":{"at":{"$date":"2020-07-10T01:21:38.072Z"},"status":"ok","issues":null,"consecutive_failures":1,"assigned_to_worker_id":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0},"local_success_test":{"at":{"$date":"2019-07-04T12:51:27.300Z"},"status":"ok","issues":null,"consecutive_failures":0,"cart_failures":0,"purchase_failures":0,"estimation_failures":0},"auth_success_test":{"at":{"$date":"2020-02-05T05:59:13.302Z"},"status":"ok","issues":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0},"noauth_success_test":{"at":{"$date":"2020-09-28T02:55:12.758Z"},"status":"failed","issues":["Purchase failed before confirm with an unknown error."],"cart_failures":19,"purchase_failures":0,"estimation_failures":0}},"checkout_dep_fields":null,"regression_products":[{"url":"https://www.westelm.com/products/two-tone-zimbabwe-wall-baskets--set-of-3--e2524/","source":"manual"},{"url":"https://www.westelm.com/products/mid-century-low-shelf-acorn-h5334/?pkey=centryway-storage","source":"manual"},{"url":"http://www.westelm.com/products/emmerson-dining-table-g504/","source":"manual"},{"url":"https://www.westelm.com/products/bishop-pedestal-planters-d6246/?pkey=cplant-shop","source":"manual"},{"url":"https://www.westelm.com/products/simple-hurricane-a784/","source":"manual"},{"url":"https://www.westelm.com/products/streamline-bookshelf-wood-h5768/?pkey=centryway-storage","source":"manual"},{"url":"https://www.westelm.com/products/axel-leather-sofa-h1465/","source":"manual"},{"url":"https://www.westelm.com/products/marled-linen-pillow-cover-t5972/?pkey=call-pillows-throws-poufs","source":"manual"}],"store_options":{"images_on_add_to_cart":"yes","noauth_ends_with_success":null,"auth_ends_with_success":null,"disable_disk_cache":"yes","creates_store_account":null,"existing_account_emails_not_allowed":null,"retry_on_info_failures":null,"final_price_includes_gift_card":null,"final_price_before_coupon":null,"use_us_proxy":null,"disable_product_quantity":false,"disable_daily_regressions":null,"local_ends_with_success":null,"new_coupon":null,"disable_image_proxy":null,"overwrite_sales_tax":null,"sync_noauth_and_auth":null,"add_app_to_ua":null,"one_coupon_only":"yes","shoprunner_on_shipping_opts":null,"continue_on_alerts":null,"honey_billing_address":null,"use_chrome":null,"is_variantless":null},"product_opts_retrieval_js":"$('#ttHidden').remove();\n\n// blocking multi product pages: https://www.potterybarnkids.com/products/belgian-flax-linen-nursery-bedding-unisex/  [Sergio Conde 2020-02-11]\nvar multiProduct = __utils__.findOne('section#subset-container > section.subset-section div.product-subset') ||\n    __utils__.findOne('.multibuy-container');\n\n// will use this global variable in GET/SETs to determine v2 product handling and ttReset\nv2Prod = false;\n// blocking V2 products with more than 5 attributes (since thinking of user experience, more than 5 attributes does not look good)\n// https://www.williams-sonoma.com/products/laguna-sofa-leather/?pkey=s%7Csofa%7C357\nvar v2Count = __utils__.findAll(\"//div[contains(@class,'guided-pip')]//*[contains(@class,'guidedPipStepContainer')]\").length;\nif (multiProduct || v2Count > 5) {\n  __utils__.echo('--- ERROR! - PRODUCT NOT SUPPORTED');\n  __utils__.echo('escapeVim');\n  return false;\n}\n\nif (v2Count) {\n  v2Prod = true;\n}\n\n// injecting hidden div [Liviu Pop] 2019-09-06\n$('body').append(\"<div id='ttHidden' style='display: none;'></div>\");\n\n// removing unwanted characters from title of V1 products, then injecting into hidden div[Sergio Conde 2020-11-04]\n// https://www.potterybarnkids.com/products/naturepedic-verse-mattress/\nvar elProductTitle = __utils__.findOne(\"//meta[@property='og:title']\");\nvar productTitleText = elProductTitle && elProductTitle.attr('content') && elProductTitle.attr('content');\n\nif (!productTitleText) {\n  productTitleText = __utils__.findOne('li.breadcrumb-list-current-item.current') && __utils__.findOne('li.breadcrumb-list-current-item.current').text();\n}\n\nproductTitleText = productTitleText && productTitleText.replace(/<sup>.*<\\/sup>/g, '').replace(/&#\\d+;/g,'').replace(/\\d{2,}/g,'');\nif(productTitleText){\n  $(\"div#ttHidden\").append(\"<div id='ttTitle'>\" + productTitleText + \"</div>\");\n}\n\n/* Built using Prepared Product Data & Generic attributes [Courtney Borodaty] 2021-09-20\n   In the DOM on every PDP is a script with the object 'WSI.assortmentJson', \n   this contains all the info we need to generate preparedProductData\n   For explanation on PPD: https://joinhoney.atlassian.net/wiki/spaces/SI/pages/1773764969/preparedProductData\n*/\n\n// Global Variables for PPD\n_ttFillValues = [];\n_ppdKeys = [];\n_ttOptsSorted = [];\npreparedProductData = {};\nattrComboList = {};\nattrCombo = [];\nattrVals = [];\nattrTitles = [];\n\n/* 1. Get the data \n   -- returns => JSON object containing all product & attribute info\n   Parses the DOM to extract the script object and return the JSON object\n*/\n_ttGetData = function() {\n  var pdpRegex = /WSI\\.assortmentJson.*=((.*)\"filterAttributeNames\":{.*}})/;\n  var pdpObj = __utils__.findOne('script:contains(\"WSI.assortmentJson\")');\n  var pdpObjText = pdpObj && pdpObj.text();\n  var pdpObjTextMatch = pdpRegex.exec(pdpObjText);\n  if (!pdpObjTextMatch) {\n    pdpObj = __utils__.findAll('script:contains(\"WSI.assortmentJson\")')[1];\n    var pdpObjText = pdpObj && pdpObj.text();\n    var pdpObjTextMatch = pdpRegex.exec(pdpObjText);\n    \n  }\n  var parsedObj = pdpObjTextMatch && JSON.parse(pdpObjTextMatch[1]);\n  return parsedObj;\n};\n\n/* 2a. Format the data\n   -- productData = JSON object returned from _ttGetData()\n   -- attrObj = object from productData that contains info on a product variant\n   -- returns =>  an object containing attribute variant information (price, image, alt_images, weight, extra_info)\n   \n   Grabs the product price and image for an attribute variant.\n   \n   Note: the object does not contain alt image, weight, or extra information about the product, so these will also be blank in the returned object\n*/\n_ttGetInfo = function(productData, attrObj) {\n  var priceRaw = attrObj[4];\n  var priceFormatted = priceRaw && price.format(priceRaw); // format price with a $ in front because it does not have one in the object and two tap will default to the price selector without it\n  var imgRaw = productData.strings[attrObj[13]];\n  var img = _ttFormatImg(imgRaw);\n  var sku = attrObj[0];\n  var productInfo = {\"price\": priceFormatted, \"image\": img, \"sku\": sku, \"alt_images\": [], \"weight\":\"\", \"extra_info\": \"\"};\n  return productInfo;\n};\n\n/* 2b. Format the image\n   -- imgRaw = the partial image url from WSI.assortmentJson object\n   -- returns => full image url \n   \n   Turns the partial image url stored in the script object into the full url needed to access the image.\n   \n   Note: The recipes synced under Pottery Barn Kids have different image urls, so we need to determine which site the product is on and use that to\n   build the correct image url.\n*/\n_ttFormatImg = function(imgRaw) {\n  var partialRegex = /www\\.(.+)\\.com/;\n  var currURL = location.href;\n  var currPartial = partialRegex.exec(currURL) && partialRegex.exec(currURL)[1];\n  var fullImg = '';\n  switch(currPartial) {\n    case 'potterybarn':\n      fullImg = 'https://assets.pbimgs.com/pbimgs/rk/images/dp/' + imgRaw;\n      break;\n    case 'potterybarnkids':\n      fullImg = 'https://assets.pkimgs.com/pkimgs/rk/images/dp/' + imgRaw;\n      break;\n    case 'williams-sonoma':\n      fullImg = 'https://assets.wsimgs.com/wsimgs/ab/images/dp/' + imgRaw;\n      break;\n    case 'westelm':\n      fullImg = 'https://assets.weimgs.com/weimgs/rk/images/' + imgRaw;\n      break;\n    case 'pbteen':\n      fullImg = 'https://assets.ptimgs.com/ptimgs/rk/images/dp/' + imgRaw;\n      break;\n    case 'markandgraham':\n      fullImg = 'ttps://assets.mgimgs.com/mgimgs/rk/images/dp/' + imgRaw;\n      break;\n    default:\n      fullImg = imgRaw;\n  }\n  \n  fullImg = fullImg + 'o.jpg';\n  return fullImg;\n};\n\n/* 3a. Build prepared product data for V1 pdps\n   -- productData = JSON object returned from _ttGetData()\n   -- attr = parent object containing all attributes\n   -- attrOps = child object of parent where each child is an attribute option\n\n   This recursive function traverses the nested structure of the JSON object, building each \n   attribute variant as it goes deeper into the object. When it can not go any deeper, calls \n   __ttGetInfo on that attribute variant and sets a new PPD entry, then backtraces up the nested\n   structure, visitng any unexplored attribute variants until all have been seen.\n*/\n_ttBuildAttribute = function(productData, attr, attrOpts) {\n  // Remove the 'Select' from the attribute title or replace select with option if no other title\n    var attrTitle = productData.strings[attr[0]].replace(/(Please Select|Select\\s|Select)/gi,'').replace(':','').trim(); //.replace(/(Select\\s|Select:)/gi,'');\n    if (attrTitle === '') {\n      attrTitle = 'Option';\n    }\n    attrTitles.push(attrTitle);\n    var attrOptsKeys = Object.keys(attrOpts);\n    attrOptsKeys.forEach( function(key) {\n      var attrOptIndx = attrOpts[key];\n      var attrOptIndxKeys = Object.keys(attrOptIndx);\n      var attrOptName = productData.strings[attrOptIndxKeys[0]];\n      attrCombo.push(attrTitle + ': ' + attrOptName);\n      attrVals.push(attrTitle + ': ' + attrOptName);\n\n      var nextAttr = attrOptIndx[attrOptIndxKeys[0]];\n      var nextAttrKeys = Object.keys(nextAttr);\n      if (nextAttrKeys.length != 42) { // product has another attribute\n        _ttBuildAttribute(productData, nextAttrKeys, nextAttr[nextAttrKeys[0]]);\n      } else {\n        // build PPD entry for product only if in stock \n        if (nextAttr[27] === true) {\n          var attrInfo = _ttGetInfo(productData, nextAttr);\n          attrComboList[attrCombo.join(\"--XX--\")] = attrInfo;\n        }\n      }\n      attrCombo.pop();\n    });\n};\n\n/* 3b. Build prepared product data for V2 pdps\n   -- productData = JSON object returned from _ttGetData()\n   -- attrObj = parent object containing all attribute variants\n  \n  V2 pdps have a parent JSON object with children where each child is a unique\n  attribute variant (no nested structure like V1 pdps). Here we loop over each\n  child and build a PPD entry for each attribute variant.\n  \n  Note: Fabric and Color are stored separately in productData object but appear\n  together as one attribute on the page.\n*/\n_ttBuildV2Product = function(productData, attrObj) {\n  var matchRegex = /.*\\/([^\\d]*)/;\n  var titleValMap = {};\n  \n  // build out attr titles\n  Object.keys(productData.attributeNames).forEach ( function(val) {\n    \n    var attrTitle = productData.strings[productData.attributeNames[val]];\n    // skip \"Delivery\", which is not a clickable attribute on the product page\n    if (attrTitle && attrTitle !== \"Delivery\") {\n      // combine fabric and color to be one attribute, which is how they appear on the page\n      if (attrTitle == \"Fabric\") {\n        attrTitle = attrTitle + \"/Color\";\n      }\n      attrTitles.push(attrTitle);\n      titleValMap[attrTitle] = val;\n    }\n  });\n  \n  var attrOpts = productData.groups.main.subsets[0].skus;\n  var attrOptsKeys = attrOpts && Object.keys(attrOpts);\n  attrOptsKeys.forEach( function(key) {\n    // build PPD entry for product only if in stock\n    if (attrOpts[key][27] === false) {\n      return;\n    }\n    \n    attrTitles.forEach( function(attr) {\n      // skip color as it is handled during fabric\n      if (attr == \"Color\") {\n        return;\n      }\n      \n      // look up in productData strings\n      var attrOptName = productData.strings[attrOpts[key][23][titleValMap[attr]]];\n      // combine and format fabric/color option values as single string\n      if (attr == \"Fabric/Color\") {\n        var colorText = productData.strings[attrOpts[key][23][titleValMap['Color']]];\n        var colorTextMatch = matchRegex.exec(colorText) ? matchRegex.exec(colorText)[1] : colorText;\n        var colorTextFormatted = colorTextMatch.replace(/-/g, ' ');\n        var fabricText = matchRegex.exec(attrOptName) ? matchRegex.exec(attrOptName)[1] : attrOptName;\n        var fabricTextFormatted = fabricText.replace(/-/g, ' ');\n        attrOptName = colorTextFormatted + '/' + fabricTextFormatted;\n      }\n      \n      attrCombo.push(attr + ': ' + attrOptName);\n      attrVals.push(attr + ': ' + attrOptName);\n    });\n    var attrInfo = _ttGetInfo(productData, attrOpts[key]);\n    attrComboList[attrCombo.join(\"--XX--\")] = attrInfo;\n    \n    attrCombo = [];\n  });\n};\n\n/* 3c. Build prepared product data \n   -- productData = JSON object returned from _ttGetData()\n  \n  Calls a build function depending on whether pdp is V1 or V2. Populates \n  _ttOptsSorted after PPD has been built.\n*/\n_ttBuildPreparedProductData = function(productData) {\n  var attributes = Object.keys(productData.groups.main.subsets[0]);\n  \n  // V2 product pages have slightly different structure in script Object\n  // eg. https://www.potterybarnkids.com/products/eliza-tufted-bed/\n  if (v2Prod) {\n    _ttBuildV2Product(productData, attributes);\n  } else {\n    // V1 products are handled below with call to recursive function\n    // eg. https://www.potterybarnkids.com/products/baby-chevron-sateen-crib-fitted-sheet/?pkey=ccrib-sheets\n    var attrOpts = productData.groups.main.subsets[0][attributes[0]];\n    if (attrOpts.length != 42) { // product has 1 or more attributes\n      _ttBuildAttribute(productData, attributes, attrOpts);\n    } else {\n      return [];\n    }\n  }\n  // remove duplicate values from attrVals\n  var uniqueAttrVals = attrVals.filter( function(value, index) {\n    return attrVals.indexOf(value) === index;\n  });\n  \n  // remove duplicate values from attrTitles\n  var uniqueAttrTitles = attrTitles.filter( function(value, index) {\n    return attrTitles.indexOf(value) === index;\n  });\n  \n  // build _ttOptsSorted for use in attribute GET\n  // group attribute values together based on same attribute title\n  for (var iPos = 0; iPos < uniqueAttrTitles.length; iPos++) {\n    var sameAttr = [];\n    var titleRegex = /(.+):.+/;\n    uniqueAttrVals.forEach( function(val) {\n      var title = titleRegex.exec(val) && titleRegex.exec(val)[1];\n      if (title == uniqueAttrTitles[iPos]) {\n        sameAttr.push(val);\n      }\n    });\n    _ttOptsSorted.push(sameAttr);\n  }\n  return attrComboList;\n};\n\n/* START HERE */\n// Below is where we call all the functions above! \nproductOptsBlock = true;\n\n// 1. Get the Data\nvar _data = _ttGetData();\n\n// 2. Format/Build the Data\npreparedProductData = _data && _ttBuildPreparedProductData(_data);\n_ppdKeys = preparedProductData && Object.keys(preparedProductData);\n\n// initialize _ttFillValues with the first variant combo\nvar initial = Object.keys(attrComboList)[0] && Object.keys(attrComboList)[0].split('--XX--');\nif (initial) {\n  for (i = 0; i < initial.length; i++) {\n    _ttFillValues.push(initial[i]);\n  }\n}\n\nproductOptsBlock = false;\n/* Prod Opts code ends here, below is Get/Sets for generic attributes */\n\nttUpdatePrice = function() {\n  $('#ttPrice').remove();\n  $('#ttSalePrice').remove();\n  var priceEl = __utils__.findOne('div.product-info .product-pricing span.amount:first');\n  var priceClean = priceEl && price.clean(priceEl.text());\n  var salePriceEl = __utils__.findOne('div.product-info .product-pricing .sale-price span.amount');\n  var salePriceClean = salePriceEl && price.clean(salePriceEl.text());\n  \n  if(priceClean) {\n    $('#ttHidden').append(\"<div id='ttPrice'>\" + priceClean + \"</div>\");\n  }\n  if(salePriceClean) {\n    $('#ttHidden').append(\"<div id='ttSalePrice'>\" + salePriceClean + \"</div>\");\n  }\n};\nttUpdatePrice();\n\n// GET function for generic attributes\n__ttAttrGet = function (idx) {\n  var result = [];\n    if (_ppdKeys) {\n      var preResult = {};  // Unsorted result map\n      // checking each preparedProductData key \n      for (var iPos = 0; iPos < _ppdKeys.length; iPos++) {\n        var key = _ppdKeys[iPos];            // ex: \"Option1--XX--Option2--XX--Option3\"\n        var elValues = key.split('--XX--'); // Splitting key into array --> [Option1, Option2, Option3]\n        // Check if all previously chosen fillValues match key before getting values for current (idx) attribute\n        var match = true;                   \n        for (var jPos = 0; jPos < idx; jPos++) {\n          var fillValue = _ttFillValues[jPos];    // Updated in _ttAttrSet\n            \n          var matchValue = elValues[jPos];\n          if (fillValue != matchValue) { \n            match = false;\n            // ex: if _ttFillValues == [red, M, 32] && idx == 2;\n            //  idx: 0  | idx: 1  | idx: 2  | match   |\n            //  red     | M       | 22      | true    |\n            //  red     | M       | 34      | true    |\n            //  BLUE    | M       | 22      | false   |\n            //  red     | XXL     | 22      | false   |\n          }\n        }\n        if (!match) { // Skip current option if it does not match current fillValues up to idx\n          continue;\n        }\n\n        // Current key matches currently selected values\n        var elValue = elValues[idx];\n        if (!preResult[elValue]) { // Add value to un-ordered preResult map\n          preResult[elValue] = true;\n          }\n        }\n\n        // Comparing values from preResult to _ttOptsSorted and populating result in order\n        // _ttOptsSorted[\n        //                [value, value, value],  | idx = 1\n        //                [value, value, value],  | idx = 2\n        //              ]\n        if (Object.keys(preResult).length) {\n        var optsSorted = _ttOptsSorted[idx];  // Getting ordered values of current attribute idx from _ttOptsSorted\n        for (var iPos = 0; iPos < optsSorted.length; iPos++) {\n          var elValue = optsSorted[iPos];\n          if (preResult[elValue] >= 0) {      // If ordered value matches a preResult key, build object and push to result\n            var obj = { value: elValue, text: elValue };\n            result.push(obj);\n          }\n        }\n      }\n    } else {\n      var attrLabelDiv = __utils__.findOne('.product-info [data-test-id=\"product-attributes\"] li[data-test-id=\"product-attribute-' + idx + '\"] legend');\n      var attrLabel = attrLabelDiv && (/Select(.*):/).exec(attrLabelDiv.text()) && (/Select(.*):/).exec(attrLabelDiv.text())[1].trim();\n      if(!attrLabel) {\n        attrLabel = 'option';\n      }\n      var opts = __utils__.findAll('.product-info [data-test-id=\"product-attributes\"] li[data-test-id=\"product-attribute-' + idx + '\"] li');\n      for (var iPos = 0; iPos < opts.length; iPos++) {\n        var el = opts[iPos];\n        if(el.find('.unavailable').length) {\n          continue;\n        }\n        // v1 attributes - www.pbteen.com/products/seafoam-ombre-recycled-classic-shower-caddy-bath-bundle-set/\n        var elValue = el.find('.label-container').text().trim();\n        var elText = '';\n        if(attrLabel && elValue) {\n          elText = attrLabel + ': ' + elValue;\n        }\n        // v2 attributes (radio) - https://www.pbteen.com/products/faux-fur-mohair-throw/?pkey=cbedding-all\n        if(!elValue) {\n          elValue = el.find('img.image-thumb').prop('src');\n          elVariantText = el.find('img.image-thumb').attr('alt');\n          if (attrLabel && elVariantText) {\n            elText = attrLabel + ': ' + elVariantText;\n          }\n        }\n        var obj = { text: elText, value: elValue };\n        result.push(obj);\n      }\n    }\n    return result;\n};\n\nvar firstSkuFind = true;\n_ttUpdateSKU = function() {\n  $('.ttSKU').remove();\n  var skuIdx = _ttFillValues.join('--XX--');\n  var pageSku = __utils__.findOne(\"//*[@data-sku-results]\");\n  var sku = attrComboList[skuIdx] && attrComboList[skuIdx]['sku'] || firstSkuFind && pageSku && pageSku.attr(\"data-sku-results\");\n  firstSkuFind = false;\n  if(sku) {\n    $('#ttHidden').append('<div class=\"ttSKU\">' + sku + '</div>');\n  }\n};\n_ttUpdateSKU();\n\n// SET function for generic attributes\n__ttAttrSet = function (fillValue, idx) {\n  if (_ppdKeys) {\n    _ttFillValues[idx] = fillValue;\n    _ttUpdateSKU();\n    return true;\n  } else {\n    __utils__.echo('--- option ' + idx + ' fillValue = ' + fillValue);\n    var changed = false;\n    var opts = __utils__.findAll('.product-info [data-test-id=\"product-attributes\"] li[data-test-id=\"product-attribute-' + idx + '\"] li');\n    for (var iPos = 0; iPos < opts.length; iPos++) {\n      var el = opts[iPos];\n      if(el.find('.unavailable').length) {\n        continue;\n      }\n      // v1 \n      var elValue = el.find('.label-container').text().trim();\n      // v2 \n      if(!elValue) elValue = el.find('img.image-thumb').prop('src');\n\n      var elButton = el.find('input');\n      //var elButton = el.find('[data-ol-has-click-handler] label');\n      if ((elValue == fillValue) && elButton) {\n        __utils__.mouseEvent('click', elButton);\n        changed = true;\n        sleep(1000);\n        ttUpdatePrice();\n        break;\n      }\n    }\n    return changed;  \n  }\n};","coupon_recording":[{"type":2,"info":{"tagName":"INPUT","value":"","checked":null,"name":"promoCode","type":"text","src":"","id":"promoCode","title":"","options":null,"label":"Promo Code","selector":"input#promoCode","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true},"text":"","field_key":"coupon","field_type":""},{"type":20,"info":{"tagName":"BUTTON","value":"","name":"","type":"submit","id":"applyPromo","title":"","options":null,"selector":"//div[@id='applyPromoBlock']//button[contains(text(),'Add Promotion')]","is_optional":"no","frame":"","timeout":"","comment":"","checked":null,"has_custom_selector":true},"x":172,"y":530,"text":"Add Promotion"}],"coupon_recording_info":{"noauth_start_idx":"35"},"coupon_recording_error_div":{"selector":"div#promotionsErrors","has_custom_selector":true},"order_id_div_auth":null,"description_div":{"selector":"//ul[@data-accordion-list]/li[1]//*[contains(@class, 'rich-text')] | //dt[contains(@class,'accordion-toggle') and contains(text(),'Overview') or contains(text(),'Dimensions') or contains(text(),'Care') or contains(text(),'Product')]/following-sibling::dd[contains(@class,'accordion-body')][1] | //*[contains(@class,'product-summary-copy')] | //*[@id='dream-pip-details-section'] | //*[@id='dream-pip-dimensions-section'] | //*[@id='dream-pip-care-section'] | //div[@data-test-id=\"product-details-description\"] | (//div[@data-style=\"product-accordion-content\"])[1]//span//p[1]","has_custom_selector":true},"returns":"<p><strong>Returns</strong></p>\r\n\r\n<p>You can return eligible items within 30 days of receiving an order or 7 days for Quick Ship upholstery items for a refund of the merchandise value. An original receipt or gift receipt is required. Monogrammed items and Made-to-Order furniture or rugs are not eligible for returns. Review the full list of ineligible items and our refund policy below before starting the process.</p>\r\n\r\n<p><strong>Ways To Return</strong><br />\r\nStores - You can return most non-furniture items to your local west elm location (west elm outlet stores excluded).<br />\r\nBring to UPS Location (under 70 lbs) - Start process below.<br />\r\nBy Phone - call Customer Care. See contact info below.</p>\r\n\r\n<p><strong>Ineligible Items</strong><br />\r\nItems non-eligible for returns or exchanges:<br />\r\nMonogrammed items<br />\r\nMattresses<br />\r\nGift cards<br />\r\nMade-to-Order (MTO) items, including custom rugs and furniture<br />\r\nFinal sale items (with prices ending in $.X7 or $.X9)<br />\r\nItems damaged through normal wear and tear</p>\r\n\r\n<p><strong>Stocked Items</strong><br />\r\nIf you are dissatisfied with your purchase of a stocked item, including manufacturer defects you must exchange or return it within 30 days &nbsp;of the order receipt date for a full refund of the merchandise cost (delivery fees are non-refundable).<br />\r\nPlease note that we cannot accept returns on gift cards or items damaged through normal wear and tear. We also cannot accept returns of final-sale items, which are identified by a price ending in .99 or .97.</p>\r\n\r\n<p><strong>Quick Ship Upholstery Items</strong><br />\r\nQuick Ship upholstery items must be returned within 7 days of the order receipt date.</p>\r\n\r\n<p><strong>Refund Policy</strong><br />\r\nOriginal Receipt &mdash; Returns with the original receipt will be refunded in the original form of payment.<br />\r\nDelivery Fees &mdash; Delivery fees are non-refundable and prior purchases are not eligible for price adjustments.<br />\r\nOver $10,000 &mdash; If your return for Merchandise Credit Cards is greater than $10,000, we will issue you $10,000 in Merchandise Credit Cards to you that day, then mail additional Merchandise Credit Card(s) for the remaining amount owed to you.</p>\r\n\r\n<p><strong>Return Process for UPS drop-off</strong><br />\r\nBegin the return process by giving us some details and we will create a UPS shipping label to bring to a UPS drop-off location. Pack your item(s) in the original manufacturer&#39;s box and use sufficient packing to prevent damage in transit.<br />\r\nDepending on the reason for return, you may be responsible for return shipping costs ($6.50 for a small package and $13.25 for large items).<br />\r\nReturn item(s) must have originally been shipped to the United States (includes US Territories and APO/FPO) only.</p>\r\n\r\n<p>For further assistance, please call our customer service department at <strong>1.888.922.4119</strong> or send an email to <strong>customerservice@westelm.com</strong></p>\r\n","final_price_div_local":null,"sales_tax_div_local":null,"order_id_div_local":null,"checkout_recording_local":null,"identifier_div_local":null,"name_div_local":null,"distance_div_local":null,"address_div_local":null,"phone_div_local":null,"when_div_local":null,"change_store_div_local":null,"wrapper_div_local":null,"coupon_value_div_auth":null,"gift_card_value_div_auth":null,"remove_addresses_recording_auth":null,"remove_baddresses_recording_auth":null,"remove_payments_recording_auth":null,"mobile_url_conversion":"westelm.com/m --> westelm.com || [^&?]*?cm_ven=[^&?]*& --> || &*sku=[^&#]* --> ","allowed_product_url_args":["none"],"worker_id":{"$oid":"61773d8c23aed600012a7854"},"gift_card_recording":null,"gift_card_recording_info":null,"gift_card_recording_error_div":null,"gift_card_recording_continue_div":null,"remote_status_recording":null,"remote_status_container_div":null,"remote_status_title_div":null,"remote_status_state_div":null,"remote_status_tracking_div":null,"shipping_options_div":null,"shipping_options":{"cheapest":{"text":"cheapest","min_days":"4","max_days":"5"},"fastest":{"text":"fastest","min_days":"0","max_days":"0"}},"shipping_options_recording_info":{"noauth_start_idx":"0"},"shipping_estimate_exceptions":{"cheapest":"","fastest":""},"sync_data":["product_cart","checkout","shipping_options"],"sync_master_url":"potterybarnkids.com","shipping_address_div_auth":null,"proxy":{"cart":"","purchase":""},"estimator":"price","feed_type":null,"feed_meta":{"origin":"","idx_source":"title","idx_transform":""},"grouping_identifiers":[{"field":"canonical_url","modifier":".*\\/products\\/([^/]+).* --> $1"}],"platform":"default","platform_meta":{"version":""},"resolution":null,"cookies":null,"headers":null,"product_fetch_timeout":null,"tags":[],"login_url_check":null,"title_regexp":null,"p_attr_regexp":null,"images_regexp":"\\w\\.jpg --> z.jpg","sku_regexp":null,"mpn_regexp":null,"gtin_regexp":null,"receipt_prices":"unknown","gifting_recording":null,"gifting_recording_info":null,"page_detector":[{"selector":["body checkout-app:not([wrapper='false']), .tt_Container"],"type":"cart_product","regex":"","label":""},{"selector":["#order-confirmation .order-confirmation-header div p:contains(\"order number\") strong"],"type":"checkout_confirm","regex":"westelm\\.com\\/checkout\\/thanks\\.html","label":""},{"selector":["checkout-app"],"type":"honey_gold","regex":"westelm\\.com\\/checkout\\/app\\/payment","label":"payment"},{"selector":[".pip-main-container .product-pip .product-info","body:not(:has(section#subset-container > section.subset-section div.product-subset)) .pip-summary, #product-information-top, .pip-main-container .product-pip .product-info"],"type":"product","regex":".*westelm\\.com\\/products\\/.*","label":""},{"selector":[".pip-main-container .product-pip .product-info","body:not(:has(section#subset-container > section.subset-section div.product-subset)) .pip-summary, #product-information-top, .pip-main-container .product-pip .product-info"],"type":"where_am_i","regex":".*westelm\\.com\\/(m\\/)?products\\/.*","label":""}],"page_detector_watch":true,"h_legacy_find_savings":{"h_fs_promo_box_selector":"","h_fs_final_price_selector":"","h_fs_submit_button":"","h_fs_time_between_codes":"2000","h_fs_pre_apply_code_action":"","h_fs_time_between_pre_apply":"2000","h_fs_remove_code_action":"","h_fs_time_between_remove":"2000","h_fs_hide_cart_errors_selector":".error","h_fs_hide_cart_errors_selector2":"","h_fs_time_finish":"3000","h_fs_max_codes":"10","h_format_price_divisor":"","h_existing_code_selector":"","h_existing_code_selector_regex":"","h_existing_code_selector_attribute":"","temp_disable_find_savings":false},"h_legacy_metadata":{"pns_siteBaseURL":"not used","pns_siteCartURL1":"not used","pns_siteCartURL2":"not used","pns_siteCartURL3":"not used","pns_siteSelCartCodeSubmitType":"click","pns_siteSelCartAddButton":"#order-summary","pns_siteSelCartAddButtonType":"append","pns_siteType":"refresh","pns_siteSelProdName":".pip-summary h1","pns_siteSelProdPrice":".price-container .product-price .price-amount:last","pns_siteSelProdHoneyButtonType":"append","pns_siteSelProdAddToCartType":"click","pns_pushCodes":"1","pns_priority":"3","pns_confirmRegex":"westelm\\.com\\/checkout\\/thanks.html","pns_observerTarget":"body","pns_siteSelShowHoneyGold":"checkout-app","pns_gDACjsonContentType":"","pns_gDAChtmlRes":"","droplist_inject_styling":".purchasing-container .pip-media { z-index: 11 }","hasPayPalSupport":"true","pns_siteSelOrderId":"#order-confirmation .order-confirmation-header div p:contains(\"order number\") strong","pns_siteSelFinalPrice":".payment-info-totals .merchandise .price-amount","honeyTipsAutopopOn":"true","droplist_universal_active":"true"},"mixins":null,"vim_overrides":null,"privacy_url":"https://www.westelm.com/about-us/privacy-policy.html?cm_re=GlobalLinks-_-Footer-_-PrivacyPolicy","tos_url":"https://www.westelm.com/about-us/terms.html?cm_re=GlobalLinks-_-Footer-_-TermsConditions","where_am_i":{"title_selector":"h1[data-test-id=\"product-title\"]:first","price_selector":"ul[data-component=\"Product-Pricing\"]:last","image_selector":"div#additional-hero-images img:first","category_selector":"ul#breadcrumbs li a span, #breadcrumb-list [itemprop=\"name\"]","keyword_selector":"","group_lookup_selector":null,"group_lookup_key":null,"item_lookup_selector":null,"item_lookup_key":null,"titleRegexp":"","imagesRegexp":"","itemLookupRegexp":null,"groupLookupRegexp":null,"title_selector_mobile":null,"price_selector_mobile":null,"image_selector_mobile":null,"category_selector_mobile":null,"keyword_selector_mobile":"","group_lookup_selector_mobile":null,"group_lookup_key_mobile":null,"item_lookup_selector_mobile":null,"item_lookup_key_mobile":null,"titleRegexp_mobile":"","imagesRegexp_mobile":"","itemLookupRegexp_mobile":null,"groupLookupRegexp_mobile":null},"cart_link_div":null,"cart_link_div_mobile":null,"cart_link_div_extension":null,"cart_link_div_six":null,"cart_link_div_server":null,"cart_qtys_div":{"selector":"div.order-item-details-line-item-quantity input.quantity-box","has_custom_selector":true,"noauth_start_idx":"-1","auth_start_idx":"","local_start_idx":""},"cart_qtys_div_mobile":null,"cart_qtys_div_extension":null,"cart_qtys_div_six":null,"cart_qtys_div_server":null,"cart_wrapper_div":{"selector":"body checkout-app:not([wrapper='false']), .tt_Container","has_custom_selector":true,"noauth_start_idx":"","auth_start_idx":"","local_start_idx":""},"cart_wrapper_div_mobile":null,"cart_wrapper_div_extension":null,"cart_wrapper_div_six":null,"cart_wrapper_div_server":null,"cart_p_name_div":{"selector":".tt_Title","has_custom_selector":true},"cart_p_name_div_mobile":null,"cart_p_name_div_extension":null,"cart_p_name_div_six":null,"cart_p_name_div_server":null,"cart_p_sku_div":null,"cart_p_sku_div_mobile":null,"cart_p_sku_div_extension":null,"cart_p_sku_div_six":null,"cart_p_sku_div_server":null,"cart_title_regexp":null,"cart_title_regexp_mobile":null,"cart_title_regexp_extension":null,"cart_title_regexp_six":null,"cart_title_regexp_server":null,"cart_p_url_div":null,"cart_p_url_div_mobile":null,"cart_p_url_div_extension":null,"cart_p_url_div_six":null,"cart_p_url_div_server":null,"cart_p_image_div":{"selector":".tt_Image","has_custom_selector":true},"cart_p_image_div_mobile":null,"cart_p_image_div_extension":null,"cart_p_image_div_six":null,"cart_p_image_div_server":null,"cart_p_qty_div":{"selector":".tt_Qty","has_custom_selector":true},"cart_p_qty_div_mobile":null,"cart_p_qty_div_extension":null,"cart_p_qty_div_six":null,"cart_p_qty_div_server":null,"cart_p_attrs_div":null,"cart_p_attrs_div_mobile":null,"cart_p_attrs_div_extension":null,"cart_p_attrs_div_six":null,"cart_p_attrs_div_server":null,"cart_p_unit_price_div":{"selector":".tt_UnitPrice","has_custom_selector":true},"cart_p_unit_price_div_mobile":null,"cart_p_unit_price_div_extension":null,"cart_p_unit_price_div_six":null,"cart_p_unit_price_div_server":null,"cart_p_total_price_div":{"selector":".tt_TotalPrice","has_custom_selector":true},"cart_p_total_price_div_mobile":null,"cart_p_total_price_div_extension":null,"cart_p_total_price_div_six":null,"cart_p_total_price_div_server":null,"cart_p_subtotal_div":{"selector":".tt_Subtotal","has_custom_selector":true},"cart_p_subtotal_div_mobile":null,"cart_p_subtotal_div_extension":null,"cart_p_subtotal_div_six":null,"cart_p_subtotal_div_server":null,"cart_p_tax_div":{"selector":".tt_Tax","has_custom_selector":true},"cart_p_tax_div_mobile":null,"cart_p_tax_div_extension":null,"cart_p_tax_div_six":null,"cart_p_tax_div_server":null,"cart_p_shipping_div":{"selector":".tt_Shipping","has_custom_selector":true},"cart_p_shipping_div_mobile":null,"cart_p_shipping_div_extension":null,"cart_p_shipping_div_six":null,"cart_p_shipping_div_server":null,"cart_total_div":{"selector":".tt_Total","has_custom_selector":true},"cart_total_div_mobile":null,"cart_total_div_extension":null,"cart_total_div_six":null,"cart_total_div_server":null,"cart_custom_id":null,"cart_custom_id_mobile":null,"cart_custom_id_extension":null,"cart_custom_id_six":null,"cart_custom_id_server":null,"cart_opts_retrieval_js":"$('#ttHidden').remove();\r\n$('body').append(\"<div id='ttHidden' style = 'display: none;'></div>\");\r\nvar ttHidden = __utils__.findOne('#ttHidden');\r\n\r\n// helper function to inject into elements into another\r\n_ttInject = function(element, className, value){\r\n  element.append(\"<div class='tt_\"+ className +\"'>\"+ value +\"</div>\");\r\n};\r\n\r\n// ajax function to make GET requests\r\n// function AJAXRequest(url) {\r\n//   var data = request({url: url, method: \"GET\"});\r\n//   if (data.error) {\r\n//     __utils__.echo(data.error);\r\n//     return false;\r\n//   }\r\n//   return data && data.body;\r\n// }\r\n\r\n// cart is skippable so building at checkout, where there are shadowRoot elements  [Sergio Conde 2020-02-11]\r\n// making 'body checkout-app' initial cart wrapper to fire off cartOpts,\r\n// once inside cartOpts we can access shadow root elements and we will make new cart wrappers to append to a hidden div,\r\n// then we will block the initial cart wrapper to prevent errors since wrappers are prepended to other selectors--> body checkout-app:not([wrapper='false'])\r\n\r\n// productGIDs is to contain productName/primaryGroupId combinations for each item at checkout (primaryGroupId will be our main GID)\r\n// var productGIDs = {};\r\n\r\n// // grabbing product primaryGroupId (GID) through GET a request to https://www.WEBSITE-NAME.com/checkout/carts.json, which should return a JSON object with current cart info\r\n// // since this recipe is parent to multiple, we must make this code generic\r\n// var pageURL = location.href;\r\n// var pageName = pageURL.match(/www\\.(.+)\\.com/)[1];\r\n// var ajaxResult = AJAXRequest('https://www.'+ pageName + '.com/checkout/carts.json');\r\n// var dataObj = ajaxResult && ajaxResult.checkoutResponse;\r\n// if(dataObj){\r\n//   // looping over products, grabbing title and primaryGroupId, if found, we add the combo to productGIDs object to use later to inject GID into page as form of prodURL\r\n//   var products = dataObj.itemDetailsMap;\r\n//   var productKeys = products && Object.keys(products);\r\n//   for(var iPos =0; products && iPos < productKeys.length; iPos++){\r\n//     var prod = products[productKeys[iPos]];\r\n//     var prodName = prod.shortName;\r\n//     var prodGID = prod.primaryGroupId;\r\n//     if(prodName && prodGID){\r\n//       productGIDs[prodName] = prodGID;\r\n//     }\r\n//   }\r\n//   // we can also use this object to get cart summary totals and inject them into hidden div\r\n//   var pricingObj = dataObj.totals && dataObj.totals.pricing;\r\n//   var cartTotals = ['merchandise','shipping','tax','total'];\r\n//   for(var iPos =0; pricingObj && iPos < cartTotals.length; iPos++){\r\n//     var cartTotal = cartTotals[iPos];\r\n//     var total = pricingObj[cartTotal] && pricingObj[cartTotal].effective;\r\n//     _ttInject(ttHidden,cartTotal,total);\r\n//   }\r\n// }\r\n\r\n\r\n// ----> alternative way of getting product info by accessing shadowRoot elements. These elements are useful to get product total and quantity values\r\n// since theseare more tedious to get with dataObj only\r\n\r\n// going down shadowRoot levels to reach item-preview-feature elements which have product info (kind of like product wrappers) [Sergio Conde 2020-02-11]\r\nvar shadowRootLevel1 = __utils__.findOne(\"body checkout-app\").prop('shadowRoot');\r\nvar shadowRootLevel2 =  __utils__.findOne(\"summary-view\", shadowRootLevel1).prop('shadowRoot');\r\nvar shawdowProds = __utils__.findAll(\"item-preview-feature\", shadowRootLevel2);\r\n\r\nvar shawdowProdsCount = shawdowProds.length;\r\n// if shadow product elements are detected, lets block initial cart wrapper, as it was only used to make sure cart/vim fires once we get to checkout\r\nif(shawdowProdsCount){\r\n  $('body checkout-app').attr('wrapper','false');\r\n}\r\n\r\n\r\n// looping through shadow elements to get product info and to inject new cart wrappers on which to append this info to \r\n// (necessary since we cannot use shadow elements as wrappers, our systems cant access it)\r\nfor(var iPos =0; iPos < shawdowProds.length; iPos++){\r\n  var elShadow = shawdowProds[iPos];\r\n  // injecting hidden cart wrapper\r\n  $('#ttHidden').append(\"<div class='tt_Container'></div>\");\r\n  // grabbing the newly injected wrapper to add product info into\r\n  var container = __utils__.findAll('.tt_Container')[iPos];\r\n  // product info we are targetting with respective css selectors:\r\n  var prodSelectorObj = {Title:'description',TotalPrice:'effective-price',UnitPrice:'unit-price',Qty:'quantity'};\r\n  var prodSelectors = Object.entries(prodSelectorObj);\r\n  // grabbing info from shadow element\r\n  for(var jPos =0; jPos < prodSelectors.length; jPos++){\r\n    var key = prodSelectors[jPos][0];\r\n    var selector = prodSelectors[jPos][1];\r\n    var elValue = elShadow.attr(selector);\r\n    // if prod title matches a key in productGIDs object, we can create and inject a prod URL to use for GID\r\n    // if(key == 'Title' && productGIDs[elValue]){\r\n    //   // var prodUrl = 'https://www.'+ pageName +'.com/products/'+ productGIDs[elValue];\r\n    //   container.append(\"<a class='tt_prodURL' href='\"+ prodUrl +\"'></a>\");\r\n    // }\r\n    _ttInject(container,key,elValue);\r\n  }\r\n  // images are in another element than the one initially targetted, so we need extra code to access info\r\n  var imageShadow = __utils__.findOne(\"image-ui\", elShadow).prop('shadowRoot');\r\n  var image = imageShadow && imageShadow.find('img').attr('src');\r\n  _ttInject(container,'Image',image);\r\n}\r\n\r\n\r\n\r\n\r\n// this is an alternative way of getting cart summary elements by accessing the DOM through shadowRoots [KEEPING IN CASE EVER NEEDED]\r\n// cart summary elements\r\n\r\nvar cartSummary = ['Subtotal','Shipping & Processing','Tax','Total'];\r\nvar shadowRootLevel3 = __utils__.findOne(\"summary-feature\", shadowRootLevel2).prop('shadowRoot');\r\n//__utils__.echo('level 3 defined: '+ !!shadowRootLevel3);\r\nvar countSummary = __utils__.findAll(\"summary-total-feature\", shadowRootLevel3).length;\r\n//__utils__.echo('count of summary items: '+countSummary);\r\nfor(var iPos =0; shadowRootLevel3 && iPos < cartSummary.length; iPos++){\r\n  var summary = cartSummary[iPos];\r\n  var elSummary = __utils__.findOne(\"summary-total-feature[title='\"+ summary +\"']\", shadowRootLevel3).prop(\"shadowRoot\");\r\n  var elValue = elSummary && elSummary.find('.value').text().trim();\r\n  //__utils__.echo(summary+' value: '+elValue);\r\n  _ttInject(ttHidden,summary,elValue);\r\n}\r\n","cart_opts_retrieval_js_mobile":null,"cart_opts_retrieval_js_extension":null,"cart_opts_retrieval_js_six":null,"cart_opts_retrieval_js_server":null,"address_check_noauth":{"recording_idx":"43"},"address_check_noauth_mobile":null,"address_check_noauth_extension":null,"address_check_noauth_six":null,"address_check_noauth_server":null,"final_price_div_noauth":{"selector":"//div[contains(@class,'order-summary-tally-total-block')]/div[span[contains(text(),'Total Due')]]//span[contains(@class,'currencyUSD')]","has_custom_selector":true,"recording_idx":"43","frame":""},"final_price_div_noauth_mobile":null,"final_price_div_noauth_extension":null,"final_price_div_noauth_six":null,"final_price_div_noauth_server":null,"shipping_price_div_noauth":{"selector":"div#ttShippingPrice, div#ttHandlingPrice","has_custom_selector":true,"recording_idx":"43","frame":""},"shipping_price_div_noauth_mobile":null,"shipping_price_div_noauth_extension":null,"shipping_price_div_noauth_six":null,"shipping_price_div_noauth_server":null,"handling_price_div_noauth":null,"handling_price_div_noauth_mobile":null,"handling_price_div_noauth_extension":null,"handling_price_div_noauth_six":null,"handling_price_div_noauth_server":null,"checkout_recording_noauth":[{"type":20,"info":{"selector":"div#btn-checkout a[title='Checkout']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"div.cartButtons  button[data-test-id='sideCheckout']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null,"has_custom_selector":true}},{"type":20,"info":{"selector":"div.cartButtons  button[data-test-id='topCheckout']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//button[contains(text(),'Guest')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null,"has_custom_selector":true}},{"type":2,"info":{"selector":"input.fullName","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"shipping_name","field_type":"shipping"},{"type":2,"info":{"selector":"input[id='shipTo.address.addrLine1']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"shipping_address","field_type":""},{"type":2,"info":{"selector":"input[id='shipTo.address.addrLine2']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"shipping_address_2","field_type":""},{"type":2,"info":{"selector":"input[id='shipTo.address.city']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"shipping_city","field_type":""},{"type":2,"info":{"selector":"select[id='shipTo.address.state']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"SELECT","type":"select","options":[{"text":"Please Select","value":""},{"text":"Alabama","value":"AL"},{"text":"Alaska","value":"AK"},{"text":"American Samoa","value":"AS"},{"text":"Arizona","value":"AZ"},{"text":"Arkansas","value":"AR"},{"text":"Armed Forces Americas","value":"AA"},{"text":"Armed Forces Europe","value":"AE"},{"text":"Armed Forces Pacific","value":"AP"},{"text":"California","value":"CA"},{"text":"Colorado","value":"CO"},{"text":"Connecticut","value":"CT"},{"text":"Delaware","value":"DE"},{"text":"District Of Columbia","value":"DC"},{"text":"Federated States Of Micronesia","value":"FM"},{"text":"Florida","value":"FL"},{"text":"Georgia","value":"GA"},{"text":"Guam","value":"GU"},{"text":"Hawaii","value":"HI"},{"text":"Idaho","value":"ID"},{"text":"Illinois","value":"IL"},{"text":"Indiana","value":"IN"},{"text":"Iowa","value":"IA"},{"text":"Kansas","value":"KS"},{"text":"Kentucky","value":"KY"},{"text":"Louisiana","value":"LA"},{"text":"Maine","value":"ME"},{"text":"Marshall Islands","value":"MH"},{"text":"Maryland","value":"MD"},{"text":"Massachusetts","value":"MA"},{"text":"Michigan","value":"MI"},{"text":"Minnesota","value":"MN"},{"text":"Mississippi","value":"MS"},{"text":"Missouri","value":"MO"},{"text":"Montana","value":"MT"},{"text":"Nebraska","value":"NE"},{"text":"Nevada","value":"NV"},{"text":"New Hampshire","value":"NH"},{"text":"New Jersey","value":"NJ"},{"text":"New Mexico","value":"NM"},{"text":"New York","value":"NY"},{"text":"North Carolina","value":"NC"},{"text":"North Dakota","value":"ND"},{"text":"Northern Mariana Islands","value":"MP"},{"text":"Ohio","value":"OH"},{"text":"Oklahoma","value":"OK"},{"text":"Oregon","value":"OR"},{"text":"Palau","value":"PW"},{"text":"Pennsylvania","value":"PA"},{"text":"Puerto Rico","value":"PR"},{"text":"Rhode Island","value":"RI"},{"text":"South Carolina","value":"SC"},{"text":"South Dakota","value":"SD"},{"text":"Tennessee","value":"TN"},{"text":"Texas","value":"TX"},{"text":"Utah","value":"UT"},{"text":"Vermont","value":"VT"},{"text":"Virgin Islands","value":"VI"},{"text":"Virginia","value":"VA"},{"text":"Washington","value":"WA"},{"text":"West Virginia","value":"WV"},{"text":"Wisconsin","value":"WI"},{"text":"Wyoming","value":"WY"}],"text_only":"","comment":"","checked":null},"field_key":"shipping_state","field_type":""},{"type":2,"info":{"selector":"input[id='shipTo.address.zip']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"shipping_zip","field_type":""},{"type":2,"info":{"selector":"input[id='shipTo.address.dayPhone']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"shipping_telephone","field_type":""},{"type":2,"info":{"selector":"input[id='shipTo.billingAddressUpdate']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"checkbox","checked":false,"comment":"","options":null},"field_key":"billing_as_shipping","field_type":"hardcode"},{"type":20,"info":{"selector":"//div[contains(@class,'button-group')]//button[contains(text(),'Continue')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"selector":"input[name='shipTo.address.overideAddressVerification']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"checkbox","checked":true,"comment":"","options":null,"has_custom_selector":true},"field_key":"use_shipping_address_as_entered","field_type":"hardcode"},{"type":20,"info":{"selector":"//form[@name='shipping'][//input[@name='shipTo.address.overideAddressVerification']]//div[contains(@class,'button-group')]//button[contains(text(),'Continue')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"To avoid wrong clicking on another page, this \"Continue\" button will be clicked only if the above field is present.","options":null,"checked":null,"has_custom_selector":true}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"selector":"input#isgift_n","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"radio","options":[{"text":"n","value":"n"}],"comment":"","checked":null,"value":"n"},"field_key":"not_gift","field_type":"hardcode"},{"type":20,"info":{"selector":"//div[contains(@class,'button-group')]//button[contains(text(),'Continue')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"selector":"input[id='address.fullName']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"billing_name","field_type":"payment"},{"type":2,"info":{"selector":"input[id='address.addrLine1']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"billing_address","field_type":""},{"type":2,"info":{"selector":"input[id='address.addrLine2']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"billing_address_2","field_type":""},{"type":2,"info":{"selector":"input[id='address.city']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"billing_city","field_type":""},{"type":2,"info":{"selector":"select[id='address.state']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"SELECT","type":"select","options":[{"text":"Please Select","value":""},{"text":"Alabama","value":"AL"},{"text":"Alaska","value":"AK"},{"text":"American Samoa","value":"AS"},{"text":"Arizona","value":"AZ"},{"text":"Arkansas","value":"AR"},{"text":"Armed Forces Americas","value":"AA"},{"text":"Armed Forces Europe","value":"AE"},{"text":"Armed Forces Pacific","value":"AP"},{"text":"California","value":"CA"},{"text":"Colorado","value":"CO"},{"text":"Connecticut","value":"CT"},{"text":"Delaware","value":"DE"},{"text":"District Of Columbia","value":"DC"},{"text":"Federated States Of Micronesia","value":"FM"},{"text":"Florida","value":"FL"},{"text":"Georgia","value":"GA"},{"text":"Guam","value":"GU"},{"text":"Hawaii","value":"HI"},{"text":"Idaho","value":"ID"},{"text":"Illinois","value":"IL"},{"text":"Indiana","value":"IN"},{"text":"Iowa","value":"IA"},{"text":"Kansas","value":"KS"},{"text":"Kentucky","value":"KY"},{"text":"Louisiana","value":"LA"},{"text":"Maine","value":"ME"},{"text":"Marshall Islands","value":"MH"},{"text":"Maryland","value":"MD"},{"text":"Massachusetts","value":"MA"},{"text":"Michigan","value":"MI"},{"text":"Minnesota","value":"MN"},{"text":"Mississippi","value":"MS"},{"text":"Missouri","value":"MO"},{"text":"Montana","value":"MT"},{"text":"Nebraska","value":"NE"},{"text":"Nevada","value":"NV"},{"text":"New Hampshire","value":"NH"},{"text":"New Jersey","value":"NJ"},{"text":"New Mexico","value":"NM"},{"text":"New York","value":"NY"},{"text":"North Carolina","value":"NC"},{"text":"North Dakota","value":"ND"},{"text":"Northern Mariana Islands","value":"MP"},{"text":"Ohio","value":"OH"},{"text":"Oklahoma","value":"OK"},{"text":"Oregon","value":"OR"},{"text":"Palau","value":"PW"},{"text":"Pennsylvania","value":"PA"},{"text":"Puerto Rico","value":"PR"},{"text":"Rhode Island","value":"RI"},{"text":"South Carolina","value":"SC"},{"text":"South Dakota","value":"SD"},{"text":"Tennessee","value":"TN"},{"text":"Texas","value":"TX"},{"text":"Utah","value":"UT"},{"text":"Vermont","value":"VT"},{"text":"Virgin Islands","value":"VI"},{"text":"Virginia","value":"VA"},{"text":"Washington","value":"WA"},{"text":"West Virginia","value":"WV"},{"text":"Wisconsin","value":"WI"},{"text":"Wyoming","value":"WY"}],"text_only":"","comment":"","checked":null},"field_key":"billing_state","field_type":""},{"type":2,"info":{"selector":"input[id='address.zip']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"billing_zip","field_type":""},{"type":2,"info":{"selector":"input[id='address.dayPhone']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"billing_telephone","field_type":""},{"type":2,"info":{"selector":"input[id='address.emailAddr']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"email","field_type":""},{"type":20,"info":{"selector":"//div[contains(@class,'button-group')]//button[contains(text(),'Continue')]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"selector":"input[name='address.overideAddressVerification']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"checkbox","checked":true,"comment":"","options":null},"field_key":"use_billing_address_as_entered","field_type":"hardcode"},{"type":20,"info":{"selector":"//form[@name='shipping'][//input[@name='address.overideAddressVerification']]//div[contains(@class,'button-group')]//button[contains(text(),'Continue')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"To avoid wrong clicking on another page, this \"Continue\" button will be clicked only if the above field is present. (The name of this form is indeed \"shipping\")","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// injecting alert with PO Box error, shipping problems error or delayed OOS error [Liviu Pop] 2019-02-27\r\n// only the first sentence of the site message is relevant for a TT user, so it was selected via JS\r\nvar siteErrorDiv = __utils__.findOne(\"div#order-difficulties p\");\r\nif (siteErrorDiv) {\r\n  var ttErrorMessage = siteErrorDiv.textContent; // transforming all <b> or <i> internal elements in normal text\r\n  if (ttErrorMessage.match(\"cannot be\")) {\r\n    ttErrorMessage = ttErrorMessage.replace(/([^\\.]*\\.).*/mi,'$1');\r\n  }\r\n  if (ttErrorMessage.match(\"will be removed from\")) {\r\n    ttErrorMessage = ttErrorMessage.replace(/(.*no longer available\\.).*/mi,'$1');\r\n  }\r\n  alert(ttErrorMessage);\r\n}","timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"//div[@id='order-difficulties'][not(.//*[contains(text(),'cannot be') or contains(text(),'will be removed')])]//button[contains(text(),'Continue Checkout')]","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"If the product is delivered as a backorder, a supplimentary page may appear, where the user can change the order or continue the checkout. Also, the checkout flow will stop here if there is a PO Box error message.","options":null,"checked":null,"has_custom_selector":true}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"5000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"selector":"input#loyaltyJoinCheckbox","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"checkbox","checked":false,"comment":"","options":null},"field_key":"earn_rewards","field_type":"hardcode"},{"type":2,"info":{"selector":"select[id='creditCard.cardId']","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","tagName":"SELECT","type":"select","options":[{"text":"Select…","value":""},{"text":"Pottery Barn/Pottery Barn Kids","value":"PLCC/PB"},{"text":"Visa","value":"VISA"},{"text":"Master Card","value":"MASTERCARD"},{"text":"American Express","value":"AMEX"},{"text":"Williams Sonoma Visa","value":"VISA/WS"},{"text":"Discover Network","value":"DISCOVER"}],"text_only":"","comment":"","checked":null,"has_custom_selector":true},"field_key":"card_type","field_type":""},{"type":2,"info":{"selector":"input[id='creditCard.cardNumber']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"card_number","field_type":""},{"type":2,"info":{"selector":"select[id='creditCard.cardExpMonth']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"SELECT","type":"select","options":[{"text":"Month","value":""},{"text":"01","value":"1"},{"text":"02","value":"2"},{"text":"03","value":"3"},{"text":"04","value":"4"},{"text":"05","value":"5"},{"text":"06","value":"6"},{"text":"07","value":"7"},{"text":"08","value":"8"},{"text":"09","value":"9"},{"text":"10","value":"10"},{"text":"11","value":"11"},{"text":"12","value":"12"}],"text_only":"","comment":"","checked":null},"field_key":"expiry_date_month","field_type":""},{"type":2,"info":{"selector":"select[id='creditCard.cardExpYear']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"SELECT","type":"select","options":[{"text":"Year","value":""},{"text":"2020","value":"2020"},{"text":"2021","value":"2021"},{"text":"2022","value":"2022"},{"text":"2023","value":"2023"},{"text":"2024","value":"2024"},{"text":"2025","value":"2025"},{"text":"2026","value":"2026"},{"text":"2027","value":"2027"},{"text":"2028","value":"2028"},{"text":"2029","value":"2029"}],"text_only":"","comment":"","checked":null},"field_key":"expiry_date_year","field_type":""},{"type":2,"info":{"selector":"input[id='creditCard.cardVerificationNumber']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"cvv","field_type":""},{"type":1001,"info":{"selector":"body","frame":"","is_optional":"no","interval":"","js_code":"// injecting shipping estimates (they are always \"per product\") [Liviu Pop] 2019-02-18\r\n// no jQuery\r\nvar shippingContainers = __utils__.findAll(\"div.shipping-and-delivery-details div.cart-table-row\");\r\nfor (var iPos=0; iPos<shippingContainers.length; iPos++) {\r\n  var shipTitle = __utils__.findOne(\"div.cart-table-row-title\", shippingContainers[iPos]);\r\n  var shipTime1 = __utils__.findOne(\"span.delivery-prefix-message\", shippingContainers[iPos]);\r\n  var shipTime2 = __utils__.findOne(\"span.delivery-suffix\", shippingContainers[iPos]);\r\n  if (shipTitle && shipTime1 && shipTime2) {\r\n    shipTime1.textContent = shipTime1.textContent.replace(/A more precise.*|if no personalization.*|\\s\\S+\\sZIP.*/gm,'');\r\n    var shipDiv = document.createElement('div');\r\n    shipDiv.classList.add('ttShipEstimate');\r\n    shipDiv.textContent = shipTitle.textContent.trim() + ': ' + shipTime1.textContent + \" \" + shipTime2.textContent;\r\n    if (iPos < shippingContainers.length-1) {\r\n      shipDiv.textContent += \" -- \";\r\n    }\r\n    document.body.appendChild(shipDiv);\r\n  }\r\n}\r\n\r\n// injecting shipping price div (it may not be present on site, if free shipping) [Liviu Pop] 2019-02-25\r\nvar siteShipPrice = __utils__.findOne(\"//div[contains(@class,'order-summary-tally-subtotal-block')]//div[.//*[contains(text(),'Shipping & Processing') and not(contains(text(),'Discount'))]]//span[contains(@class,'currencyUSD')]\");\r\nif (siteShipPrice) {\r\n  var ttShipPrice = siteShipPrice.textContent;\r\n}\r\nelse {\r\n  var ttShipPrice = '$0';\r\n}\r\nvar el = document.createElement('div');\r\nel.id = 'ttShippingPrice';\r\nel.textContent = ttShipPrice;\r\ndocument.body.appendChild(el);\r\n\r\n// injecting handling price div, if present [Liviu Pop] 2019-02-25\r\nvar siteHandlingPrice = __utils__.findOne(\"//div[contains(@class,'order-summary-tally-subtotal-block')]//div[.//*[contains(text(),'Delivery Surcharge')]]//span[contains(@class,'currencyUSD')]\");\r\nif (siteHandlingPrice) {\r\n  var ttHandPrice = siteHandlingPrice.textContent;\r\n  var el = document.createElement('div');\r\n  el.id = 'ttHandlingPrice';\r\n  el.textContent = ttHandPrice;\r\n  document.body.appendChild(el);\r\n}","timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"button.placeOrderButton","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}}],"checkout_recording_noauth_mobile":null,"checkout_recording_noauth_extension":null,"checkout_recording_noauth_six":null,"checkout_recording_noauth_server":null,"sales_tax_div_noauth":{"selector":"//div[contains(@class,'order-summary-tally-subtotal-block')]/div[span[contains(text(),'Tax')]]//span[contains(@class,'currencyUSD')]","has_custom_selector":true,"recording_idx":"43","frame":""},"sales_tax_div_noauth_mobile":null,"sales_tax_div_noauth_extension":null,"sales_tax_div_noauth_six":null,"sales_tax_div_noauth_server":null,"shipping_estimate_div_noauth":{"selector":"div.ttShipEstimate","has_custom_selector":true,"recording_idx":"43","frame":""},"shipping_estimate_div_noauth_mobile":null,"shipping_estimate_div_noauth_extension":null,"shipping_estimate_div_noauth_six":null,"shipping_estimate_div_noauth_server":null,"checkout_information_noauth":null,"checkout_information_noauth_mobile":null,"checkout_information_noauth_extension":null,"checkout_information_noauth_six":null,"checkout_information_noauth_server":null,"order_id_div_noauth":null,"order_id_div_noauth_mobile":null,"order_id_div_noauth_extension":null,"order_id_div_noauth_six":null,"order_id_div_noauth_server":null,"coupon_value_div_noauth":{"selector":"//div[contains(@class,'order-summary-tally-total-block')]/div[span[contains(text(),'Total Due')]]//span[contains(@class,'currencyUSD')]","has_custom_selector":true},"coupon_value_div_noauth_mobile":null,"coupon_value_div_noauth_extension":null,"coupon_value_div_noauth_six":null,"coupon_value_div_noauth_server":null,"gift_card_value_div_noauth":null,"gift_card_value_div_noauth_mobile":null,"gift_card_value_div_noauth_extension":null,"gift_card_value_div_noauth_six":null,"gift_card_value_div_noauth_server":null,"shipping_address_div_noauth":null,"shipping_address_div_noauth_mobile":null,"shipping_address_div_noauth_extension":null,"shipping_address_div_noauth_six":null,"shipping_address_div_noauth_server":null,"parent_id":{"$oid":"6377d2f9e357d00001e79e3f"},"shipping_estimate_div_local":null,"has_issues":false,"updated_at":{"$date":"2022-11-22T19:03:44.721Z"},"created_at":{"$date":"2022-11-22T19:02:10.223Z"},"changelog":"Updated WAI VIM price selector","activated_at":{"$date":"2022-11-22T19:03:51.256Z"},"assignee_id":null,"activated_by_honey_user_id":"319042934443781316"}