{"_id":{"$oid":"651605883728e57dd2f3fd05"},"scope":"complete","country":"us","engine":"chrome_vim","product_page_requires_account":"no","shipping_options_div_type":"none","end_delay":4000,"status":"live","old_status":"pending","website_url":"apple.com","website_name":"Apple","honey_id":"17","site_id":{"$oid":"5d6586cd78c6bd1142ca01f9"},"partial_urls":["apple.com"],"login_recording":null,"signup_recording":null,"title_div":{"selector":"div#ttProdTitle","has_custom_selector":true},"brand_div":{"selector":"div._ttBrand","has_custom_selector":true},"price_div":{"selector":"div#ttPrice","has_custom_selector":true},"returns_div":null,"image_div":{"selector":"div[data-autom=\"productImage\"] [data-core-gallery=\"true\"] img:first, div.as-configuration-stickybox img, div[class*=\"as-productdecision-selectionmedia-ambient\"] img, div#select-product div.as-carousel-item:first-child img, div#hero-gallery div.main-image div[role=\"button\"]:not(.hide) img, div.as-productdecision-stickybox materializer.ase-materializer-show img, img.rf-flagship-main-image, div[data-core-gallery-item=true][aria-hidden=false] img, img.rf-configuration-hero-image","has_custom_selector":true},"alt_images_div":{"selector":"div[data-autom=\"productImage\"] [data-core-gallery=\"true\"] img, div.ase-gallery-scroll img,gallery[data-uid=\"buyflow-gallery\"] img,div#select-product div.as-carousel-item img,div.as-productdecision-inlinegallery div.as-carousel img,div[id*=\"preload-images\"] img,img.rf-flagship-main-image,img._ttImages, div[data-core-gallery-item=true][aria-hidden=true] img, div.rc-overlay-gallery-item img, div.rf-bfe-gallery-image-wrapper img, div[data-core-gallery-scroller=\"true\"] img, div[data-core-gallery-scroller=\"true\"] img","has_custom_selector":true},"custom_id_div":{"selector":"#ttGid","has_custom_selector":true},"extra_info_div":{"selector":"//div[@data-analytics-section=\"buyflow-whats-in-the-box\"]//h3/text()","has_custom_selector":true},"weight_div":null,"product_container_div":null,"add_to_cart_recording":[{"type":1010,"info":{"selector":"div[tt-attr-index=\"0\"]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [jskidanov] 2022-08-11\r\nreturn _ttAttributeGet(0);","set":"return _ttAttributeSet(0, fillValue);","current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"Option 0","field_type":""},{"type":1010,"info":{"selector":"div[tt-attr-index=\"1\"]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [jskidanov] 2022-08-11\r\nreturn _ttAttributeGet(1);","set":"return _ttAttributeSet(1, fillValue);","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"Option 1","field_type":""},{"type":1010,"info":{"selector":"div[tt-attr-index=\"2\"]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [jskidanov] 2022-08-11\r\nreturn _ttAttributeGet(2);","set":"return _ttAttributeSet(2, fillValue);","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"Option 2","field_type":""},{"type":1010,"info":{"selector":"div[tt-attr-index=\"3\"]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [jskidanov] 2022-08-11\r\nreturn _ttAttributeGet(3);","set":"return _ttAttributeSet(3, fillValue);","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"Option 3","field_type":""},{"type":1010,"info":{"selector":"div[tt-attr-index=\"4\"]","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","get":"// created by [jskidanov] 2022-08-11\r\nreturn _ttAttributeGet(4);","set":"return _ttAttributeSet(4, fillValue);","has_custom_selector":true,"current_variant_selector":"","current_variant_selector_property":"","current_variant_selector_regex":"","set_during_retrieve_opts":"true","reset_during_retrieve_opts":"no","only_on_checkout_type":"","comment":"","options":null,"checked":null},"field_key":"Option 4","field_type":""},{"type":20,"info":{"tagName":"H2","options":null,"selector":"button#add-to-cart, div.purchase-info button[name=\"add-to-cart\"], div.as-purchaseinfo-button span.add-to-cart button, div.as-pdp-purchaseinfosection button[value=\"add-to-cart\"]:not([disabled=\"disabled\"]), button[data-autom=\"continueButton\"], button[name=add-to-cart], input[name=purchase_option_group][value=fullprice][data-autom=purchaseGroupOptionfullprice], button[data-autom=\"addToCart\"]","has_custom_selector":true,"is_optional":"no","frame":"","timeout":"","only_on_checkout_type":"","comment":"","checked":null}}],"add_to_cart_changes_div":{"selector":"nav.with-bag-count li#ac-gn-bag-small span.ac-gn-bag-badge-number","has_custom_selector":true},"remove_from_cart_recording":null,"order_error_divs":[{"selector":".form-alert.is-error","overwrite":"text"},{"selector":"//div[contains(@id, '-error')]/span[contains(text(), 'Please enter')]","overwrite":"text"}],"notes":"Updated by Zackary Klebanoff [02/22/2021] -- Timeout function selector update\r\nRebuilt by Zackary Klebanoff [11/30/2020] -- Major overhaul\r\nFirst Built by Zach Beaudoin [04/21/2020]\r\n \r\n\r\n** Notes ** \r\nThis store is a complicated case.  Over 500 lines of prod opts and over 100 lines of cart opts were needed to successfully integrate this store.\r\nProd opts is broken into 3 sections:\r\n1) The functions\r\n2) The generic attributes functions\r\n3) The execution context in which the functions are called\r\nGeneric attribute selectors are organized by type.  This site has many different types of variant elements.\r\nThe clean title GID function in prod opts is almost identical to the same function called in cart opts, except\r\nfor the logic included in cart opts for Apple Watch titles.  These titles are grabbed using selectors in prod opts,\r\nwhile they are grabbed from regexing out the raw body text (grabbed using AJAX) in cart opts.  This function is needed for accurate titles and creating GIDs.\r\n  \r\n \r\n** Known Issues** \r\n \r\nRelevant Past Issues: \r\nGID --> GIDs improved were very difficult to tether at cart.  The clean title function described above was used as the GID for this site.\r\n \r\n \r\n** GID Notes ** \r\nCustom ID solution:\r\nThe GID is grabbed two ways, and the first way is to use the flagship title for iphone and ipad.  The second way\r\nis by grabbing the title and using functions to clean the string to make it a usable GID.  In cart opts, this is grabbed by \r\nmaking an ajax call to the product page and grabbing the information from there.  This unfortunately was the only way to \r\nmake a usable GID for this store.\r\n \r\nhttps://www.apple.com/shop/buy-iphone/iphone-12-pro --> iphone-12-pro\r\nhttps://www.apple.com/shop/buy-watch/apple-watch/apple-watch?option.watch_cases=M02D3LL/A&option.watch_bands=MYA72AM/A&preSelect=false&product=Z0YQ&step=detail# --> apple-watch-series-6-silver-aluminum-case-with-sport-loop\r\nhttps://www.apple.com/shop/product/MX0K2AM/A/usb-c-to-lightning-cable-1-m --> usb-c-to-lightning-cable\r\n\r\nEdge Case: These products below does not load an ideal GID for both sizes because of how size impacts title. \r\nThis is not ideal, but we are leaving it this way for now since it impacts so few products.\r\n--- https://www.apple.com/shop/product/MXQT2LL/A/magic-keyboard-for-ipad-air-4th-generation-and-ipad-pro-11-inch-2nd-generation-us-english\r\n--- https://www.apple.com/shop/product/MXNK2LL/A/smart-keyboard-folio-for-ipad-air-4th-generation-and-ipad-pro-11-inch-2nd-generation-us-english\r\n \r\n \r\n** Attributes ** \r\n \r\nSupported: These are all the types of variant elements integrated with the generic attributes: swatch_opts, colorSwatch_opts, colorSwatchBox_opts, dropdown_opts\r\n\r\n  \r\n** Products ** \r\nOrganizing this section in 2 parts.  The first part is organized by attribute type, and the second part is organized by product type.\r\n \r\n///attribute type/// -- all are found in the generic attribute function\r\nswatch_opts:\r\nhttps://www.apple.com/shop/buy-ipod/ipod-touch\r\nhttps://www.apple.com/shop/buy-iphone/iphone-12-pro\r\n\r\ncolorSwatch_opts:\r\nhttps://www.apple.com/shop/product/MYD12AM/A/40mm-plum-sport-band-regular\r\nhttps://www.apple.com/shop/buy-watch/apple-watch/apple-watch?option.watch_cases=M02D3LL/A&option.watch_bands=MYA72AM/A&preSelect=false&product=Z0YQ&step=detail#\r\n\r\ncolorSwatchBox_opts\r\nhttps://www.apple.com/shop/product/MG3V3AM/A/40mm-obsidian-mist-black-nike-sport-band-regular\r\nhttps://www.apple.com/shop/product/MYD12AM/A/40mm-plum-sport-band-regular\r\n\r\ndropdown_opts:\r\nhttps://www.apple.com/shop/product/MX0K2AM/A/usb-c-to-lightning-cable-1-m\r\nhttps://www.apple.com/shop/product/MXQU2LL/A/magic-keyboard-for-ipad-pro-129%E2%80%91inch-4th-generation-us-english\r\n\r\n///product types///\r\nMac:\r\nhttps://www.apple.com/shop/buy-mac/macbook-pro/13-inch-space-gray-apple-m1-chip-with-8-core-cpu-and-8-core-gpu-256gb#\r\n\r\nipad:\r\nhttps://www.apple.com/shop/buy-ipad/ipad-pro\r\nhttps://www.apple.com/shop/buy-ipad/ipad-air\r\n\r\niphone:\r\nhttps://www.apple.com/shop/buy-iphone/iphone-12-pro\r\n\r\nwatch:\r\nhttps://www.apple.com/shop/buy-watch/apple-watch/apple-watch?option.watch_cases=M02D3LL/A&option.watch_bands=MYA72AM/A&preSelect=false&product=Z0YQ&step=detail#\r\nhttps://www.apple.com/shop/buy-watch/apple-watch-series-3/silver-aluminum-white-sport-band?bfil=1&preSelect=false&product=MTEY2LL/A&step=detail#\r\nhttps://www.apple.com/shop/product/MYD12AM/A/40mm-plum-sport-band-regular\r\n\r\ntv:\r\nhttps://www.apple.com/shop/buy-tv/apple-tv-4k\r\n\r\n\r\n** Additional Comments ** \r\n\r\nIncluding the older notes here.  Much of this is likely no longer relevant, but hanging on to just for possible reference later:\r\n\r\n-------------------- older notes ------------------------------------\r\nNo product pages have a quantity attribute, even smaller accessories. Quantity can be adjusted in cart though\r\n\r\nShipping options are offered individually for each product in cart which I don't think we can support, but free shipping is pre-selected so I just each product on free shipping\r\n\r\nIt looks like there are three main product page layouts (in terms of elements and their attributes). One for Mac’s (not including the Pro Display XDR) which are “configured” on the product page, one for apple's core products other than Macs, and on for the wide variety of accessories also on their site.\r\n- Ahh Watches might have unique attribute schema, but the majority of non-attribute elements we rely on can be selected with the same css/xpath used for iPhones, iPads, etc.\r\n- Attribute row/wrapper selector: div#select-product div.as-tabs div.as-productselection-dimension\r\n\r\nIn general order of selectors will be: Mac, Non-mac core product, accessory\r\nMac and accessories have the same price selector\r\n\r\nMac:\r\nhttps://www.apple.com/shop/buy-mac/macbook-air/space-gray-1.1ghz-quad-core-core-i5-processor-with-turbo-boost-up-to-3.5ghz-512gb#\r\nAttribute row/wrapper selector: div.as-configuration-main div.as-configuration-optiongroup\r\n\r\nNon-Mac Core product:\r\nhttps://www.apple.com/shop/buy-iphone/iphone-11-pro\r\nAttribute row/wrapper selector: div#select-product div.as-product-wrapper div[id*=\"Item\"]\r\n\r\nAccessory:\r\nhttps://www.apple.com/shop/product/MWP22/airpods-pro (no attributes)\r\nhttps://www.apple.com/shop/product/MUF82AM/A/usb-c-digital-av-multiport-adapter\r\nAttribute row/wrapper selector(if attributes exist): div.as-pdp-purchaseinfosection li.as-pdp-prodvariations div[class*=\"as-pdp-prodvariation\"]\r\n- This element and multiple of its parents re-render when an attribute is chosen or switched, which removes the generic attribute marker I add in prod ops (tt-attr-index). So for accessories we do not use on div[tt-attr-index = idx] attrOptions as a selector to grab all attribute options as, with all other product pages\r\n\r\nhttps://www.apple.com/shop/product/MXPF2AM/A/40mm-deep-sea-blue-modern-buckle-large?fnode=07232affc7845af83345ae775ec4518a4d94e28acca82522908f1689d03d3d9cb25fffc5db87f4631339401df0ae786f2c415d75d2a0701638c74146405a9c1d95a42894a92bddb2264caa5eeb1d5cbe8e9ab62e9f5c6795b1e1965d32d7097d1bd2ad4639bfa5069e0dc7d3d019853e\r\n\r\nhttps://www.apple.com/shop/product/MXQU2LL/A/magic-keyboard-for-ipad-pro-129%E2%80%91inch-4th-generation-us-english?afid=p239%7C118767&cid=aos-us-aff-ir\r\n\r\nAccessory with capacity attribute in select format:\r\nhttps://www.apple.com/shop/product/MX1K2G/A/128gb-2x64gb-ddr4-ecc-memory-kit?afid=p239%7C118767&cid=aos-us-aff-ir\r\n\r\nNon-apple brand accessory:\r\nhttps://www.apple.com/shop/product/HP352ZM/A/otterbox-symmetry-series-360-case-for-129-inch-ipad-pro-4th-generation?fnode=9a\r\n\r\niPhones:\r\nTrade In’s (Only available for iPhones)\r\nModel (I.e. 11 Pro or Pro Max, skipped if there’s only one model)\r\nColor\r\nStorage\r\nCarrier\r\n\r\nWatch:\r\nWith case size attribute: https://www.apple.com/shop/buy-watch/apple-watch?option.watch_cases=MWT52LL/A&option.watch_bands=MXMW2AM/A&preSelect=false&product=Z0YQ&step=detail#\r\n\r\nNo attribute case size: \r\nhttps://www.apple.com/shop/buy-watch/apple-watch?option.watch_cases=MWQN2LL/A&option.watch_bands=MXPN2AM/A&preSelect=false&product=Z0YQ&step=detail#\r\n\r\nNo attributes\r\nhttps://www.apple.com/shop/product/MWP22AM/A/airpods-pro (Do we want to support personalizations like engravings?)\r\n\r\n\r\nAustralia ~ 12 %% Canada ~ 38 %% China ~ People's Republic of %% France ~ 73 %% Germany ~ 79 %% Italy ~ 101 %% Mexico ~ 134 %% Netherlands ~ 145 %% New Zealand ~ 149 %% Spain ~ 188 %% Sweden ~ 203 %% United Kingdom ~ 227 %% United States ~ 228","sku_identifier":{"selector":"//div[form/@data-part-number][1]/form/@data-part-number","has_custom_selector":true},"mpn_identifier":{"selector":"//body[not(//div[contains(@class, \"para-list\")]/p[contains(text(), \"Mfr. Part Number:\")])]//div[form/@data-part-number][1]/form/@data-part-number | //div[contains(@class, \"para-list\")]/p[contains(text(), \"Mfr. Part Number:\")]","has_custom_selector":true},"gtin_identifier":null,"final_price_div_auth":null,"shipping_price_div_auth":null,"handling_price_div_auth":null,"checkout_recording_auth":null,"currency_format":"$AMOUNT","recording_start_urls":{"noauthCheckout":"https://www.apple.com/shop/bag","addToCart":"https://www.apple.com/shop/buy-iphone/iphone-13-pro/6.1-inch-display-1tb-graphite-unlocked"},"recording_end_urls":null,"category_wrapper_div":{"selector":"li.as-globalfooter-breadcrumbs-item:not(last-child) a","has_custom_selector":true},"address_check_auth":null,"final_sale_div":null,"original_price_div":null,"discounted_price_div":null,"sales_tax_div_auth":null,"shipping_estimate_div_auth":null,"pickup_div":null,"non_purchasable_div":{"selector":"meta[content=\"Mac Pro\"],\r\nhead meta[content=\"iMac Pro\"],\r\nform[action=\"/shop/buy-mac/imac/27-inch-3.7ghz-6-core-processor-with-turbo-boost-up-to-4.6ghz-2tb\"], div.localnav-header a[href=\"/shop/refurbished\"]:contains(\"Refurbished\")","has_custom_selector":true},"p_free_shipping_div":null,"errors_meta":[],"data_converters":{"shipping_first_name":[{"type":"simple","converter_id":"no_conversion"}],"shipping_last_name":[{"type":"simple","converter_id":"no_conversion"}],"shipping_address":[{"type":"simple","converter_id":"no_conversion"}],"shipping_zip":[{"type":"simple","converter_id":"no_conversion"}],"shipping_telephone":[{"type":"simple","converter_id":"no_conversion"}],"card_number":[{"type":"simple","converter_id":"no_conversion"}],"combined_mm_yy_expiry_date":[{"type":"simple","converter_id":"520e1c5255a0f97f4d000002"}],"billing_first_name":[{"type":"simple","converter_id":"no_conversion"}],"billing_last_name":[{"type":"simple","converter_id":"no_conversion"}],"billing_address":[{"type":"simple","converter_id":"no_conversion"}],"billing_zip":[{"type":"simple","converter_id":"no_conversion"}]},"logo":null,"delays":{"add_to_cart":3000,"product_opts_field":200,"product_opts":295000,"add_to_cart_field_press":3000},"user_agent":null,"user_agent_scope":null,"needed_banned_remote_urls":[],"contact":"https://support.apple.com/","ship_est_start_time":{"$date":"2020-04-14T00:15:36.856Z"},"est_stats_start_time":null,"checkout_information_auth":null,"regression_tests_status":{"daily_noauth_simple_test":{"at":{"$date":"2020-07-10T23:12:07.005Z"},"status":"failed","issues":["Cart failed."],"cart_failures":1,"purchase_failures":6,"estimation_failures":0},"noauth_success_test":{"at":{"$date":"2020-09-28T03:27:42.131Z"},"status":"failed","issues":["Cart failed."],"cart_failures":21,"purchase_failures":0,"estimation_failures":0},"feed_test":{"at":{"$date":"2020-05-01T22:19:46.878Z"},"status":"ok","issues":null,"cart_failures":0,"purchase_failures":0,"estimation_failures":0}},"checkout_dep_fields":null,"regression_products":[{"url":"https://www.apple.com/shop/buy-ipad/ipad-pro","source":"manual"},{"url":"https://www.apple.com/shop/buy-iphone/iphone-12","source":"manual"},{"url":"https://www.apple.com/shop/buy-mac/macbook-pro/13-inch-space-gray-apple-m2-chip-with-8-core-cpu-and-10-core-gpu-256gb","source":"manual"},{"url":"https://www.apple.com/shop/buy-tv/apple-tv-4k","source":"manual"},{"url":"https://www.apple.com/shop/buy-mac/macbook-air/midnight-apple-m2-chip-with-8-core-cpu-and-10-core-gpu-512gb","source":"manual"},{"url":"https://www.apple.com/shop/buy-iphone/iphone-13","source":"manual"},{"url":"https://www.apple.com/shop/product/MME73AM/A/airpods-3rd-generation","source":"manual"},{"url":"https://www.apple.com/shop/product/MNWM3AM/A/35w-dual-usb-c-port-compact-power-adapter","source":"manual"},{"url":"https://www.apple.com/shop/buy-mac/pro-display-xdr/standard-glass","source":"manual"},{"url":"https://www.apple.com/shop/buy-mac/macbook-pro/16-inch-silver-10-core-cpu-16-core-gpu-1tb","source":"manual"},{"url":"https://www.apple.com/shop/buy-airtag/airtag/4-pack","source":"manual"},{"url":"https://www.apple.com/shop/product/MXLY2AM/A/lightning-to-usb-cable-1-m?fnode=02d2812f3e5d8962d42813169d6cfc38ae8b349557d2e05ec5d2af1d4581a384691cbdb8c758fb1e5a79b37aea64cb079cb28d5d544fce316d9db08bb66bc3b5260da48731ad55ae57339a031d2681e61abd588bd48bceafa06ee33ad55f97cb","source":"manual"},{"url":"https://www.apple.com/shop/product/HPNG2VC/A/sony-playstation-dualsense%E2%84%A2-wireless-controller","source":"manual"},{"url":"https://www.apple.com/shop/product/HMGA2VC/A/logitech-crayon-for-ipad","source":"manual"},{"url":"https://www.apple.com/shop/buy-watch/apple-watch-ultra/49mm-cellular-titanium-green-alpine-loop-large","source":"manual"},{"url":"https://www.apple.com/shop/buy-watch/apple-watch-se?option.watch_cases=MNLA3LL/A&option.watch_bands=MQG83AM/A&preSelect=false&product=Z0YQ&step=detail","source":"manual"}],"store_options":{"images_on_add_to_cart":"yes","creates_store_account":null,"final_price_includes_gift_card":null,"overwrite_sales_tax":null,"sync_noauth_and_auth":null,"one_coupon_only":null,"honey_billing_address":null,"add_app_to_ua":null,"shoprunner_on_shipping_opts":null,"existing_account_emails_not_allowed":null,"retry_on_info_failures":null,"use_chrome":null,"disable_product_quantity":null,"disable_daily_regressions":null,"disable_image_proxy":null,"continue_on_alerts":null,"noauth_ends_with_success":null,"auth_ends_with_success":null,"local_ends_with_success":null,"is_variantless":null},"product_opts_retrieval_js":"// built by [zackary.klebanoff] 2020-11-30\r\n// replatformed by [Jon Skidanov] 2022-08-14\r\n\r\n// ############################################################################################################################################\r\n// TABLE OF CONTENTS:\r\n// Function Block:     ll. 14  - 236 | Functions to parse title, translate title to GID, and updatePrice()\r\n// Generic Attributes: ll. 237 - 521 | We have two functions at the top which generate the labels and ops in GET/SET.\r\n// Execution Code:     ll. 522 - 617 | Marks generic attributes -> tests for timeout -> parses title, parses GID, and misc fields.\r\n// ############################################################################################################################################\r\n\r\n\r\n// ############################################################################################################################################\r\n// *** Function Block\r\n\r\n\r\n// block customizable products\r\nvar isCustomizableProduct = __utils__.findOne('fieldset.rf-bfe-product-dimension-group h2#bandCategories');\r\nif(isCustomizableProduct){\r\n  __utils__.echo('PRODUCT NOT SUPPORTED - Customizable PRODUCT');\r\n  __utils__.echo('escapeVim');\r\n  return false;\r\n}\r\n\r\n// Example URLS to Block\r\n// https://www.apple.com/shop/buy-mac/imac-pro/3.0ghz-1tb\r\n// https://www.apple.com/shop/buy-mac/mac-pro/tower\r\nvar totalSetTime = 0;\r\n_ttTimeout = function() {\r\n  var blockProduct = false;\r\n  var attrInfo = \r\n  { attribute1: {delay: 3000, selector: ttCreateOptsSelector(0)},\r\n    attribute2: {delay: 2000, selector: ttCreateOptsSelector(1)},\r\n    attribute3: {delay: 2000, selector: ttCreateOptsSelector(2)},\r\n    attribute4: {delay: 2000, selector: ttCreateOptsSelector(3)},\r\n    attribute5: {delay: 2000, selector: ttCreateOptsSelector(4)}\r\n  };\r\n  // estimating total time needed to run SET for all combos  \r\n  var optsCountByAttr = [];\r\n  for(var attr in attrInfo){\r\n    var attrOptsCount = __utils__.findAll(attrInfo[attr].selector).length;\r\n    if(attrOptsCount === 0){\r\n      continue;\r\n    }\r\n    optsCountByAttr.push(attrOptsCount);\r\n    var attrSetCount = 1;\r\n    for (var iPos = 0; iPos < optsCountByAttr.length; iPos++) {\r\n      attrSetCount *= optsCountByAttr[iPos];\r\n    }\r\n    __utils__.echo('SET count for '+attr+': '+attrSetCount);\r\n    totalSetTime += attrSetCount*attrInfo[attr].delay;\r\n  }\r\n  if (totalSetTime > 295000) {\r\n    blockProduct = true;\r\n  }\r\n  return blockProduct;\r\n};\r\n\r\nfunction getPageType() {\r\n  var pageUrl =  location && location.href;\r\n  var isPhonePage = !!pageUrl.match(/buy-iphone/);\r\n  var isiPadPage = !!pageUrl.match(/buy-ipad/);\r\n  var isWatchPage = !!pageUrl.match(/buy-watch/);\r\n  var isMacPage = !!pageUrl.match(/buy-mac/);\r\n  var isOtherFlagshipPage = !isPhonePage && !isiPadPage && !isWatchPage && !isMacPage && !!pageUrl.match(/buy-/);\r\n  var isAccessoryPage = !!__utils__.findOne('.localnav-header [data-display-name*=\"Accessories\"]');\r\n  return {\r\n    IPHONE: isPhonePage,\r\n    IPAD: isiPadPage,\r\n    APPLE_WATCH: isWatchPage,\r\n    MAC: isMacPage,\r\n    OTHER_FLAGSHIP: isOtherFlagshipPage,\r\n    ACCESSORY: isAccessoryPage,\r\n  };\r\n}\r\n\r\n// Takes the GID and transforms it into a usable title\r\nvar cleanTitle = function(gid) { \r\n    var wordArray = gid.split('-');\r\n    for (i=0;i<wordArray.length;i++){\r\n      wordArray[i] = wordArray[i][0].toUpperCase() + wordArray[i].slice(1);\r\n    }\r\n    var finishedTitle = wordArray.join(\" \");\r\n    \r\n    // modifying for proper format --> ie Iphone to iPhone\r\n    var wordCorrections = { \r\n      'Iphone':\"iPhone\", \r\n      'Ipad':\"iPad\", \r\n      'Macbook':\"MacBook\",\r\n      'Airpods':\"AirPods\",\r\n      'Imac':\"iMac\",\r\n      'Ipod':\"iPod\",\r\n      'Usb C':\"USB-C\"\r\n    }; \r\n    \r\n    var matchRegex = new RegExp(Object.keys(wordCorrections).join(\"|\"),'gi');\r\n    var match = finishedTitle.match(matchRegex);\r\n    if (match){\r\n      match.forEach(function(elem) {\r\n        finishedTitle = finishedTitle.replace(elem, wordCorrections[elem]);\r\n      });\r\n    }\r\n    \r\n    return finishedTitle;\r\n  };\r\n\r\n// Scrapes the whole page, grabs the title, and removes attributes from the title to create GID\r\nfunction cleanTitleGID(pdpBodyText,rawProductTitle){\r\n  var matches = [];\r\n  \r\n  // Grabbing attribute text from AJAX call\r\n  // Removing ipad and pro from attribute text so they are not later removed from titles\r\n  var regexp = /(?:as-label|selected-text|selected=\"selected)\"[^>]*>([^<{(]+)/g;\r\n  var match;\r\n  while ((match = regexp.exec(pdpBodyText)) !== null) {\r\n    matches.push(match[1].toLowerCase().replace('ipad',' ').replace('pro',' '));\r\n  }\r\n  \r\n  // Manually adding words to be removed below\r\n  var removedWords = ['-','–','edition','product','size','new','customize','your','buy','for'];\r\n  for (var n1=0; n1<matches.length; n1++) {\r\n    \r\n    matches[n1] = matches[n1].replace(/[^\\w.\\s]+/gi,' ');\r\n    var matchWordArray = matches[n1].trim().split(' ');\r\n    for (var n2=0; n2<matchWordArray.length; n2++){\r\n      \r\n      // Attr messes up title\r\n      // URL: https://www.apple.com/shop/product/MXQT2LL/A/magic-keyboard-for-ipad-air-4th-generation-and-ipad-pro-11-inch-2nd-generation-us-english\r\n      if (matchWordArray[n2] === '' || matchWordArray[n2] === 'or') continue;\r\n      \r\n      removedWords.push(matchWordArray[n2].toLowerCase());\r\n      __utils__.echo(\"word added to be removed = \"+matchWordArray[n2]);\r\n    }\r\n  }\r\n  \r\n  // Making title lower case and replacing \" with inch and removing m for meters\r\n  // URL: https://www.apple.com/shop/product/MX0K2AM/A/usb-c-to-lightning-cable-1-m  \r\n  var productTitleClean = rawProductTitle.toLowerCase().replace('\"',' inch');\r\n  productTitleClean = productTitleClean.replace(\"m)\",'');\r\n  \r\n  // Replacing all parentheses, dashes, and special chars with spaces and the end of title periods\r\n  // URL: https://www.apple.com/shop/buy-mac/imac/21.5-inch-2.3ghz-dual-core-processor-with-turbo-boost-up-to-3.6ghz-256gb#\r\n  productTitleClean  = productTitleClean.replace(/[^\\w.\\s]+/gi,' ').replace(/\\.$/gi,'');\r\n  \r\n  // Removing all words from the removedWords array\r\n  removedWords.forEach(function(elem) {\r\n    var replaceElem = new RegExp(elem,'gi');\r\n    productTitleClean = productTitleClean.replace(replaceElem, '');\r\n  });\r\n  \r\n  // Cleaning Again\r\n  productTitleClean = productTitleClean.trim();\r\n  productTitleClean = productTitleClean.replace(/\\(/gi,'').replace(/\\)/gi,'').replace(/\\s+/gi,'-').replace(/-{2,}/gi,'-');\r\n  \r\n  return productTitleClean;\r\n}\r\n\r\nvar getGid = function(pageType) {\r\n  var pageUrl =  location && location.href;\r\n  var gid = '';\r\n  // v1 Flagship GID\r\n  if (pageType.IPHONE || pageType.IPAD || pageType.OTHER_FLAGSHIP) {\r\n    gid = (pageUrl.match(/buy-\\w+\\/([\\w-]+)\\/?/) || [])[1];\r\n  }\r\n  // v2 Modified Title GID\r\n  else {\r\n    var rawProductTitle = '';\r\n    \r\n    // Different title used for Mac pdps\r\n    if (pageType.MAC) {\r\n      rawProductTitle = __utils__.findOne(\"li.as-globalfooter-breadcrumbs-item:last-of-type\") && __utils__.findOne(\"li.as-globalfooter-breadcrumbs-item:last-of-type\").text().trim();\r\n    }\r\n    // Special Title\r\n    // URL: https://www.apple.com/shop/buy-watch/apple-watch/40mm-gps-space-gray-aluminum-obsidian-mist-black-sport-band-sm-ml\r\n    else if (__utils__.findOne('span.as-productdecision-familyname')){ \r\n      rawProductTitlePart1 = __utils__.findOne(\"a[data-display-name='AppleWatch'].localnav-title\") && __utils__.findOne(\"a[data-display-name='AppleWatch'].localnav-title\").text().trim();\r\n      rawProductTitlePart2 = __utils__.findOne('span.as-productdecision-familyname+span') && __utils__.findOne('span.as-productdecision-familyname+span').text().trim();\r\n      rawProductTitle = rawProductTitlePart1 + ' ' + rawProductTitlePart2;\r\n    } else{ // Normal Title\r\n      rawProductTitle = __utils__.findOne(\r\n        \"h1[data-autom=productTitle], \" +\r\n        \"h1[data-autom='productSelectionHeader'], \" +\r\n        \"div.as-productdecision-header h1, \" +\r\n        \"h1.as-configuration-maintitle, \" +\r\n        \"div#title.as-pdp-title h1, \" +\r\n        \"div.as-configuration-maintitleh1[data-autom='productSelectionHeader'], \" +\r\n        \"div.as-productdecision-header h1, \" +\r\n        \"h1.as-configuration-maintitle, \" +\r\n        \"div#title.as-pdp-title h1, \" +\r\n        \"div.as-configuration-maintitle\"\r\n      );\r\n      rawProductTitle = rawProductTitle && rawProductTitle.text().trim();\r\n    }\r\n    // grabbing the entire raw text of the DOM\r\n    var pdpBodyText = $('html').html();\r\n    gid = cleanTitleGID(pdpBodyText, rawProductTitle);\r\n  }\r\n  // __utils__.echo('[DEBUG] here is our GID -> ' + gid);\r\n  return gid.trim();\r\n};\r\n\r\n\r\nvar setTitleOnPage = function(titleText) {\r\n  var ttProdTitle = $('div#ttHidden').append('<div id=\"ttProdTitle\">' + titleText + '</div>');\r\n};\r\n\r\nvar setGidOnPage = function(titleSlug) {\r\n  var ttGid = $('div#ttHidden').append('<div id=\"ttGid\">' + titleSlug + '</div>');\r\n};\r\n\r\n// Updates the price based on the selectors available \r\nvar updatePrice = function() {\r\n  $('div#ttPrice').remove();\r\n  var ttPrice = '';\r\n  // noCarrierPrice: We need to display a price for an unlocked iPhone instead of a carrier which is slightly higher\r\n  // URL: https://www.apple.com/shop/buy-iphone/iphone-12-pro\r\n  var noCarrierPrice = __utils__.findOne(\"input.form-selector-input[value='UNLOCKED/US'] + label span[class*=price-point-fullPrice]\");\r\n  var specialPrice = __utils__.findOne(\"summary-builder div.as-price span[data-autom='price'],  div[data-autom*='localnavPrice'] span.price-point-acinstallment+span\");\r\n  var normalPrice = __utils__.findOne(\r\n    \"div.rf-pdp div.rf-pdp-prices span:first, \" +\r\n    \"span.as-price-acinstallmentterms, \" +\r\n    \"div.as-productdecision-headerprice div[class*='price-point-fullPrice'] span.nowrap, \" +\r\n    \"span.as-price-currentprice span.as-pricepoint-fullprice-comparative, \" +\r\n    \"div.as-pdp-main div.as-pdp-purchaseinfosection div.as-price-currentprice span.current_price, \" +\r\n    \"div[data-autom*='localnavPrice'] span.price-point-acinstallment+span, \" +\r\n    \"summary-builder div.as-price span[data-autom='price'], \" +\r\n    \"div.rf-flagship-summary-wrapper div.price-point.price-point-fullPrice span, \" +\r\n    \"span.as-prices-fullprice-price, \" +\r\n    \"span.as-price-currentprice, \" +\r\n    \".rc-summary-price-box .rc-price div.rc-prices-currentprice span, \" +\r\n    \"span.rf-po-bfe-purchasegroupoption-price, \" +\r\n    \"span[data-autom=full-price]\"\r\n  );\r\n  if (noCarrierPrice) {\r\n    ttPrice = noCarrierPrice.text().trim();\r\n  }\r\n  else if (specialPrice) {\r\n    ttPrice = specialPrice.text().trim(); \r\n  } else if (normalPrice) {\r\n    ttPrice = normalPrice.text().trim();\r\n  }\r\n  \r\n  ttPrice = ttPrice.replace(/From./, '').replace(/.or.*/, '');\r\n  $('div#ttHidden').append('<div id=\"ttPrice\">' + ttPrice + '</div>');\r\n};\r\n\r\n// ############################################################################################################################################\r\n// *** Generic Attributes:\r\n\r\n// *** Label and Ops Selector Creation\r\nttCreateLabelSelector = function(attrIdx) {\r\n  // Example: https://www.apple.com/shop/buy-ipod/ipod-touch\r\n  var boxSwatch_attrLabel = \"div[tt-attr-index='\"+ attrIdx +\"'] h2.as-dimension-header, \" +\r\n                            \"div[tt-attr-index='\"+ attrIdx +\"'] h2#dimensionScreensize > span:first, \" +\r\n                            \"div[tt-attr-index='\"+ attrIdx +\"'] h3.rf-configuration-optiongroup-header, \";\r\n  \r\n  // Example: https://www.apple.com/shop/buy-ipad/ipad-pro\r\n  var boxSwatchV2_attrLabel = \"div[tt-attr-index='\"+ attrIdx +\"'] h2.rf-flagship-productselection-dimension-header,\";\r\n  \r\n  // Example: https://www.apple.com/shop/buy-mac/macbook-pro/16-inch-space-gray-2.3ghz-8-core-processor-1tb#\r\n  var listSwatch_attrLabel = \"div[tt-attr-index='\"+ attrIdx +\"'] h3.as-title-count,\";\r\n  \r\n  // Example: https://www.apple.com/shop/product/MXQT2LL/A/magic-keyboard-for-ipad-air-4th-generation-and-ipad-pro-11-inch-2nd-generation-us-english\r\n  var dropdown_attrLabel = \"div[tt-attr-index='\"+ attrIdx +\"'] label.as-pdp-label, div.as-pdp-prodvariation-\"+ attrIdx +\" label.as-pdp-label,\";\r\n  \r\n  // Example: https://www.apple.com/shop/product/MYD12AM/A/40mm-plum-sport-band-regular\r\n  var colorSwatch_attrLabel = \"div[tt-attr-index='\"+ attrIdx +\"'] fieldset.product-styles legend, \" +\r\n                              \"div.as-pdp-prodvariation-\"+ attrIdx +\" fieldset.product-styles legend, \" +\r\n                              \"div[tt-attr-index='\"+ attrIdx +\"'] fieldset.colornav legend, \" + \r\n                              \"div[tt-attr-index='\"+ attrIdx +\"'] div.rf-bfe-product-dimension-colornav-header, \";\r\n  \r\n  var unknown_attrLabel = \"div[tt-attr-index='\"+ attrIdx +\"'] div.as-productselection-dimensionheader, \" +\r\n                          \"div[tt-attr-index='\"+ attrIdx +\"'] fieldset legend, \" + \r\n                          \"div[tt-attr-index='\"+ attrIdx +\"'] h2#dimensionCapacity > span, \";\r\n  \r\n  var cordLength_attrLabel = \"div[tt-attr-index='\"+ attrIdx +\"'] span.form-dropdown-label, \" +\r\n                             \"div[tt-attr-index='\"+ attrIdx +\"'] h2.rf-productselection-dimension-header\";\r\n  \r\n  return boxSwatch_attrLabel + boxSwatchV2_attrLabel + listSwatch_attrLabel + dropdown_attrLabel + colorSwatch_attrLabel + unknown_attrLabel + cordLength_attrLabel;\r\n};\r\n\r\nttCreateOptsSelector = function(attrIdx) {\r\n  // Example: https://www.apple.com/shop/buy-ipod/ipod-touch\r\n  var swatch_opts = \"div[tt-attr-index='\"+ attrIdx +\"'] fieldset div.column:not(.as-carrierpromo-offerdetails):not(.form-selector-right-col):not(.form-selector-left-col):has(input), \" +\r\n                    \"div[tt-attr-index='\"+ attrIdx +\"'] div.rc-dimension-selector-row:has(.form-selector-left-col):has(input), \" +\r\n                    \"div[tt-attr-index='\"+ attrIdx +\"'] div.rf-configuration-categoryoption, \";\r\n  \r\n  // Example: https://www.apple.com/shop/product/MYD12AM/A/40mm-plum-sport-band-regular\r\n  var colorSwatch_opts = \"div[tt-attr-index='\"+ attrIdx +\"'] ul.colornav-items li, \" +\r\n                         \".as-pdp-prodvariation-\" + attrIdx + \" ul.colornav-items li, \";\r\n  \r\n  // Box swatch under the color swatch in this URL above^\r\n  var colorSwatchBox_opts = \"div[tt-attr-index='\"+ attrIdx +\"'] li.rs-pdp-button-item, \" +\r\n                            \"div.as-pdp-prodvariation-\"+ attrIdx +\" li.rs-pdp-button-item, \";\r\n                            \r\n  // Only preselected options being grabbed \r\n  // Example: https://www.apple.com/shop/product/MXQU2LL/A/magic-keyboard-for-ipad-pro-129%E2%80%91inch-4th-generation-us-english\r\n  var dropdown_opts = \"div[tt-attr-index='\"+ attrIdx +\"'] select.product-variation-list option, \" +\r\n                      \".as-pdp-prodvariation-\" + attrIdx + \" select.product-variation-list option, \" +\r\n                      \".as-pdp-prodvariation-\" + attrIdx + \" select#dimensionMerchModel option, \" +\r\n                      \".as-pdp-prodvariation-\" + attrIdx + \" select.product-variation-list:not('#dimensionMerchModel') option,\";\r\n  \r\n  // Below are selectors that work and specific page association is unknown, kept from the original recipe\r\n  var UNKNOWN_opts = \".as-pdp-prodvariation-\" + attrIdx + \" .form-selector li\";\r\n  \r\n  var cordLength_opts = \", div[tt-attr-index='\"+ attrIdx +\"'] select.form-dropdown-select option\";\r\n  \r\n  return swatch_opts + colorSwatch_opts + colorSwatchBox_opts + dropdown_opts + UNKNOWN_opts + cordLength_opts;\r\n};\r\n\r\n// *** GET function for generic attributes\r\n_ttAttributeGet = function(attrIdx) {\r\n  var result = [];\r\n  \r\n  // LABEL\r\n  var attrLabel = '';\r\n  var selectorSet = ttCreateLabelSelector(attrIdx);\r\n  var attrLabelDiv = (__utils__.findOne(selectorSet) && __utils__.findOne(selectorSet).text().trim());\r\n\r\n  if (attrLabelDiv) {\r\n    // Special editing for color swatch labels\r\n    // URL: https://www.apple.com/shop/product/MYD12AM/A/40mm-plum-sport-band-regular\r\n    if (attrLabelDiv.match(/Color/)) attrLabelDiv = attrLabelDiv.replace(/[^\\w\\d\\s].*/gi,'');\r\n    var attrLabel = attrLabelDiv;\r\n    attrLabel = attrLabel.replace(/[^\\w\\s]+/gi,'').replace(/\\d\\s*/gi,'').replace(/Choose\\syour\\s/gi,'');\r\n  } \r\n  attrLabel = attrLabel.trim();\r\n  attrLabel = attrLabel.slice(0,1).toUpperCase() + attrLabel.slice(1) + ': ';\r\n  \r\n  // OPS\r\n  var opts = [];\r\n  opts = __utils__.findAll(ttCreateOptsSelector(attrIdx));\r\n  for (var iPos=0; iPos<opts.length; iPos++) {\r\n    var el = opts[iPos];\r\n    \r\n    // Ignoring all carrier options and defaulting to SIM free [Zach B.]\r\n    // URL: https://www.apple.com/shop/buy-iphone/iphone-12-pro\r\n    if (el.find('input').attr('name') == \"carrierModel\" && el.find('input').attr('value') != \"UNLOCKED/US\") {\r\n      continue;\r\n    }\r\n    \r\n    var textElement;\r\n    var elText;\r\n    if (el.find('span.as-chicklets-wrap span.as-dimension-chicklets').length) {\r\n      textElement = el.find('span.as-chicklets-wrap span.as-dimension-chicklets');\r\n      elText = textElement.text().trim();\r\n      \r\n    } else if (el.find('.form-selector-title div.show-expanded').length) {\r\n      textElement = el.find('.form-selector-title div.show-expanded'); \r\n      elText = textElement.text().trim();\r\n      \r\n    } else if (el.find('.form-selector-title').length) { // https://www.apple.com/shop/buy-iphone/iphone-12-pro -- capacity attribute\r\n      textElement = el.find('.form-selector-title');\r\n      elText = textElement.text().trim();\r\n      \r\n    } else if (el.find('span.form-choiceselectorlabel-twocolleft').length){ // https://www.apple.com/shop/buy-mac/pro-display-xdr\r\n      textElement = el.find('span.form-choiceselectorlabel-twocolleft');\r\n      elText = textElement.text().trim();\r\n      \r\n    } else { // Majority of attributes just use el.text().trim()\r\n      elText = el.text().trim();\r\n    }\r\n    \r\n    // Cleaning little characters appended at the end of attributes\r\n    // URL: https://www.apple.com/shop/buy-ipad/ipad-air \r\n    elText = elText.replace(/GB.*/,'GB').replace(/TB.*/,'TB').replace(/display.*/, 'display').replace(/\\(PRODUCT\\)/, '');\r\n    \r\n    // Adding attribute label\r\n    if (attrLabel) elText = attrLabel + elText;\r\n    \r\n    result.push(elText);\r\n  }\r\n  \r\n  // SINGLE OPTION\r\n  // URL: https://www.apple.com/shop/buy-watch/apple-watch-series-3/38mm-gps-silver-aluminum-white-sport-band?bfil=1\r\n  if (!opts.length) {\r\n    var el = __utils__.findOne('[tt-attr-index=\"'+ attrIdx  +'\"] .single-choice-selector-label, [tt-attr-index=\"' + attrIdx +'\"] .as-productselection-dimensionvalue, [tt-attr-index=\"' + attrIdx +'\"] .rf-productselection-dimensionvalue');\r\n    \r\n    // KEYBOARD LANGUAGE EDGE CASE: This is only for computers to decrease load time and complexity\r\n    // URL: https://www.apple.com/shop/buy-mac/macbook-pro/13-inch-space-gray-apple-m1-chip-with-8-core-cpu-and-8-core-gpu-256gb#\r\n    var keyboardLanguageEl = __utils__.findOne(\"//div[contains(@tt-attr-index, '\"+attrIdx+\"')]//select/option[contains(text(),'Keyboard - US English')]\");\r\n    if (keyboardLanguageEl) el = keyboardLanguageEl;\r\n    \r\n    var elText = el && el.text().trim();\r\n    if (attrLabel) elText = attrLabel + elText;\r\n    result.push(elText);\r\n  } \r\n  \r\n  return result;\r\n};\r\n\r\n// *** SET function for generic attributes\r\n_ttAttributeSet = function(attrIdx, fillValue) {\r\n  var changed = false;\r\n  \r\n  // PRICE CHANGE CHECK PART 1\r\n  // If we don't observe a price change after clicking we wait a little longer before updating.\r\n  var beforePrice = $(_t_productPageSelectors.price).text();\r\n  \r\n  // LABEL SCRAPING\r\n  var attrLabel = '';\r\n  var selectorSet = ttCreateLabelSelector(attrIdx);\r\n  var attrLabelDiv = (__utils__.findOne(selectorSet) && __utils__.findOne(selectorSet).text().trim());\r\n  \r\n  // Special editing for color swatch labels\r\n  // URL: https://www.apple.com/shop/product/MYD12AM/A/40mm-plum-sport-band-regular\r\n  if (attrLabelDiv) {\r\n    if (attrLabelDiv.match(/Color/)) attrLabelDiv = attrLabelDiv.replace(/[^\\w\\d\\s].*/gi,'');\r\n    var attrLabel = attrLabelDiv;\r\n    attrLabel = attrLabel.replace(/[^\\w\\s]+/gi,'').replace(/\\d\\s*/gi,'').replace(/Choose\\syour\\s/gi,'');\r\n  } \r\n  attrLabel = attrLabel.trim();\r\n  attrLabel = attrLabel.slice(0,1).toUpperCase() + attrLabel.slice(1) + ': ';\r\n  \r\n  // OPS SCRAPING\r\n  var opts = [];\r\n  opts = __utils__.findAll(ttCreateOptsSelector(attrIdx));\r\n  for (var iPos=0; iPos<opts.length; iPos++) {\r\n    var el = opts[iPos];\r\n\r\n    // Ignoring all carrier options and defaulting to SIM free [Zach B.]\r\n    // URL: https://www.apple.com/shop/buy-iphone/iphone-12-pro\r\n    if (el.find('input').attr('name') === \"carrierModel\" && el.find('input').attr('value') !== \"UNLOCKED/US\"){\r\n      continue;\r\n    }\r\n    \r\n    var textElement;\r\n    var elText;\r\n    if (el.find('span.as-chicklets-wrap span.as-dimension-chicklets').length) {\r\n      textElement = el.find('span.as-chicklets-wrap span.as-dimension-chicklets');\r\n      elText = textElement.text().trim();\r\n    } else if (el.find('.form-selector-title div.show-expanded').length) {\r\n      textElement = el.find('.form-selector-title div.show-expanded'); \r\n      elText = textElement.text().trim();\r\n    } else if (el.find('.form-selector-title').length) { // https://www.apple.com/shop/buy-iphone/iphone-12-pro -- capacity attribute\r\n      textElement = el.find('.form-selector-title');\r\n      elText = textElement.text().trim();\r\n      \r\n    } else if (el.find('span.form-choiceselectorlabel-twocolleft').length){ // https://www.apple.com/shop/buy-mac/pro-display-xdr\r\n      textElement = el.find('span.form-choiceselectorlabel-twocolleft');\r\n      elText = textElement.text().trim();\r\n      \r\n    } else {\r\n      elText = el.text().trim(); // majority of attributes just use el.text().trim()\r\n    }\r\n    \r\n    // Cleaning \r\n    // URL: https://www.apple.com/shop/buy-ipad/ipad-air \r\n    elText = elText.replace(/GB.*/,'GB').replace(/TB.*/,'TB').replace(/display.*/, 'display').replace(/\\(PRODUCT\\)/, '');\r\n\r\n    // Adding attribute label\r\n    if (attrLabel) elText = attrLabel + elText;\r\n    \r\n    if (elText == fillValue) {\r\n      var buttonExists = __utils__.findOne('input', el) || __utils__.findOne('label',el);\r\n      if (buttonExists) {\r\n        __utils__.mouseEvent('click', buttonExists);\r\n        changed = true;\r\n      }\r\n      else if (el.is('option')) {\r\n          el.prop('selected', true);\r\n          var parentEl = el.parent();\r\n          __utils__.mouseEvent('change', parentEl);\r\n          changed = true;\r\n      }\r\n    }\r\n  }\r\n  \r\n  // SINGLE OPTION CASE\r\n  // URL: https://www.apple.com/shop/buy-watch/apple-watch-series-3/38mm-gps-silver-aluminum-white-sport-band?bfil=1\r\n  if (!opts.length) {\r\n    var el = __utils__.findOne('[tt-attr-index=\"'+ attrIdx  +'\"] .single-choice-selector-label, [tt-attr-index=\"' + attrIdx +'\"] .as-productselection-dimensionvalue, [tt-attr-index=\"' + attrIdx +'\"] .rf-productselection-dimensionvalue');\r\n    \r\n    // KEYBOARD LANGUAGE EDGE CASE: This is only for computers to decrease load time and complexity\r\n    // URL: https://www.apple.com/shop/buy-mac/macbook-pro/13-inch-space-gray-apple-m1-chip-with-8-core-cpu-and-8-core-gpu-256gb#\r\n    var keyboardLanguageEl = __utils__.findOne(\"//div[contains(@tt-attr-index, '\"+attrIdx+\"')]//select/option[contains(text(),'Keyboard - US English')]\");\r\n    if (keyboardLanguageEl) el = keyboardLanguageEl;\r\n    \r\n    var elText = el && el.text().trim();\r\n    if (attrLabel) elText = attrLabel + elText;\r\n    if (elText == fillValue) changed = true;\r\n  } \r\n  \r\n  sleep(1000);\r\n  \r\n  // PRICE CHANGE CHECK PART 2\r\n  // If we don't observe a price change after clicking we wait a little longer before updating it as a safeguard.\r\n  var afterPrice = $(_t_productPageSelectors.price).text();\r\n  if (beforePrice == afterPrice && attrLabel != 'Finish: ' && attrLabel != 'Color: ' && attrLabel != 'Carrier: ') {\r\n    __utils__.echo(\"EXTRA SLEEP FOR ATTR: \\n\");\r\n    __utils__.echo(attrLabel);\r\n    sleep(1000);\r\n    updatePrice();\r\n  }\r\n  \r\n  // Accessory attributes:\r\n  // We want to click through accessory attributes once whenever option 1 is changed and all other attributes are clicked.\r\n  if (attrIdx === 0) miscAttributesClicked = false;\r\n  if (!miscAttributesClicked && (attrIdx == attrCount - 1)) {\r\n    var noEngravingButton = __utils__.findOne('span.form-selector-title:contains(Skip engraving), span.form-selector-title:contains(No Engraving)');\r\n    if (noEngravingButton) __utils__.mouseEvent('click', noEngravingButton);\r\n    sleep(1000);\r\n    var tradeInButton = __utils__.findOne('input#noTradeIn');\r\n    if (tradeInButton) {\r\n      __utils__.mouseEvent('click', tradeInButton);\r\n      sleep(1000);\r\n      \r\n      var buyButton = __utils__.findOne('input[name=purchase_option_group][value=fullprice]');\r\n      if (buyButton) __utils__.mouseEvent('click', buyButton);\r\n      sleep(1000);\r\n  \r\n      var noCarrierButton = __utils__.findOne('input[value=\"UNLOCKED/US\"]:not([type=hidden])');\r\n      if (noCarrierButton) __utils__.mouseEvent('click', noCarrierButton);\r\n      sleep(3000);\r\n      \r\n      // Double clicking is intentional\r\n      var noAppleCareButton = __utils__.findOne('label[id*=noapplecare_label]');\r\n      if (noAppleCareButton) {\r\n        __utils__.mouseEvent('click', noAppleCareButton);\r\n        __utils__.mouseEvent('click', noAppleCareButton);\r\n      }\r\n      var noAppleCareButton2 = __utils__.findOne('input[data-autom*=applecareplus_59_noapplecare]');\r\n      if (noAppleCareButton2) {\r\n        __utils__.mouseEvent('click', noAppleCareButton2);\r\n        __utils__.mouseEvent('click', noAppleCareButton2);\r\n      }\r\n      sleep(4000);\r\n      \r\n       miscAttributesClicked = true;\r\n    }\r\n  }\r\n  \r\n  return changed;\r\n};\r\n  \r\n// ############################################################################################################################################\r\n// *** Execution Context Code:\r\n\r\n$('div#ttHidden').remove();\r\n$('body').append('<div id=\"ttHidden\" style=\"display: none;\"></div>');\r\nupdatePrice();\r\n\r\n// Selectors grab attributes for: Macs, Iphone/Ipads, Watches, Accessories (in that order) [Zach B.]\r\n// the final selector in __utils__.findAll is a valid attribute selector for accessories, \r\n// but we cannot rely on tt-attr-index for text/values of the attributes as tt-attr-index is removed when options are chosen [Zach B.]\r\nvar genericAttributes = __utils__.findAll(\r\n  'div:has(> select[name=dimensionLength]), ' +\r\n  'div.as-configuration-main div:not(:contains(\"Pre-Installed Software\")) div.as-configuration-optiongroup:not(.as-configuration-collapsiblelist), ' +\r\n  'div#select-product div.as-product-wrapper div[id*=\"Item\"], ' +\r\n  'div#select-product div.as-tabs div.as-productselection-dimension:not(:has(input[type=\"hidden\"])), ' +\r\n  'div.as-pdp-purchaseinfosection li.as-pdp-prodvariations>div:not(:has(li.rs-pdp-button-oneitem)), ' +\r\n  'div.rf-flagship-collapsable[data-analytics-section], ' +\r\n  'div.rf-pdp-dimension:not(:has(> select[name=dimensionLength])), ' +\r\n  '.rf-flagship-productselection .rf-flagship-productselection-section:not(:contains(\"Connect to a carrier now\")), ' +\r\n  'div[data-analytics-option-group=\"watch_bands_dimensionColor\"], ' +\r\n  'div[data-analytics-option-group=\"watch_cases_dimensionCaseSize\"], ' +\r\n  'div.colornav, ' +\r\n  'div[data-observer-key=\"dimensionCapacity\"], ' +\r\n  'div[data-analytics-section=dimensionScreensize], ' +\r\n  'div[data-analytics-option-group=processor], ' +\r\n  'div[data-analytics-option-group=memory], ' +\r\n  'div[data-analytics-option-group=storage], ' +\r\n  'div[data-analytics-option-group=adaptersremotes], ' +\r\n  'div[data-analytics-option-group=\"hard_drive\"], ' +\r\n  'div[data-analytics-option-group=\"watch_cases_dimensionConnection\"]'\r\n);\r\nmiscAttributesClicked = false;\r\nattrCount = genericAttributes.length;\r\n$(genericAttributes).toArray().forEach(function(el, idx) {\r\n  // Ending loop if Band Size attribute is present (when present, it is always the final attribute).  \r\n  // URL: https://www.apple.com/shop/product/MYP42AM/A/40mm-productred-solo-loop-size-6\r\n  if (el.find('legend').text() == \"Band Size\") return; \r\n  \r\n  $(el).attr(\"tt-attr-index\", idx);\r\n});\r\n\r\n// Blocks timeout pages\r\n// URL: https://www.apple.com/shop/buy-mac/imac-pro/3.0ghz-1tb\r\nif(_ttTimeout()){\r\n  var _ttBlockMsg = 'PRODUCT NOT SUPPORTED - ESTIMATED DELAY#3 TOO HIGH (' + totalSetTime + ')';\r\n  __utils__.echo('--- ' + _ttBlockMsg);\r\n  productOptsBlock = false;\r\n  return false; // making sure that the rest of the code in prod-opts-JS is not executed\r\n}\r\n\r\n// Block pdps under \"your styles\" instead of regular color options\r\n// URL: https://www.apple.com/shop/buy-watch/apple-watch/40mm-gps-blue-aluminum-atlantic-blue-braided-solo-loop-size-1\r\nif(__utils__.findOne(\"div.as-tabs-nav button[aria-selected='true']:contains('Your Styles')\")){\r\n  __utils__.echo('--- PRODUCT NOT SUPPORTED - Color attributes invalid');\r\n  productOptsBlock = false;\r\n  return false;\r\n}\r\n\r\n// Title AND GID Generation\r\nvar pageType = getPageType();\r\n\r\nvar cleanGID = getGid(pageType);\r\nif (cleanGID.length) setGidOnPage(cleanGID);\r\n\r\nvar cleanProductTitle = cleanTitle(cleanGID);\r\nif (cleanProductTitle.length) setTitleOnPage(cleanProductTitle);\r\n\r\n__utils__.echo('--- GID -> '  + $('#ttGid').text());\r\n__utils__.echo('--- PROD-TITLE -> ' + $('#ttProdTitle').text());\r\n\r\n// Andrew\r\nvar script = __utils__.findOne('//script[@type=\"application/ld+json\"][1]');\r\nvar scriptText = script && script.text();\r\nvar parse;\r\nif (scriptText){\r\n  try { \r\n    parse = JSON.parse(scriptText); \r\n  } catch(e) {\r\n    __utils__.echo('Not able to JSON.parse script for data for brand.');\r\n  }\r\n}\r\n// Extract brand name for brand \r\nvar brandName = parse && parse['brand'] && parse['brand']['name'];\r\nvar brandName = (brandName && brandName !== \"Apple\") ? brandName : 'Apple';\r\n$('div#ttHidden').append('<div class=\"_ttBrand\">'+ brandName + '</div>');\r\n\r\n// Airpods images \r\nvar altimgs = __utils__.findAll('li.thumbnail img');\r\naltimgs.forEach(function(el){\r\n  var elSrc = el.attr('src') && el.attr('src').replace(/wid=[0-9]+&hei=[0-9]+&/, 'wid=1144&hei=1144&');\r\n  sleep(100);\r\n  $('div#ttHidden').append('<img class=\"_ttImages\" src = '+elSrc+'>');\r\n});\r\n\r\nvar noEngravingButton = __utils__.findOne('span.form-selector-title:contains(Skip engraving), span.form-selector-title:contains(No Engraving)');\r\nif (noEngravingButton) __utils__.mouseEvent('click', noEngravingButton);\r\nsleep(1000);\r\n    ","coupon_recording":null,"coupon_recording_info":null,"coupon_recording_error_div":null,"order_id_div_auth":null,"description_div":{"selector":"div.as-configuration-main li.as-productsummary-addon span,\r\n[property=\"og:description\"],\r\nmaterializer[data-uid=\"productInfoSection\"] p,\r\ndiv[class*=\"as-carousel\"] div[class*=\"pd-billboard-info\"]","has_custom_selector":true},"returns":"<p><strong>U.S. Returns &amp; Refunds Policy</strong></p>\r\n\r\n<p><strong>Standard Return Policy</strong></p>\r\n\r\n<p>There are a few important things to keep in mind when returning a product you purchased online from Apple:</p>\r\n\r\n<p>You have 14 calendar days to return an item from the date you received it.</p>\r\n\r\n<p>Only items that have been purchased directly from Apple, either online or at an Apple Retail Store, can be returned to Apple. Apple products purchased through other retailers must be returned in accordance with their respective returns and refunds policy.</p>\r\n\r\n<p>Please ensure that the item you&#39;re returning is repackaged with all the cords, adapters and documentation that were included when you received it.</p>\r\n\r\n<p>There are some items, however, that are ineligible for return, including:</p>\r\n\r\n<p>Opened software*</p>\r\n\r\n<p>Electronic Software Downloads</p>\r\n\r\n<p>Software Up-to-Date Program Products (software upgrades)</p>\r\n\r\n<p>Apple Store Gift Cards</p>\r\n\r\n<p>Apple Developer products (membership, technical support incidents, WWDC tickets)</p>\r\n\r\n<p>Apple Print Products</p>\r\n\r\n<p>*You can return software, provided that it has not been installed on any computer. Software that contains a printed software license may not be returned if the seal or sticker on the software media packaging is broken.</p>\r\n\r\n<p><strong>iPhone and iPad Returns &mdash; Wireless Service Cancellation</strong></p>\r\n\r\n<p>Wireless carriers have different service-cancellation policies. Returning your iPhone or iPad may not automatically cancel or reset your wireless account; you are responsible for your wireless service agreement and for any applicable fees associated with your wireless account. Please contact your provider for more information.</p>\r\n\r\n<p>How to Return an Item</p>\r\n\r\n<p><strong>Ship your item back to Apple</strong></p>\r\n\r\n<p>To return an item to Apple, sign in to your&nbsp;Order Listing&nbsp;page with your Apple ID and password.</p>\r\n\r\n<p>After you sign in, you will see the items from your recent orders. Select an item to go to the order details page. From there, use the&nbsp;<strong>Start a Return</strong>&nbsp;link below your item and then the&nbsp;<strong>Get Started</strong>&nbsp;button. On the next page, confirm the items from your order that you&rsquo;d like to return and select the&nbsp;<strong>Initiate Your Return</strong>&nbsp;button.</p>\r\n\r\n<p>Next, read the instructions and select the&nbsp;<strong>Print Return Label</strong>&nbsp;button to print your shipping and any required hazmat labels. If you&rsquo;re shipping multiple boxes, use the&nbsp;<strong>Print Return Label</strong>&nbsp;button again to print new labels for each box. We recommend using the original packaging if you are returning a computer.</p>\r\n\r\n<p>You can either schedule a pickup with the carrier or drop off the package at any of the carrier&rsquo;s locations.</p>\r\n\r\n<p><strong>Puerto Rico:</strong></p>\r\n\r\n<p>Additional steps are required when shipping an item over $2,500 from Puerto Rico to the continental United States:</p>\r\n\r\n<p>Locate the commodity code of your item at&nbsp;http://www.apple.com/legal/more-resources/gtc.html.</p>\r\n\r\n<p>Visit&nbsp;https://ace.cbp.dhs.gov&nbsp;to file an Export Declaration.</p>\r\n\r\n<p>Follow the aforementioned instructions to initiate your return.</p>\r\n\r\n<p><strong>Bring your item to an Apple Store</strong></p>\r\n\r\n<p>You can always return the item to any U.S. Apple Store. An Apple Specialist will assist you with your return. Your refund will be processed at that time. To locate an Apple Store in your area, please refer to the&nbsp;Apple Retail Store Locator. Please contact your Business Team to initiate a return for orders shipped directly to your business.</p>\r\n\r\n<p>Refunds</p>\r\n\r\n<p>Once we receive your item, a refund is initiated immediately. If you canceled a pickup item, and you were billed for it, we initiate your refund immediately after you submit your cancelation request. The way your refund is processed depends on your original payment method:</p>\r\n\r\n<p>If you paid by credit or debit card, refunds will be sent to the card-issuing bank within five business days of receipt of the returned item or cancelation request. Please contact the card-issuing bank with questions about when the credit will be posted to your account.</p>\r\n\r\n<p>Products purchased from apple.com using an Apple Store Gift Card will be refunded to you as an Apple Store Gift Card by email. If you&rsquo;d like us to send you an Apple Store Gift Card, ask the representative helping you.</p>\r\n\r\n<p><strong>Exchange an item</strong></p>\r\n\r\n<p>If you purchased your item from Apple in the U.S., you can take it to any U.S. Apple Store for an exchange. Item exchanges are, of course, subject to in-store product availability. It&#39;s a good idea to check in-stock availability by calling the Apple Store, or by viewing the product on&nbsp;apple.com&nbsp;to see if the item is available for pick up locally. Personalized items and custom-configured Macs may not be eligible for exchange at an Apple Store.</p>\r\n\r\n<p>Items ordered online from Apple that arrived damaged or are incorrect can be returned to any U.S. Apple Store, or by contacting Customer Service at 1-800-676-2775.</p>\r\n\r\n<p>Gift Returns</p>\r\n\r\n<p><strong>Return a gift</strong></p>\r\n\r\n<p>Visit&nbsp;Your Account&nbsp;page and select&nbsp;Return a Gift. You&rsquo;ll need to provide your product serial number or order number. If you use the order number, you&rsquo;ll also need to provide the UPC number on the product packaging. You can review items eligible for return at this time.</p>\r\n\r\n<p><strong>Note</strong>: You can only return items from one order at a time.</p>\r\n\r\n<p>Provide your contact information and select&nbsp;<strong>Continue</strong>&nbsp;to submit your return.</p>\r\n\r\n<p>On the next page, you&rsquo;ll see instructions for how to complete your return. Use the&nbsp;<strong>Print Return Label</strong>&nbsp;button and attach your pre-paid shipping label and any hazmat labels to the outside of your shipping box. Then send your item back to Apple by scheduling a pickup with the shipping carrier or dropping off the package at any of the carrier&rsquo;s locations. We&rsquo;ll let you know when we receive the item.</p>\r\n\r\n<p>If you need help with your gift return, please call an Apple Specialist at 1‑800‑MY‑APPLE. You can also return eligible items to an Apple Store.</p>\r\n\r\n<p><strong>Gift refunds</strong></p>\r\n\r\n<p>Once we receive your items, we&#39;ll email your refund in the form of an electronic Apple Gift Card.</p>\r\n\r\n<p>You can use your gift card to shop on apple.com or at any U.S. Apple Store.</p>\r\n\r\n<p>For more information about Apple Store Gift Cards and how to redeem, visit the&nbsp;Gifting&nbsp;page.</p>\r\n\r\n<p>Additional Information</p>\r\n\r\n<p>For more information, please read the U.S.&nbsp;Apple Sales and Refunds Policy.</p>\r\n","final_price_div_local":null,"sales_tax_div_local":null,"order_id_div_local":null,"checkout_recording_local":null,"identifier_div_local":null,"name_div_local":null,"distance_div_local":null,"address_div_local":null,"phone_div_local":null,"when_div_local":null,"change_store_div_local":null,"wrapper_div_local":null,"coupon_value_div_auth":null,"gift_card_value_div_auth":null,"remove_addresses_recording_auth":null,"remove_baddresses_recording_auth":null,"remove_payments_recording_auth":null,"mobile_url_conversion":null,"allowed_product_url_args":["option.watch_cases","option.watch_bands","preselect","product","step"],"gift_card_recording":null,"gift_card_recording_info":null,"gift_card_recording_error_div":null,"gift_card_recording_continue_div":null,"remote_status_recording":null,"remote_status_container_div":null,"remote_status_title_div":null,"remote_status_state_div":null,"remote_status_tracking_div":null,"shipping_options_div":null,"shipping_options":{"cheapest":{"text":"cheapest","min_days":"1","max_days":"6"}},"shipping_options_recording_info":{"noauth_start_idx":"0"},"shipping_estimate_exceptions":{"cheapest":"0-99999 --> 0","fastest":""},"sync_data":[],"sync_master_url":null,"shipping_address_div_auth":null,"proxy":{"cart":"","purchase":""},"estimator":"price","feed_type":"ir","feed_meta":{"origin":"Apple-United-States/Apple-US-Full-Product-Catalog_IR.csv.gz","idx_source":"parsed_url","idx_transform":""},"grouping_identifiers":[{"field":"custom_id","modifier":"(.+) --> $1"}],"platform":null,"platform_meta":null,"resolution":null,"cookies":null,"headers":null,"product_fetch_timeout":null,"tags":[],"login_url_check":null,"title_regexp":null,"p_attr_regexp":null,"images_regexp":"wid=\\d+&hei=\\d+ --> wid=1000&hei=1000","sku_regexp":null,"mpn_regexp":"Mfr. Part Number:. --> ","gtin_regexp":null,"receipt_prices":"unknown","gifting_recording":null,"gifting_recording_info":null,"page_detector":[],"page_detector_watch":true,"h_legacy_find_savings":{"h_fs_promo_box_selector":"","h_fs_final_price_selector":"","h_fs_submit_button":"","h_fs_time_between_codes":"2000","h_fs_pre_apply_code_action":"","h_fs_time_between_pre_apply":"1000","h_fs_remove_code_action":"","h_fs_time_between_remove":"1000","h_fs_hide_cart_errors_selector":"","h_fs_hide_cart_errors_selector2":"","h_fs_time_finish":"1000","h_fs_max_codes":"5","h_format_price_divisor":"","h_existing_code_selector":"","h_existing_code_selector_regex":"","h_existing_code_selector_attribute":"","temp_disable_find_savings":false},"h_legacy_metadata":{"pns_siteBaseURL":"not used","pns_siteCartURL1":"not used","pns_siteCartURL2":"not used","pns_siteCartURL3":"not used","pns_siteSelCartCodeSubmitType":"click","pns_siteSelCartAddButton":"#purchase-totals","pns_siteSelCartAddButtonType":"append","pns_siteType":"ajax","pns_pushCodes":"1","pns_priority":"3","pns_siteAzId":"36003","pns_productPricePath":"//ul[@id='purchase-info-primary']/li[@class='total']/p[1]","droplist_vim_is_disabled":"true","pns_observerTarget":"body","pns_siteSelShowHoneyGold":"div.rs-bag-checkoutbutton-bottom","pns_gDACjsonContentType":"","pns_gDAChtmlRes":"","pns_confirmRegex":"store\\.apple\\.com\\/.*shop\\/checkout\\/thankyou","honeyPayCartPriceSelector":"#companionbar-button > span span:nth-child(2)","honeyTipsAutopopOn":"True","launchpad_pathname":"/","pns_siteSelOrderId":".as-buttonlink.rs-thankyou-ordernumber, .rs-thankyou-ordernumber","payPalBtnSel":"button:contains(\"Continue to PayPal\")"},"mixins":null,"vim_overrides":null,"privacy_url":"https://www.apple.com/privacy/","tos_url":"https://www.apple.com/legal/internet-services/terms/site.html","where_am_i":{"title_selector":"//meta[@property=\"og:title\"]/@content","price_selector":"summary-builder div.as-price span[data-autom='price'], div[data-autom*='localnavPrice'] span.price-point-acinstallment + span, div.rf-pdp div.rf-pdp-prices span:first, span.as-price-acinstallmentterms, div.as-productdecision-headerprice div[class*='price-point-fullPrice'] span.nowrap, span.as-price-currentprice span.as-pricepoint-fullprice-comparative, div.as-pdp-main div.as-pdp-purchaseinfosection div.as-price-currentprice span.current_price, div[data-autom*='localnavPrice'] span.price-point-acinstallment+span, summary-builder div.as-price span[data-autom='price'], div.rf-flagship-summary-wrapper div.price-point.price-point-fullPrice span, span.as-prices-fullprice-price, span.as-price-currentprice, .rc-summary-price-box .rc-price div.rc-prices-currentprice span, span.rf-po-bfe-purchasegroupoption-price, span[data-autom=full-price]:first","image_selector":"div[data-autom=\"productImage\"] [data-core-gallery=\"true\"] img, div.ase-gallery-scroll img,gallery[data-uid=\"buyflow-gallery\"] img,div#select-product div.as-carousel-item img,div.as-productdecision-inlinegallery div.as-carousel img,div[id*=\"preload-images\"] img,img.rf-flagship-main-image,img._ttImages, div[data-core-gallery-item=true][aria-hidden=true] img, div.rc-overlay-gallery-item img, div.rf-bfe-gallery-image-wrapper img, div[data-core-gallery-scroller=\"true\"] img, div[data-autom=\"productImage\"] [data-core-gallery=\"true\"] img:first, div.as-configuration-stickybox img, div[class*=\"as-productdecision-selectionmedia-ambient\"] img, div#select-product div.as-carousel-item:first-child img, div#hero-gallery div.main-image div[role=\"button\"]:not(.hide) img, div.as-productdecision-stickybox materializer.ase-materializer-show img, img.rf-flagship-main-image, div[data-core-gallery-item=true][aria-hidden=false] img, img.rf-configuration-hero-image","category_selector":"li.as-globalfooter-breadcrumbs-item:not(last-child) a","keyword_selector":"","titleRegexp":"","imagesRegexp":""},"cart_link_div":null,"cart_link_div_mobile":null,"cart_link_div_extension":null,"cart_link_div_six":null,"cart_link_div_server":null,"cart_qtys_div":{"selector":"select[aria-label=\"Quantity\"] option[selected=\"true\"], div.rs-quantity-text span:not(.visuallyhidden)","noauth_start_idx":"0","auth_start_idx":"","local_start_idx":""},"cart_qtys_div_mobile":null,"cart_qtys_div_extension":null,"cart_qtys_div_six":null,"cart_qtys_div_server":null,"cart_wrapper_div":{"selector":"div#bag-content ol#cart-items li[role=\"listitem\"], div.rs-checkout ol.rs-iteminfos, li[class=\"rs-bag-item rs-iteminfo-wrap\"]","noauth_start_idx":"","auth_start_idx":"","local_start_idx":""},"cart_wrapper_div_mobile":null,"cart_wrapper_div_extension":null,"cart_wrapper_div_six":null,"cart_wrapper_div_server":null,"cart_p_name_div":{"selector":"h2.rs-iteminfo-title","has_custom_selector":true},"cart_p_name_div_mobile":null,"cart_p_name_div_extension":null,"cart_p_name_div_six":null,"cart_p_name_div_server":null,"cart_p_sku_div":null,"cart_p_sku_div_mobile":null,"cart_p_sku_div_extension":null,"cart_p_sku_div_six":null,"cart_p_sku_div_server":null,"cart_title_regexp":null,"cart_title_regexp_mobile":null,"cart_title_regexp_extension":null,"cart_title_regexp_six":null,"cart_title_regexp_server":null,"cart_p_url_div":{"selector":"h2.rs-iteminfo-title a","has_custom_selector":true},"cart_p_url_div_mobile":null,"cart_p_url_div_extension":null,"cart_p_url_div_six":null,"cart_p_url_div_server":null,"cart_p_image_div":{"selector":"div[data-autom=\"bag-item-image\"] img, div.rs-iteminfo-image img","has_custom_selector":true},"cart_p_image_div_mobile":null,"cart_p_image_div_extension":null,"cart_p_image_div_six":null,"cart_p_image_div_server":null,"cart_p_qty_div":{"selector":"select[aria-label=\"Quantity\"] option[selected=\"true\"], div.rs-quantity-text span:not(.visuallyhidden), [class=\"rs-quantity-selector\"] label","has_custom_selector":true},"cart_p_qty_div_mobile":null,"cart_p_qty_div_extension":null,"cart_p_qty_div_six":null,"cart_p_qty_div_server":null,"cart_p_attrs_div":{"selector":"div.rs-iteminfo-detailstext li","has_custom_selector":true},"cart_p_attrs_div_mobile":null,"cart_p_attrs_div_extension":null,"cart_p_attrs_div_six":null,"cart_p_attrs_div_server":null,"cart_p_unit_price_div":null,"cart_p_unit_price_div_mobile":null,"cart_p_unit_price_div_extension":null,"cart_p_unit_price_div_six":null,"cart_p_unit_price_div_server":null,"cart_p_total_price_div":{"selector":"div.rs-iteminfo-pricedetails [data-autom=\"bag-item-totalprice\"], div.rs-iteminfo-price p","has_custom_selector":true},"cart_p_total_price_div_mobile":null,"cart_p_total_price_div_extension":null,"cart_p_total_price_div_six":null,"cart_p_total_price_div_server":null,"cart_p_subtotal_div":{"selector":"div.rs-summary div[data-autom=\"bagrs-summary-subtotalvalue\"]","has_custom_selector":true},"cart_p_subtotal_div_mobile":null,"cart_p_subtotal_div_extension":null,"cart_p_subtotal_div_six":null,"cart_p_subtotal_div_server":null,"cart_p_tax_div":{"selector":"div.rs-summary-content div[data-autom=\"bagrs-summary-taxvalue\"]","has_custom_selector":true},"cart_p_tax_div_mobile":null,"cart_p_tax_div_extension":null,"cart_p_tax_div_six":null,"cart_p_tax_div_server":null,"cart_p_shipping_div":{"selector":"div.rs-summary-content div[data-autom=\"bagrs-summary-shippingvalue\"]","has_custom_selector":true},"cart_p_shipping_div_mobile":null,"cart_p_shipping_div_extension":null,"cart_p_shipping_div_six":null,"cart_p_shipping_div_server":null,"cart_total_div":{"selector":"div.rs-summary-value[data-autom='bagtotalvalue']","has_custom_selector":true},"cart_total_div_mobile":null,"cart_total_div_extension":null,"cart_total_div_six":null,"cart_total_div_server":null,"cart_custom_id":null,"cart_custom_id_mobile":null,"cart_custom_id_extension":null,"cart_custom_id_six":null,"cart_custom_id_server":null,"cart_opts_retrieval_js":null,"cart_opts_retrieval_js_mobile":null,"cart_opts_retrieval_js_extension":null,"cart_opts_retrieval_js_six":null,"cart_opts_retrieval_js_server":null,"address_check_noauth":null,"address_check_noauth_mobile":null,"address_check_noauth_extension":null,"address_check_noauth_six":null,"address_check_noauth_server":null,"final_price_div_noauth":{"selector":"div.rs-summary-total div.rs-summary-value","has_custom_selector":true,"recording_idx":"26","frame":""},"final_price_div_noauth_mobile":null,"final_price_div_noauth_extension":null,"final_price_div_noauth_six":null,"final_price_div_noauth_server":null,"shipping_price_div_noauth":{"selector":"div.rs-summary-shipping div.rs-summary-value","has_custom_selector":true,"recording_idx":"26","frame":""},"shipping_price_div_noauth_mobile":null,"shipping_price_div_noauth_extension":null,"shipping_price_div_noauth_six":null,"shipping_price_div_noauth_server":null,"handling_price_div_noauth":null,"handling_price_div_noauth_mobile":null,"handling_price_div_noauth_extension":null,"handling_price_div_noauth_six":null,"handling_price_div_noauth_server":null,"checkout_recording_noauth":[{"type":20,"info":{"type":"text","tagName":"BUTTON","value":"","options":null,"selector":"#bag-content button[id='shoppingCart.actions.navCheckout']","is_optional":"no","frame":"","timeout":"","comment":"","checked":null}},{"type":20,"info":{"tagName":"SPAN","options":null,"selector":"button#guest-checkout span","is_optional":"no","frame":"","timeout":"","comment":"","checked":null}},{"type":20,"info":{"type":"text","tagName":"BUTTON","value":"","options":null,"selector":"#checkout-container button#rs-checkout-continue-button-bottom","is_optional":"no","frame":"","timeout":"","comment":"","checked":null}},{"type":2,"field_key":"shipping_first_name","field_type":"","info":{"type":"text","tagName":"INPUT","value":"Manny","checked":null,"options":null,"selector":"#checkout-container input[id='checkout.shipping.addressSelector.newAddress.address.firstName']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":2,"field_key":"shipping_last_name","field_type":"","info":{"type":"text","tagName":"INPUT","value":"Dion","checked":null,"options":null,"selector":"#checkout-container input[id='checkout.shipping.addressSelector.newAddress.address.lastName']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":2,"field_key":"shipping_address","field_type":"","info":{"type":"text","tagName":"INPUT","value":"6583 Del  playa dr","checked":null,"options":null,"selector":"#checkout-container input[id='checkout.shipping.addressSelector.newAddress.address.street']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":2,"info":{"selector":"#checkout-container input[id='checkout.shipping.addressSelector.newAddress.address.street2']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null},"field_key":"shipping_address_2","field_type":""},{"type":2,"field_key":"shipping_zip","field_type":"","info":{"type":"text","tagName":"INPUT","value":"93117","checked":null,"options":null,"selector":"#checkout-container input[id='checkout.shipping.addressSelector.newAddress.address.zipLookup.postalCode']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":2,"field_key":"email","field_type":"","info":{"type":"text","tagName":"INPUT","value":"mannydionxo12@gmail.com","checked":null,"options":null,"selector":"#checkout-container input[id='checkout.shipping.addressContactEmail.address.emailAddress']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":2,"field_key":"shipping_telephone","field_type":"","info":{"type":"text","tagName":"INPUT","value":"(484) 567-8901","checked":null,"options":null,"selector":"#checkout-container input[id='checkout.shipping.addressContactPhone.address.fullDaytimePhone']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":20,"info":{"type":"text","tagName":"BUTTON","value":"","options":null,"selector":"#checkout-container button#rs-checkout-continue-button-bottom","is_optional":"no","frame":"","timeout":"","comment":"","checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"3000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":".rs-addressverification-recommendedaddr button","frame":"","is_optional":"yes","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null,"has_custom_selector":true}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"3000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"selector":"[id='checkout.billing.billingOptions.options.0-selector'] input[id='checkout.billing.billingOptions.options.0']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"field_key":"card_number","field_type":"","info":{"type":"text","tagName":"INPUT","value":"4707 8500 0829 8701","checked":null,"options":null,"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.cardInputs.cardInput-0.cardNumber']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":2,"field_key":"combined_mm_yy_expiry_date","field_type":"payment","info":{"type":"text","tagName":"INPUT","value":"12/24","checked":null,"options":null,"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.cardInputs.cardInput-0.expiration']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":2,"field_key":"cvv","field_type":"","info":{"type":"text","tagName":"INPUT","value":"352","checked":null,"options":null,"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.cardInputs.cardInput-0.securityCode']","is_optional":"no","frame":"","timeout":"","comment":""}},{"type":20,"info":{"selector":".form-checkbox input","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":1000,"info":{"selector":null,"frame":"","is_optional":"no","interval":"2000","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":2,"info":{"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.billingAddress.address.firstName']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","options":null,"text_only":"","comment":"","checked":null,"has_custom_selector":true},"field_key":"billing_first_name","field_type":""},{"type":2,"field_key":"billing_last_name","field_type":"","info":{"type":"text","tagName":"INPUT","value":"Manny","checked":null,"options":null,"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.billingAddress.address.lastName']","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true}},{"type":2,"field_key":"billing_address","field_type":"","info":{"type":"text","tagName":"INPUT","value":"Dion","checked":null,"options":null,"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.billingAddress.address.street']","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true}},{"type":2,"field_key":"billing_address_2","field_type":"","info":{"type":"text","tagName":"INPUT","value":"6583 Del  playa dr","checked":null,"options":null,"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.billingAddress.address.street2']","is_optional":"no","frame":"","timeout":"","comment":"","has_custom_selector":true}},{"type":2,"info":{"selector":"[id='rr-accordion-checkout.billing.billingOptions.options.0_paymentModule.open'] input[id='checkout.billing.billingOptions.selectedBillingOptions.creditCard.billingAddress.address.zipLookup.postalCode']","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","tagName":"INPUT","type":"text","comment":"","options":null,"checked":null,"has_custom_selector":true},"field_key":"billing_zip","field_type":""},{"type":20,"info":{"selector":"#checkout-container button#rs-checkout-continue-button-bottom","frame":"","is_optional":"no","interval":"","js_code":null,"timeout":"","comment":"","options":null,"checked":null}},{"type":20,"info":{"type":"text","tagName":"BUTTON","value":"","options":null,"selector":"#checkout-container button#rs-checkout-continue-button-bottom","is_optional":"no","frame":"","timeout":"","comment":"","checked":null}}],"checkout_recording_noauth_mobile":null,"checkout_recording_noauth_extension":null,"checkout_recording_noauth_six":null,"checkout_recording_noauth_server":null,"sales_tax_div_noauth":{"selector":"div.rs-summary div[data-autom=\"bagrs-summary-taxvalue\"] span","has_custom_selector":true,"recording_idx":"26","frame":""},"sales_tax_div_noauth_mobile":null,"sales_tax_div_noauth_extension":null,"sales_tax_div_noauth_six":null,"sales_tax_div_noauth_server":null,"shipping_estimate_div_noauth":null,"shipping_estimate_div_noauth_mobile":null,"shipping_estimate_div_noauth_extension":null,"shipping_estimate_div_noauth_six":null,"shipping_estimate_div_noauth_server":null,"checkout_information_noauth":null,"checkout_information_noauth_mobile":null,"checkout_information_noauth_extension":null,"checkout_information_noauth_six":null,"checkout_information_noauth_server":null,"order_id_div_noauth":{"selector":".as-buttonlink.rs-thankyou-ordernumber","has_custom_selector":true,"frame":""},"order_id_div_noauth_mobile":null,"order_id_div_noauth_extension":null,"order_id_div_noauth_six":null,"order_id_div_noauth_server":null,"coupon_value_div_noauth":null,"coupon_value_div_noauth_mobile":null,"coupon_value_div_noauth_extension":null,"coupon_value_div_noauth_six":null,"coupon_value_div_noauth_server":null,"gift_card_value_div_noauth":null,"gift_card_value_div_noauth_mobile":null,"gift_card_value_div_noauth_extension":null,"gift_card_value_div_noauth_six":null,"gift_card_value_div_noauth_server":null,"shipping_address_div_noauth":null,"shipping_address_div_noauth_mobile":null,"shipping_address_div_noauth_extension":null,"shipping_address_div_noauth_six":null,"shipping_address_div_noauth_server":null,"has_issues":false,"changelog":"RO-24616 - added code in prod opts to block customizable products.","parent_id":{"$oid":"635849e0e357d00001f12864"},"created_at":{"$date":"2023-09-28T23:00:24.930Z"},"updated_at":{"$date":"2023-10-02T07:59:35.116Z"},"worker_honey_user_id":"319536631828970187","activated_at":{"$date":"2023-10-02T08:00:02.320Z"},"activated_by_honey_user_id":"319536631828970187","assignee_id":null}